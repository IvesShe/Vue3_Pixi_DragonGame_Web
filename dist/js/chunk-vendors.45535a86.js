(self["webpackChunkvue3_pixi_dragon_game"]=self["webpackChunkvue3_pixi_dragon_game"]||[]).push([[504],{28:function(t,e,r){"use strict";var n=r(5072),i=r(3071),s=r(1012),o=r(9340),a=n("%Map%",!0),h=i("Map.prototype.get",!0),l=i("Map.prototype.set",!0),u=i("Map.prototype.has",!0),c=i("Map.prototype.delete",!0),d=i("Map.prototype.size",!0);t.exports=!!a&&function(){var t,e={assert:function(t){if(!e.has(t))throw new o("Side channel does not contain "+s(t))},delete:function(e){if(t){var r=c(t,e);return 0===d(t)&&(t=void 0),r}return!1},get:function(e){if(t)return h(t,e)},has:function(e){return!!t&&u(t,e)},set:function(e,r){t||(t=new a),l(t,e,r)}};return e}},34:function(t,e,r){"use strict";var n=r(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},81:function(t,e,r){"use strict";var n=r(9565),i=r(9306),s=r(8551),o=r(6823),a=r(851),h=TypeError;t.exports=function(t,e){var r=arguments.length<2?a(t):e;if(i(r))return s(n(r,t));throw new h(o(t)+" is not iterable")}},116:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),h=r(1767),l=r(9539),u=r(4549),c=u("find",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{find:function(t){a(this);try{o(t)}catch(n){l(this,"throw",n)}if(c)return i(c,this,t);var e=h(this),r=0;return s(e,function(e,n){if(t(e,r++))return n(e)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})},144:function(t,e,r){"use strict";r.d(e,{C4:function(){return w},EW:function(){return Ot},Gc:function(){return yt},IG:function(){return At},Kh:function(){return gt},Pr:function(){return Mt},R1:function(){return Ct},X2:function(){return l},bl:function(){return A},hZ:function(){return N},i9:function(){return It},ju:function(){return Tt},u4:function(){return F},ux:function(){return wt},wB:function(){return kt},yC:function(){return o}});r(4114),r(8111),r(2489),r(7588),r(1701),r(3579),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var n=r(4232);let i,s;class o{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=i,!t&&i&&(this.index=(i.scopes||(i.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let t,e;if(this._isPaused=!0,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){let t,e;if(this._isPaused=!1,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=i;try{return i=this,t()}finally{i=e}}else 0}on(){1===++this._on&&(this.prevScope=i,i=this)}off(){this._on>0&&0===--this._on&&(i=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){let e,r;for(this._active=!1,e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(this.effects.length=0,e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0}}}function a(){return i}const h=new WeakSet;class l{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,i&&i.active&&i.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,h.has(this)&&(h.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||f(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,S(this),g(this);const t=s,e=E;s=this,E=!0;try{return this.fn()}finally{0,y(this),s=t,E=e,this.flags&=-3}}stop(){if(1&this.flags){for(let t=this.deps;t;t=t.nextDep)x(t);this.deps=this.depsTail=void 0,S(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?h.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_(this)&&this.run()}get dirty(){return _(this)}}let u,c,d=0;function f(t,e=!1){if(t.flags|=8,e)return t.next=c,void(c=t);t.next=u,u=t}function p(){d++}function m(){if(--d>0)return;if(c){let t=c;c=void 0;while(t){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let t;while(u){let r=u;u=void 0;while(r){const n=r.next;if(r.next=void 0,r.flags&=-9,1&r.flags)try{r.trigger()}catch(e){t||(t=e)}r=n}}if(t)throw t}function g(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function y(t){let e,r=t.depsTail,n=r;while(n){const t=n.prevDep;-1===n.version?(n===r&&(r=t),x(n),b(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=t}t.deps=e,t.depsTail=r}function _(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(v(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function v(t){if(4&t.flags&&!(16&t.flags))return;if(t.flags&=-17,t.globalVersion===R)return;if(t.globalVersion=R,!t.isSSR&&128&t.flags&&(!t.deps&&!t._dirty||!_(t)))return;t.flags|=2;const e=t.dep,r=s,i=E;s=t,E=!0;try{g(t);const r=t.fn(t._value);(0===e.version||(0,n.$H)(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(o){throw e.version++,o}finally{s=r,E=i,y(t),t.flags&=-3}}function x(t,e=!1){const{dep:r,prevSub:n,nextSub:i}=t;if(n&&(n.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=n,t.nextSub=void 0),r.subs===t&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let t=r.computed.deps;t;t=t.nextDep)x(t,!0)}e||--r.sc||!r.map||r.map.delete(r.key)}function b(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let E=!0;const T=[];function w(){T.push(E),E=!1}function A(){const t=T.pop();E=void 0===t||t}function S(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const t=s;s=void 0;try{e()}finally{s=t}}}let R=0;class I{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class C{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!s||!E||s===this.computed)return;let e=this.activeLink;if(void 0===e||e.sub!==s)e=this.activeLink=new I(s,this),s.deps?(e.prevDep=s.depsTail,s.depsTail.nextDep=e,s.depsTail=e):s.deps=s.depsTail=e,P(e);else if(-1===e.version&&(e.version=this.version,e.nextDep)){const t=e.nextDep;t.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=t),e.prevDep=s.depsTail,e.nextDep=void 0,s.depsTail.nextDep=e,s.depsTail=e,s.deps===e&&(s.deps=t)}return e}trigger(t){this.version++,R++,this.notify(t)}notify(t){p();try{0;for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{m()}}}function P(t){if(t.dep.sc++,4&t.sub.flags){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let t=e.deps;t;t=t.nextDep)P(t)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const M=new WeakMap,D=Symbol(""),O=Symbol(""),B=Symbol("");function F(t,e,r){if(E&&s){let e=M.get(t);e||M.set(t,e=new Map);let n=e.get(r);n||(e.set(r,n=new C),n.map=e,n.key=r),n.track()}}function N(t,e,r,i,s,o){const a=M.get(t);if(!a)return void R++;const h=t=>{t&&t.trigger()};if(p(),"clear"===e)a.forEach(h);else{const s=(0,n.cy)(t),o=s&&(0,n.yI)(r);if(s&&"length"===r){const t=Number(i);a.forEach((e,r)=>{("length"===r||r===B||!(0,n.Bm)(r)&&r>=t)&&h(e)})}else switch((void 0!==r||a.has(void 0))&&h(a.get(r)),o&&h(a.get(B)),e){case"add":s?o&&h(a.get("length")):(h(a.get(D)),(0,n.CE)(t)&&h(a.get(O)));break;case"delete":s||(h(a.get(D)),(0,n.CE)(t)&&h(a.get(O)));break;case"set":(0,n.CE)(t)&&h(a.get(D));break}}m()}function L(t){const e=wt(t);return e===t?e:(F(e,"iterate",B),Et(t)?e:e.map(St))}function k(t){return F(t=wt(t),"iterate",B),t}const U={__proto__:null,[Symbol.iterator](){return G(this,Symbol.iterator,St)},concat(...t){return L(this).concat(...t.map(t=>(0,n.cy)(t)?L(t):t))},entries(){return G(this,"entries",t=>(t[1]=St(t[1]),t))},every(t,e){return H(this,"every",t,e,void 0,arguments)},filter(t,e){return H(this,"filter",t,e,t=>t.map(St),arguments)},find(t,e){return H(this,"find",t,e,St,arguments)},findIndex(t,e){return H(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return H(this,"findLast",t,e,St,arguments)},findLastIndex(t,e){return H(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return H(this,"forEach",t,e,void 0,arguments)},includes(...t){return z(this,"includes",t)},indexOf(...t){return z(this,"indexOf",t)},join(t){return L(this).join(t)},lastIndexOf(...t){return z(this,"lastIndexOf",t)},map(t,e){return H(this,"map",t,e,void 0,arguments)},pop(){return W(this,"pop")},push(...t){return W(this,"push",t)},reduce(t,...e){return X(this,"reduce",t,e)},reduceRight(t,...e){return X(this,"reduceRight",t,e)},shift(){return W(this,"shift")},some(t,e){return H(this,"some",t,e,void 0,arguments)},splice(...t){return W(this,"splice",t)},toReversed(){return L(this).toReversed()},toSorted(t){return L(this).toSorted(t)},toSpliced(...t){return L(this).toSpliced(...t)},unshift(...t){return W(this,"unshift",t)},values(){return G(this,"values",St)}};function G(t,e,r){const n=k(t),i=n[e]();return n===t||Et(t)||(i._next=i.next,i.next=()=>{const t=i._next();return t.value&&(t.value=r(t.value)),t}),i}const j=Array.prototype;function H(t,e,r,n,i,s){const o=k(t),a=o!==t&&!Et(t),h=o[e];if(h!==j[e]){const e=h.apply(t,s);return a?St(e):e}let l=r;o!==t&&(a?l=function(e,n){return r.call(this,St(e),n,t)}:r.length>2&&(l=function(e,n){return r.call(this,e,n,t)}));const u=h.call(o,l,n);return a&&i?i(u):u}function X(t,e,r,n){const i=k(t);let s=r;return i!==t&&(Et(t)?r.length>3&&(s=function(e,n,i){return r.call(this,e,n,i,t)}):s=function(e,n,i){return r.call(this,e,St(n),i,t)}),i[e](s,...n)}function z(t,e,r){const n=wt(t);F(n,"iterate",B);const i=n[e](...r);return-1!==i&&!1!==i||!Tt(r[0])?i:(r[0]=wt(r[0]),n[e](...r))}function W(t,e,r=[]){w(),p();const n=wt(t)[e].apply(t,r);return m(),A(),n}const $=(0,n.pD)("__proto__,__v_isRef,__isVue"),V=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>"arguments"!==t&&"caller"!==t).map(t=>Symbol[t]).filter(n.Bm));function Y(t){(0,n.Bm)(t)||(t=String(t));const e=wt(this);return F(e,"has",t),e.hasOwnProperty(t)}class q{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){if("__v_skip"===e)return t["__v_skip"];const i=this._isReadonly,s=this._isShallow;if("__v_isReactive"===e)return!i;if("__v_isReadonly"===e)return i;if("__v_isShallow"===e)return s;if("__v_raw"===e)return r===(i?s?ft:dt:s?ct:ut).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=(0,n.cy)(t);if(!i){let t;if(o&&(t=U[e]))return t;if("hasOwnProperty"===e)return Y}const a=Reflect.get(t,e,It(t)?t:r);return((0,n.Bm)(e)?V.has(e):$(e))?a:(i||F(t,"get",e),s?a:It(a)?o&&(0,n.yI)(e)?a:a.value:(0,n.Gv)(a)?i?_t(a):gt(a):a)}}class K extends q{constructor(t=!1){super(!1,t)}set(t,e,r,i){let s=t[e];if(!this._isShallow){const e=bt(s);if(Et(r)||bt(r)||(s=wt(s),r=wt(r)),!(0,n.cy)(t)&&It(s)&&!It(r))return!e&&(s.value=r,!0)}const o=(0,n.cy)(t)&&(0,n.yI)(e)?Number(e)<t.length:(0,n.$3)(t,e),a=Reflect.set(t,e,r,It(t)?t:i);return t===wt(i)&&(o?(0,n.$H)(r,s)&&N(t,"set",e,r,s):N(t,"add",e,r)),a}deleteProperty(t,e){const r=(0,n.$3)(t,e),i=t[e],s=Reflect.deleteProperty(t,e);return s&&r&&N(t,"delete",e,void 0,i),s}has(t,e){const r=Reflect.has(t,e);return(0,n.Bm)(e)&&V.has(e)||F(t,"has",e),r}ownKeys(t){return F(t,"iterate",(0,n.cy)(t)?"length":D),Reflect.ownKeys(t)}}class Z extends q{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Q=new K,J=new Z,tt=new K(!0),et=t=>t,rt=t=>Reflect.getPrototypeOf(t);function nt(t,e,r){return function(...i){const s=this["__v_raw"],o=wt(s),a=(0,n.CE)(o),h="entries"===t||t===Symbol.iterator&&a,l="keys"===t&&a,u=s[t](...i),c=r?et:e?Rt:St;return!e&&F(o,"iterate",l?O:D),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:h?[c(t[0]),c(t[1])]:c(t),done:e}},[Symbol.iterator](){return this}}}}function it(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function st(t,e){const r={get(r){const i=this["__v_raw"],s=wt(i),o=wt(r);t||((0,n.$H)(r,o)&&F(s,"get",r),F(s,"get",o));const{has:a}=rt(s),h=e?et:t?Rt:St;return a.call(s,r)?h(i.get(r)):a.call(s,o)?h(i.get(o)):void(i!==s&&i.get(r))},get size(){const e=this["__v_raw"];return!t&&F(wt(e),"iterate",D),Reflect.get(e,"size",e)},has(e){const r=this["__v_raw"],i=wt(r),s=wt(e);return t||((0,n.$H)(e,s)&&F(i,"has",e),F(i,"has",s)),e===s?r.has(e):r.has(e)||r.has(s)},forEach(r,n){const i=this,s=i["__v_raw"],o=wt(s),a=e?et:t?Rt:St;return!t&&F(o,"iterate",D),s.forEach((t,e)=>r.call(n,a(t),a(e),i))}};(0,n.X$)(r,t?{add:it("add"),set:it("set"),delete:it("delete"),clear:it("clear")}:{add(t){e||Et(t)||bt(t)||(t=wt(t));const r=wt(this),n=rt(r),i=n.has.call(r,t);return i||(r.add(t),N(r,"add",t,t)),this},set(t,r){e||Et(r)||bt(r)||(r=wt(r));const i=wt(this),{has:s,get:o}=rt(i);let a=s.call(i,t);a||(t=wt(t),a=s.call(i,t));const h=o.call(i,t);return i.set(t,r),a?(0,n.$H)(r,h)&&N(i,"set",t,r,h):N(i,"add",t,r),this},delete(t){const e=wt(this),{has:r,get:n}=rt(e);let i=r.call(e,t);i||(t=wt(t),i=r.call(e,t));const s=n?n.call(e,t):void 0,o=e.delete(t);return i&&N(e,"delete",t,void 0,s),o},clear(){const t=wt(this),e=0!==t.size,r=void 0,n=t.clear();return e&&N(t,"clear",void 0,void 0,r),n}});const i=["keys","values","entries",Symbol.iterator];return i.forEach(n=>{r[n]=nt(n,t,e)}),r}function ot(t,e){const r=st(t,e);return(e,i,s)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get((0,n.$3)(r,i)&&i in e?r:e,i,s)}const at={get:ot(!1,!1)},ht={get:ot(!1,!0)},lt={get:ot(!0,!1)};const ut=new WeakMap,ct=new WeakMap,dt=new WeakMap,ft=new WeakMap;function pt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:pt((0,n.Zf)(t))}function gt(t){return bt(t)?t:vt(t,!1,Q,at,ut)}function yt(t){return vt(t,!1,tt,ht,ct)}function _t(t){return vt(t,!0,J,lt,dt)}function vt(t,e,r,i,s){if(!(0,n.Gv)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=mt(t);if(0===o)return t;const a=s.get(t);if(a)return a;const h=new Proxy(t,2===o?i:r);return s.set(t,h),h}function xt(t){return bt(t)?xt(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function bt(t){return!(!t||!t["__v_isReadonly"])}function Et(t){return!(!t||!t["__v_isShallow"])}function Tt(t){return!!t&&!!t["__v_raw"]}function wt(t){const e=t&&t["__v_raw"];return e?wt(e):t}function At(t){return!(0,n.$3)(t,"__v_skip")&&Object.isExtensible(t)&&(0,n.yQ)(t,"__v_skip",!0),t}const St=t=>(0,n.Gv)(t)?gt(t):t,Rt=t=>(0,n.Gv)(t)?_t(t):t;function It(t){return!!t&&!0===t["__v_isRef"]}function Ct(t){return It(t)?t.value:t}const Pt={get:(t,e,r)=>"__v_raw"===e?t:Ct(Reflect.get(t,e,r)),set:(t,e,r,n)=>{const i=t[e];return It(i)&&!It(r)?(i.value=r,!0):Reflect.set(t,e,r,n)}};function Mt(t){return xt(t)?t:new Proxy(t,Pt)}class Dt{constructor(t,e,r){this.fn=t,this.setter=e,this._value=void 0,this.dep=new C(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=R-1,this.next=void 0,this.effect=this,this["__v_isReadonly"]=!e,this.isSSR=r}notify(){if(this.flags|=16,!(8&this.flags||s===this))return f(this,!0),!0}get value(){const t=this.dep.track();return v(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ot(t,e,r=!1){let i,s;(0,n.Tn)(t)?i=t:(i=t.get,s=t.set);const o=new Dt(i,s,r);return o}const Bt={},Ft=new WeakMap;let Nt;function Lt(t,e=!1,r=Nt){if(r){let e=Ft.get(r);e||Ft.set(r,e=[]),e.push(t)}else 0}function kt(t,e,r=n.MZ){const{immediate:i,deep:s,once:o,scheduler:h,augmentJob:u,call:c}=r,d=t=>s?t:Et(t)||!1===s||0===s?Ut(t,1):Ut(t);let f,p,m,g,y=!1,_=!1;if(It(t)?(p=()=>t.value,y=Et(t)):xt(t)?(p=()=>d(t),y=!0):(0,n.cy)(t)?(_=!0,y=t.some(t=>xt(t)||Et(t)),p=()=>t.map(t=>It(t)?t.value:xt(t)?d(t):(0,n.Tn)(t)?c?c(t,2):t():void 0)):p=(0,n.Tn)(t)?e?c?()=>c(t,2):t:()=>{if(m){w();try{m()}finally{A()}}const e=Nt;Nt=f;try{return c?c(t,3,[g]):t(g)}finally{Nt=e}}:n.tE,e&&s){const t=p,e=!0===s?1/0:s;p=()=>Ut(t(),e)}const v=a(),x=()=>{f.stop(),v&&v.active&&(0,n.TF)(v.effects,f)};if(o&&e){const t=e;e=(...e)=>{t(...e),x()}}let b=_?new Array(t.length).fill(Bt):Bt;const E=t=>{if(1&f.flags&&(f.dirty||t))if(e){const t=f.run();if(s||y||(_?t.some((t,e)=>(0,n.$H)(t,b[e])):(0,n.$H)(t,b))){m&&m();const r=Nt;Nt=f;try{const r=[t,b===Bt?void 0:_&&b[0]===Bt?[]:b,g];b=t,c?c(e,3,r):e(...r)}finally{Nt=r}}}else f.run()};return u&&u(E),f=new l(p),f.scheduler=h?()=>h(E,!1):E,g=t=>Lt(t,!1,f),m=f.onStop=()=>{const t=Ft.get(f);if(t){if(c)c(t,4);else for(const e of t)e();Ft.delete(f)}},e?i?E(!0):b=f.run():h?h(E.bind(null,!0),!0):f.run(),x.pause=f.pause.bind(f),x.resume=f.resume.bind(f),x.stop=x,x}function Ut(t,e=1/0,r){if(e<=0||!(0,n.Gv)(t)||t["__v_skip"])return t;if(r=r||new Set,r.has(t))return t;if(r.add(t),e--,It(t))Ut(t.value,e,r);else if((0,n.cy)(t))for(let n=0;n<t.length;n++)Ut(t[n],e,r);else if((0,n.vM)(t)||(0,n.CE)(t))t.forEach(t=>{Ut(t,e,r)});else if((0,n.Qd)(t)){for(const n in t)Ut(t[n],e,r);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Ut(t[n],e,r)}return t}},283:function(t,e,r){"use strict";var n=r(9504),i=r(9039),s=r(4901),o=r(9297),a=r(3724),h=r(350).CONFIGURABLE,l=r(3706),u=r(1181),c=u.enforce,d=u.get,f=String,p=Object.defineProperty,m=n("".slice),g=n("".replace),y=n([].join),_=a&&!i(function(){return 8!==p(function(){},"length",{value:8}).length}),v=String(String).split("String"),x=t.exports=function(t,e,r){"Symbol("===m(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!o(t,"name")||h&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),_&&r&&o(r,"arity")&&t.length!==r.arity&&p(t,"length",{value:r.arity});try{r&&o(r,"constructor")&&r.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(i){}var n=c(t);return o(n,"source")||(n.source=y(v,"string"==typeof e?e:"")),t};Function.prototype.toString=x(function(){return s(this)&&d(this).source||l(this)},"toString")},350:function(t,e,r){"use strict";var n=r(3724),i=r(9297),s=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=i(s,"name"),h=a&&"something"===function(){}.name,l=a&&(!n||n&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:h,CONFIGURABLE:l}},397:function(t,e,r){"use strict";var n=r(7751);t.exports=n("document","documentElement")},409:function(t){"use strict";t.exports=Math.pow},421:function(t){"use strict";t.exports={}},507:function(t,e,r){"use strict";var n=r(9565);t.exports=function(t,e,r){var i,s,o=r?t:t.iterator,a=t.next;while(!(i=n(a,o)).done)if(s=e(i.value),void 0!==s)return s}},616:function(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},655:function(t,e,r){"use strict";var n=r(6955),i=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},679:function(t,e,r){"use strict";var n=r(1625),i=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new i("Incorrect invocation")}},684:function(t){"use strict";t.exports=function(t,e){var r="function"==typeof Iterator&&Iterator.prototype[t];if(r)try{r.call({next:null},e).next()}catch(n){return!0}}},741:function(t){"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},757:function(t,e,r){"use strict";var n=r(7751),i=r(4901),s=r(1625),o=r(7040),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return i(e)&&s(e.prototype,a(t))}},833:function(t,e,r){"use strict";var n=r(6147),i=r(6417),s=r(4887);t.exports=n?function(t){return n(t)}:i?function(t){if(!t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("getProto: not an object");return i(t)}:s?function(t){return s(t)}:null},851:function(t,e,r){"use strict";var n=r(6955),i=r(5966),s=r(4117),o=r(6269),a=r(8227),h=a("iterator");t.exports=function(t){if(!s(t))return i(t,h)||i(t,"@@iterator")||o[n(t)]}},1012:function(t,e,r){r(4114),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var n="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=n&&i&&"function"===typeof i.get?i.get:null,o=n&&Map.prototype.forEach,a="function"===typeof Set&&Set.prototype,h=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=a&&h&&"function"===typeof h.get?h.get:null,u=a&&Set.prototype.forEach,c="function"===typeof WeakMap&&WeakMap.prototype,d=c?WeakMap.prototype.has:null,f="function"===typeof WeakSet&&WeakSet.prototype,p=f?WeakSet.prototype.has:null,m="function"===typeof WeakRef&&WeakRef.prototype,g=m?WeakRef.prototype.deref:null,y=Boolean.prototype.valueOf,_=Object.prototype.toString,v=Function.prototype.toString,x=String.prototype.match,b=String.prototype.slice,E=String.prototype.replace,T=String.prototype.toUpperCase,w=String.prototype.toLowerCase,A=RegExp.prototype.test,S=Array.prototype.concat,R=Array.prototype.join,I=Array.prototype.slice,C=Math.floor,P="function"===typeof BigInt?BigInt.prototype.valueOf:null,M=Object.getOwnPropertySymbols,D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,O="function"===typeof Symbol&&"object"===typeof Symbol.iterator,B="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===O||"symbol")?Symbol.toStringTag:null,F=Object.prototype.propertyIsEnumerable,N=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function L(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||A.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof t){var n=t<0?-C(-t):C(t);if(n!==t){var i=String(n),s=b.call(e,i.length+1);return E.call(i,r,"$&_")+"."+E.call(E.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(e,r,"$&_")}var k=r(2634),U=k.custom,G=J(U)?U:null,j={__proto__:null,double:'"',single:"'"},H={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function X(t,e,r){var n=r.quoteStyle||e,i=j[n];return i+t+i}function z(t){return E.call(String(t),/"/g,"&quot;")}function W(t){return!B||!("object"===typeof t&&(B in t||"undefined"!==typeof t[B]))}function $(t){return"[object Array]"===nt(t)&&W(t)}function V(t){return"[object Date]"===nt(t)&&W(t)}function Y(t){return"[object RegExp]"===nt(t)&&W(t)}function q(t){return"[object Error]"===nt(t)&&W(t)}function K(t){return"[object String]"===nt(t)&&W(t)}function Z(t){return"[object Number]"===nt(t)&&W(t)}function Q(t){return"[object Boolean]"===nt(t)&&W(t)}function J(t){if(O)return t&&"object"===typeof t&&t instanceof Symbol;if("symbol"===typeof t)return!0;if(!t||"object"!==typeof t||!D)return!1;try{return D.call(t),!0}catch(e){}return!1}function tt(t){if(!t||"object"!==typeof t||!P)return!1;try{return P.call(t),!0}catch(e){}return!1}t.exports=function t(e,n,i,a){var h=n||{};if(rt(h,"quoteStyle")&&!rt(j,h.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rt(h,"maxStringLength")&&("number"===typeof h.maxStringLength?h.maxStringLength<0&&h.maxStringLength!==1/0:null!==h.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!rt(h,"customInspect")||h.customInspect;if("boolean"!==typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rt(h,"indent")&&null!==h.indent&&"\t"!==h.indent&&!(parseInt(h.indent,10)===h.indent&&h.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rt(h,"numericSeparator")&&"boolean"!==typeof h.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var d=h.numericSeparator;if("undefined"===typeof e)return"undefined";if(null===e)return"null";if("boolean"===typeof e)return e?"true":"false";if("string"===typeof e)return dt(e,h);if("number"===typeof e){if(0===e)return 1/0/e>0?"0":"-0";var f=String(e);return d?L(e,f):f}if("bigint"===typeof e){var p=String(e)+"n";return d?L(e,p):p}var m="undefined"===typeof h.depth?5:h.depth;if("undefined"===typeof i&&(i=0),i>=m&&m>0&&"object"===typeof e)return $(e)?"[Array]":"[Object]";var g=_t(h,i);if("undefined"===typeof a)a=[];else if(st(a,e)>=0)return"[Circular]";function _(e,r,n){if(r&&(a=I.call(a),a.push(r)),n){var s={depth:h.depth};return rt(h,"quoteStyle")&&(s.quoteStyle=h.quoteStyle),t(e,s,i+1,a)}return t(e,h,i+1,a)}if("function"===typeof e&&!Y(e)){var v=it(e),x=xt(e,_);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(x.length>0?" { "+R.call(x,", ")+" }":"")}if(J(e)){var T=O?E.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):D.call(e);return"object"!==typeof e||O?T:pt(T)}if(ct(e)){for(var A="<"+w.call(String(e.nodeName)),C=e.attributes||[],M=0;M<C.length;M++)A+=" "+C[M].name+"="+X(z(C[M].value),"double",h);return A+=">",e.childNodes&&e.childNodes.length&&(A+="..."),A+="</"+w.call(String(e.nodeName))+">",A}if($(e)){if(0===e.length)return"[]";var U=xt(e,_);return g&&!yt(U)?"["+vt(U,g)+"]":"[ "+R.call(U,", ")+" ]"}if(q(e)){var H=xt(e,_);return"cause"in Error.prototype||!("cause"in e)||F.call(e,"cause")?0===H.length?"["+String(e)+"]":"{ ["+String(e)+"] "+R.call(H,", ")+" }":"{ ["+String(e)+"] "+R.call(S.call("[cause]: "+_(e.cause),H),", ")+" }"}if("object"===typeof e&&c){if(G&&"function"===typeof e[G]&&k)return k(e,{depth:m-i});if("symbol"!==c&&"function"===typeof e.inspect)return e.inspect()}if(ot(e)){var W=[];return o&&o.call(e,function(t,r){W.push(_(r,e,!0)+" => "+_(t,e))}),gt("Map",s.call(e),W,g)}if(lt(e)){var et=[];return u&&u.call(e,function(t){et.push(_(t,e))}),gt("Set",l.call(e),et,g)}if(at(e))return mt("WeakMap");if(ut(e))return mt("WeakSet");if(ht(e))return mt("WeakRef");if(Z(e))return pt(_(Number(e)));if(tt(e))return pt(_(P.call(e)));if(Q(e))return pt(y.call(e));if(K(e))return pt(_(String(e)));if("undefined"!==typeof window&&e===window)return"{ [object Window] }";if("undefined"!==typeof globalThis&&e===globalThis||"undefined"!==typeof r.g&&e===r.g)return"{ [object globalThis] }";if(!V(e)&&!Y(e)){var ft=xt(e,_),bt=N?N(e)===Object.prototype:e instanceof Object||e.constructor===Object,Et=e instanceof Object?"":"null prototype",Tt=!bt&&B&&Object(e)===e&&B in e?b.call(nt(e),8,-1):Et?"Object":"",wt=bt||"function"!==typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"",At=wt+(Tt||Et?"["+R.call(S.call([],Tt||[],Et||[]),": ")+"] ":"");return 0===ft.length?At+"{}":g?At+"{"+vt(ft,g)+"}":At+"{ "+R.call(ft,", ")+" }"}return String(e)};var et=Object.prototype.hasOwnProperty||function(t){return t in this};function rt(t,e){return et.call(t,e)}function nt(t){return _.call(t)}function it(t){if(t.name)return t.name;var e=x.call(v.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function st(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function ot(t){if(!s||!t||"object"!==typeof t)return!1;try{s.call(t);try{l.call(t)}catch(e){return!0}return t instanceof Map}catch(r){}return!1}function at(t){if(!d||!t||"object"!==typeof t)return!1;try{d.call(t,d);try{p.call(t,p)}catch(e){return!0}return t instanceof WeakMap}catch(r){}return!1}function ht(t){if(!g||!t||"object"!==typeof t)return!1;try{return g.call(t),!0}catch(e){}return!1}function lt(t){if(!l||!t||"object"!==typeof t)return!1;try{l.call(t);try{s.call(t)}catch(e){return!0}return t instanceof Set}catch(r){}return!1}function ut(t){if(!p||!t||"object"!==typeof t)return!1;try{p.call(t,p);try{d.call(t,d)}catch(e){return!0}return t instanceof WeakSet}catch(r){}return!1}function ct(t){return!(!t||"object"!==typeof t)&&("undefined"!==typeof HTMLElement&&t instanceof HTMLElement||"string"===typeof t.nodeName&&"function"===typeof t.getAttribute)}function dt(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return dt(b.call(t,0,e.maxStringLength),e)+n}var i=H[e.quoteStyle||"single"];i.lastIndex=0;var s=E.call(E.call(t,i,"\\$1"),/[\x00-\x1f]/g,ft);return X(s,"single",e)}function ft(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+T.call(e.toString(16))}function pt(t){return"Object("+t+")"}function mt(t){return t+" { ? }"}function gt(t,e,r,n){var i=n?vt(r,n):R.call(r,", ");return t+" ("+e+") {"+i+"}"}function yt(t){for(var e=0;e<t.length;e++)if(st(t[e],"\n")>=0)return!1;return!0}function _t(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"===typeof t.indent&&t.indent>0))return null;r=R.call(Array(t.indent+1)," ")}return{base:r,prev:R.call(Array(e+1),r)}}function vt(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+R.call(t,","+r)+"\n"+e.prev}function xt(t,e){var r=$(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=rt(t,i)?e(t[i],t):""}var s,o="function"===typeof M?M(t):[];if(O){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var h in t)rt(t,h)&&(r&&String(Number(h))===h&&h<t.length||O&&s["$"+h]instanceof Symbol||(A.call(/[^\w$]/,h)?n.push(e(h,t)+": "+e(t[h],t)):n.push(h+": "+e(t[h],t))));if("function"===typeof M)for(var l=0;l<o.length;l++)F.call(t,o[l])&&n.push("["+e(o[l])+"]: "+e(t[o[l]],t));return n}},1068:function(t){"use strict";t.exports=Object.getOwnPropertyDescriptor},1072:function(t,e,r){"use strict";var n=r(1828),i=r(8727);t.exports=Object.keys||function(t){return n(t,i)}},1108:function(t,e,r){"use strict";var n=r(6955);t.exports=function(t){var e=n(t);return"BigInt64Array"===e||"BigUint64Array"===e}},1148:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),h=r(1767),l=r(9539),u=r(4549),c=u("every",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{every:function(t){a(this);try{o(t)}catch(n){l(this,"throw",n)}if(c)return i(c,this,t);var e=h(this),r=0;return!s(e,function(e,n){if(!t(e,r++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},1181:function(t,e,r){"use strict";var n,i,s,o=r(8622),a=r(4576),h=r(34),l=r(6699),u=r(9297),c=r(7629),d=r(6119),f=r(421),p="Object already initialized",m=a.TypeError,g=a.WeakMap,y=function(t){return s(t)?i(t):n(t,{})},_=function(t){return function(e){var r;if(!h(e)||(r=i(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return r}};if(o||c.state){var v=c.state||(c.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,n=function(t,e){if(v.has(t))throw new m(p);return e.facade=t,v.set(t,e),e},i=function(t){return v.get(t)||{}},s=function(t){return v.has(t)}}else{var x=d("state");f[x]=!0,n=function(t,e){if(u(t,x))throw new m(p);return e.facade=t,l(t,x,e),e},i=function(t){return u(t,x)?t[x]:{}},s=function(t){return u(t,x)}}t.exports={set:n,get:i,has:s,enforce:y,getterFor:_}},1291:function(t,e,r){"use strict";var n=r(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:n(e)}},1334:function(t){"use strict";t.exports=EvalError},1385:function(t,e,r){"use strict";var n=r(9539);t.exports=function(t,e,r){for(var i=t.length-1;i>=0;i--)if(void 0!==t[i])try{r=n(t[i].iterator,e,r)}catch(s){e="throw",r=s}if("throw"===e)throw r;return r}},1625:function(t,e,r){"use strict";var n=r(9504);t.exports=n({}.isPrototypeOf)},1698:function(t,e,r){"use strict";var n=r(6518),i=r(4204),s=r(9835),o=r(4916),a=!o("union")||!s("union");n({target:"Set",proto:!0,real:!0,forced:a},{union:i})},1701:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(9306),o=r(8551),a=r(1767),h=r(9462),l=r(6319),u=r(9539),c=r(684),d=r(4549),f=r(6395),p=!f&&!c("map",function(){}),m=!f&&!p&&d("map",TypeError),g=f||p||m,y=h(function(){var t=this.iterator,e=o(i(this.next,t)),r=this.done=!!e.done;if(!r)return l(t,this.mapper,[e.value,this.counter++],!0)});n({target:"Iterator",proto:!0,real:!0,forced:g},{map:function(t){o(this);try{s(t)}catch(e){u(this,"throw",e)}return m?i(m,this,t):new y(a(this),{mapper:t})}})},1767:function(t){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},1806:function(t,e,r){"use strict";var n=r(6518),i=r(8551),s=r(2652),o=r(1767),a=[].push;n({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return s(o(i(this)),a,{that:t,IS_RECORD:!0}),t}})},1828:function(t,e,r){"use strict";var n=r(9504),i=r(9297),s=r(5397),o=r(9617).indexOf,a=r(421),h=n([].push);t.exports=function(t,e){var r,n=s(t),l=0,u=[];for(r in n)!i(a,r)&&i(n,r)&&h(u,r);while(e.length>l)i(n,r=e[l++])&&(~o(u,r)||h(u,r));return u}},1866:function(t,e,r){"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,s=r(3682);t.exports=s.call(n,i)},1868:function(t){"use strict";t.exports=URIError},2106:function(t,e,r){"use strict";var n=r(283),i=r(4913);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),i.f(t,e,r)}},2140:function(t,e,r){"use strict";var n=r(8227),i=n("toStringTag"),s={};s[i]="z",t.exports="[object z]"===String(s)},2195:function(t,e,r){"use strict";var n=r(9504),i=n({}.toString),s=n("".slice);t.exports=function(t){return s(i(t),8,-1)}},2211:function(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2360:function(t,e,r){"use strict";var n,i=r(8551),s=r(6801),o=r(8727),a=r(421),h=r(397),l=r(4055),u=r(6119),c=">",d="<",f="prototype",p="script",m=u("IE_PROTO"),g=function(){},y=function(t){return d+p+c+t+d+"/"+p+c},_=function(t){t.write(y("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){var t,e=l("iframe"),r="java"+p+":";return e.style.display="none",h.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(y("document.F=Object")),t.close(),t.F},x=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}x="undefined"!=typeof document?document.domain&&n?_(n):v():_(n);var t=o.length;while(t--)delete x[f][o[t]];return x()};a[m]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(g[f]=i(t),r=new g,g[f]=null,r[m]=t):r=x(),void 0===e?r:s.f(r,e)}},2475:function(t,e,r){"use strict";var n=r(6518),i=r(8527),s=r(4916),o=!s("isSupersetOf",function(t){return!t});n({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:i})},2489:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(9306),o=r(8551),a=r(1767),h=r(9462),l=r(6319),u=r(6395),c=r(9539),d=r(684),f=r(4549),p=!u&&!d("filter",function(){}),m=!u&&!p&&f("filter",TypeError),g=u||p||m,y=h(function(){var t,e,r,n=this.iterator,s=this.predicate,a=this.next;while(1){if(t=o(i(a,n)),e=this.done=!!t.done,e)return;if(r=t.value,l(n,s,[r,this.counter++],!0))return r}});n({target:"Iterator",proto:!0,real:!0,forced:g},{filter:function(t){o(this);try{s(t)}catch(e){c(this,"throw",e)}return m?i(m,this,t):new y(a(this),{predicate:t})}})},2509:function(t){"use strict";t.exports=Object},2529:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},2531:function(t){"use strict";t.exports=Function.prototype.call},2602:function(t){"use strict";var e="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,n=Math.max,i="[object Function]",s=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var i=0;i<e.length;i+=1)r[i+t.length]=e[i];return r},o=function(t,e){for(var r=[],n=e||0,i=0;n<t.length;n+=1,i+=1)r[i]=t[n];return r},a=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};t.exports=function(t){var h=this;if("function"!==typeof h||r.apply(h)!==i)throw new TypeError(e+h);for(var l,u=o(arguments,1),c=function(){if(this instanceof l){var e=h.apply(this,s(u,arguments));return Object(e)===e?e:this}return h.apply(t,s(u,arguments))},d=n(0,h.length-u.length),f=[],p=0;p<d;p++)f[p]="$"+p;if(l=Function("binder","return function ("+a(f,",")+"){ return binder.apply(this,arguments); }")(c),h.prototype){var m=function(){};m.prototype=h.prototype,l.prototype=new m,m.prototype=null}return l}},2603:function(t,e,r){"use strict";var n=r(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},2652:function(t,e,r){"use strict";var n=r(6080),i=r(9565),s=r(8551),o=r(6823),a=r(4209),h=r(6198),l=r(1625),u=r(81),c=r(851),d=r(9539),f=TypeError,p=function(t,e){this.stopped=t,this.result=e},m=p.prototype;t.exports=function(t,e,r){var g,y,_,v,x,b,E,T=r&&r.that,w=!(!r||!r.AS_ENTRIES),A=!(!r||!r.IS_RECORD),S=!(!r||!r.IS_ITERATOR),R=!(!r||!r.INTERRUPTED),I=n(e,T),C=function(t){return g&&d(g,"normal"),new p(!0,t)},P=function(t){return w?(s(t),R?I(t[0],t[1],C):I(t[0],t[1])):R?I(t,C):I(t)};if(A)g=t.iterator;else if(S)g=t;else{if(y=c(t),!y)throw new f(o(t)+" is not iterable");if(a(y)){for(_=0,v=h(t);v>_;_++)if(x=P(t[_]),x&&l(m,x))return x;return new p(!1)}g=u(t,y)}b=A?t.next:g.next;while(!(E=i(b,g)).done){try{x=P(E.value)}catch(M){d(g,"throw",M)}if("object"==typeof x&&x&&l(m,x))return x}return new p(!1)}},2673:function(t){"use strict";t.exports=Math.max},2777:function(t,e,r){"use strict";var n=r(9565),i=r(34),s=r(757),o=r(5966),a=r(4270),h=r(8227),l=TypeError,u=h("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var r,h=o(t,u);if(h){if(void 0===e&&(e="default"),r=n(h,t,e),!i(r)||s(r))return r;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2787:function(t,e,r){"use strict";var n=r(9297),i=r(4901),s=r(8981),o=r(6119),a=r(2211),h=o("IE_PROTO"),l=Object,u=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=s(t);if(n(e,h))return e[h];var r=e.constructor;return i(r)&&e instanceof r?r.prototype:e instanceof l?u:null}},2796:function(t,e,r){"use strict";var n=r(9039),i=r(4901),s=/#|\.prototype\./,o=function(t,e){var r=h[a(t)];return r===u||r!==l&&(i(e)?n(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},h=o.data={},l=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},2839:function(t,e,r){"use strict";var n=r(4576),i=n.navigator,s=i&&i.userAgent;t.exports=s?String(s):""},2958:function(t,e,r){"use strict";r(4114),r(8111),r(7588),r(8237);var n=r(5767),i=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t){while(t.length>1){var e=t.pop(),r=e.obj[e.prop];if(s(r)){for(var n=[],i=0;i<r.length;++i)"undefined"!==typeof r[i]&&n.push(r[i]);e.obj[e.prop]=n}}},h=function(t,e){for(var r=e&&e.plainObjects?{__proto__:null}:{},n=0;n<t.length;++n)"undefined"!==typeof t[n]&&(r[n]=t[n]);return r},l=function t(e,r,n){if(!r)return e;if("object"!==typeof r&&"function"!==typeof r){if(s(e))e.push(r);else{if(!e||"object"!==typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!==typeof e)return[e].concat(r);var o=e;return s(e)&&!s(r)&&(o=h(e,n)),s(e)&&s(r)?(r.forEach(function(r,s){if(i.call(e,s)){var o=e[s];o&&"object"===typeof o&&r&&"object"===typeof r?e[s]=t(o,r,n):e.push(r)}else e[s]=r}),e):Object.keys(r).reduce(function(e,s){var o=r[s];return i.call(e,s)?e[s]=t(e[s],o,n):e[s]=o,e},o)},u=function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},c=function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(i){return n}},d=1024,f=function(t,e,r,i,s){if(0===t.length)return t;var a=t;if("symbol"===typeof t?a=Symbol.prototype.toString.call(t):"string"!==typeof t&&(a=String(t)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"});for(var h="",l=0;l<a.length;l+=d){for(var u=a.length>=d?a.slice(l,l+d):a,c=[],f=0;f<u.length;++f){var p=u.charCodeAt(f);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===n.RFC1738&&(40===p||41===p)?c[c.length]=u.charAt(f):p<128?c[c.length]=o[p]:p<2048?c[c.length]=o[192|p>>6]+o[128|63&p]:p<55296||p>=57344?c[c.length]=o[224|p>>12]+o[128|p>>6&63]+o[128|63&p]:(f+=1,p=65536+((1023&p)<<10|1023&u.charCodeAt(f)),c[c.length]=o[240|p>>18]+o[128|p>>12&63]+o[128|p>>6&63]+o[128|63&p])}h+=c.join("")}return h},p=function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var i=e[n],s=i.obj[i.prop],o=Object.keys(s),h=0;h<o.length;++h){var l=o[h],u=s[l];"object"===typeof u&&null!==u&&-1===r.indexOf(u)&&(e.push({obj:s,prop:l}),r.push(u))}return a(e),t},m=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},g=function(t){return!(!t||"object"!==typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},y=function(t,e){return[].concat(t,e)},_=function(t,e){if(s(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)};t.exports={arrayToObject:h,assign:u,combine:y,compact:p,decode:c,encode:f,isBuffer:g,isRegExp:m,maybeMap:_,merge:l}},2967:function(t,e,r){"use strict";var n=r(6706),i=r(34),s=r(7750),o=r(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{t=n(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch(a){}return function(r,n){return s(r),o(n),i(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},3023:function(t){"use strict";t.exports=Math.abs},3071:function(t,e,r){"use strict";var n=r(5072),i=r(5631),s=i([n("%String.prototype.indexOf%")]);t.exports=function(t,e){var r=n(t,!!e);return"function"===typeof r&&s(t,".prototype.")>-1?i([r]):r}},3167:function(t,e,r){"use strict";var n=r(4901),i=r(34),s=r(2967);t.exports=function(t,e,r){var o,a;return s&&n(o=e.constructor)&&o!==r&&i(a=o.prototype)&&a!==r.prototype&&s(t,a),t}},3345:function(t,e,r){"use strict";r.d(e,{Dl5:function(){return gc},lgM:function(){return ph},t5M:function(){return Xn},mcf:function(){return _a},M_G:function(){return ai},kxk:function(){return ba},EYj:function(){return ec},xJt:function(){return Yu},gPd:function(){return ws},t9Q:function(){return _c}});var n=(t=>(t[t["WEBGL_LEGACY"]=0]="WEBGL_LEGACY",t[t["WEBGL"]=1]="WEBGL",t[t["WEBGL2"]=2]="WEBGL2",t))(n||{}),i=(t=>(t[t["COLOR"]=16384]="COLOR",t[t["DEPTH"]=256]="DEPTH",t[t["STENCIL"]=1024]="STENCIL",t))(i||{}),s=(t=>(t[t["NORMAL"]=0]="NORMAL",t[t["ADD"]=1]="ADD",t[t["MULTIPLY"]=2]="MULTIPLY",t[t["SCREEN"]=3]="SCREEN",t[t["OVERLAY"]=4]="OVERLAY",t[t["DARKEN"]=5]="DARKEN",t[t["LIGHTEN"]=6]="LIGHTEN",t[t["COLOR_DODGE"]=7]="COLOR_DODGE",t[t["COLOR_BURN"]=8]="COLOR_BURN",t[t["HARD_LIGHT"]=9]="HARD_LIGHT",t[t["SOFT_LIGHT"]=10]="SOFT_LIGHT",t[t["DIFFERENCE"]=11]="DIFFERENCE",t[t["EXCLUSION"]=12]="EXCLUSION",t[t["HUE"]=13]="HUE",t[t["SATURATION"]=14]="SATURATION",t[t["COLOR"]=15]="COLOR",t[t["LUMINOSITY"]=16]="LUMINOSITY",t[t["NORMAL_NPM"]=17]="NORMAL_NPM",t[t["ADD_NPM"]=18]="ADD_NPM",t[t["SCREEN_NPM"]=19]="SCREEN_NPM",t[t["NONE"]=20]="NONE",t[t["SRC_OVER"]=0]="SRC_OVER",t[t["SRC_IN"]=21]="SRC_IN",t[t["SRC_OUT"]=22]="SRC_OUT",t[t["SRC_ATOP"]=23]="SRC_ATOP",t[t["DST_OVER"]=24]="DST_OVER",t[t["DST_IN"]=25]="DST_IN",t[t["DST_OUT"]=26]="DST_OUT",t[t["DST_ATOP"]=27]="DST_ATOP",t[t["ERASE"]=26]="ERASE",t[t["SUBTRACT"]=28]="SUBTRACT",t[t["XOR"]=29]="XOR",t))(s||{}),o=(t=>(t[t["POINTS"]=0]="POINTS",t[t["LINES"]=1]="LINES",t[t["LINE_LOOP"]=2]="LINE_LOOP",t[t["LINE_STRIP"]=3]="LINE_STRIP",t[t["TRIANGLES"]=4]="TRIANGLES",t[t["TRIANGLE_STRIP"]=5]="TRIANGLE_STRIP",t[t["TRIANGLE_FAN"]=6]="TRIANGLE_FAN",t))(o||{}),a=(t=>(t[t["RGBA"]=6408]="RGBA",t[t["RGB"]=6407]="RGB",t[t["RG"]=33319]="RG",t[t["RED"]=6403]="RED",t[t["RGBA_INTEGER"]=36249]="RGBA_INTEGER",t[t["RGB_INTEGER"]=36248]="RGB_INTEGER",t[t["RG_INTEGER"]=33320]="RG_INTEGER",t[t["RED_INTEGER"]=36244]="RED_INTEGER",t[t["ALPHA"]=6406]="ALPHA",t[t["LUMINANCE"]=6409]="LUMINANCE",t[t["LUMINANCE_ALPHA"]=6410]="LUMINANCE_ALPHA",t[t["DEPTH_COMPONENT"]=6402]="DEPTH_COMPONENT",t[t["DEPTH_STENCIL"]=34041]="DEPTH_STENCIL",t))(a||{}),h=(t=>(t[t["TEXTURE_2D"]=3553]="TEXTURE_2D",t[t["TEXTURE_CUBE_MAP"]=34067]="TEXTURE_CUBE_MAP",t[t["TEXTURE_2D_ARRAY"]=35866]="TEXTURE_2D_ARRAY",t[t["TEXTURE_CUBE_MAP_POSITIVE_X"]=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t["TEXTURE_CUBE_MAP_NEGATIVE_X"]=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t["TEXTURE_CUBE_MAP_POSITIVE_Y"]=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Y"]=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t["TEXTURE_CUBE_MAP_POSITIVE_Z"]=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t["TEXTURE_CUBE_MAP_NEGATIVE_Z"]=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(h||{}),l=(t=>(t[t["UNSIGNED_BYTE"]=5121]="UNSIGNED_BYTE",t[t["UNSIGNED_SHORT"]=5123]="UNSIGNED_SHORT",t[t["UNSIGNED_SHORT_5_6_5"]=33635]="UNSIGNED_SHORT_5_6_5",t[t["UNSIGNED_SHORT_4_4_4_4"]=32819]="UNSIGNED_SHORT_4_4_4_4",t[t["UNSIGNED_SHORT_5_5_5_1"]=32820]="UNSIGNED_SHORT_5_5_5_1",t[t["UNSIGNED_INT"]=5125]="UNSIGNED_INT",t[t["UNSIGNED_INT_10F_11F_11F_REV"]=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t["UNSIGNED_INT_2_10_10_10_REV"]=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t["UNSIGNED_INT_24_8"]=34042]="UNSIGNED_INT_24_8",t[t["UNSIGNED_INT_5_9_9_9_REV"]=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t["BYTE"]=5120]="BYTE",t[t["SHORT"]=5122]="SHORT",t[t["INT"]=5124]="INT",t[t["FLOAT"]=5126]="FLOAT",t[t["FLOAT_32_UNSIGNED_INT_24_8_REV"]=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t["HALF_FLOAT"]=36193]="HALF_FLOAT",t))(l||{}),u=(t=>(t[t["FLOAT"]=0]="FLOAT",t[t["INT"]=1]="INT",t[t["UINT"]=2]="UINT",t))(u||{}),c=(t=>(t[t["NEAREST"]=0]="NEAREST",t[t["LINEAR"]=1]="LINEAR",t))(c||{}),d=(t=>(t[t["CLAMP"]=33071]="CLAMP",t[t["REPEAT"]=10497]="REPEAT",t[t["MIRRORED_REPEAT"]=33648]="MIRRORED_REPEAT",t))(d||{}),f=(t=>(t[t["OFF"]=0]="OFF",t[t["POW2"]=1]="POW2",t[t["ON"]=2]="ON",t[t["ON_MANUAL"]=3]="ON_MANUAL",t))(f||{}),p=(t=>(t[t["NPM"]=0]="NPM",t[t["UNPACK"]=1]="UNPACK",t[t["PMA"]=2]="PMA",t[t["NO_PREMULTIPLIED_ALPHA"]=0]="NO_PREMULTIPLIED_ALPHA",t[t["PREMULTIPLY_ON_UPLOAD"]=1]="PREMULTIPLY_ON_UPLOAD",t[t["PREMULTIPLIED_ALPHA"]=2]="PREMULTIPLIED_ALPHA",t))(p||{}),m=(t=>(t[t["NO"]=0]="NO",t[t["YES"]=1]="YES",t[t["AUTO"]=2]="AUTO",t[t["BLEND"]=0]="BLEND",t[t["CLEAR"]=1]="CLEAR",t[t["BLIT"]=2]="BLIT",t))(m||{}),g=(t=>(t[t["AUTO"]=0]="AUTO",t[t["MANUAL"]=1]="MANUAL",t))(g||{}),y=(t=>(t["LOW"]="lowp",t["MEDIUM"]="mediump",t["HIGH"]="highp",t))(y||{}),_=(t=>(t[t["NONE"]=0]="NONE",t[t["SCISSOR"]=1]="SCISSOR",t[t["STENCIL"]=2]="STENCIL",t[t["SPRITE"]=3]="SPRITE",t[t["COLOR"]=4]="COLOR",t))(_||{}),v=(t=>(t[t["NONE"]=0]="NONE",t[t["LOW"]=2]="LOW",t[t["MEDIUM"]=4]="MEDIUM",t[t["HIGH"]=8]="HIGH",t))(v||{}),x=(t=>(t[t["ELEMENT_ARRAY_BUFFER"]=34963]="ELEMENT_ARRAY_BUFFER",t[t["ARRAY_BUFFER"]=34962]="ARRAY_BUFFER",t[t["UNIFORM_BUFFER"]=35345]="UNIFORM_BUFFER",t))(x||{});const b={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>{const e=new DOMParser;return e.parseFromString(t,"text/xml")}},E={ADAPTER:b,RESOLUTION:1,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var T=/iPhone/i,w=/iPod/i,A=/iPad/i,S=/\biOS-universal(?:.+)Mac\b/i,R=/\bAndroid(?:.+)Mobile\b/i,I=/Android/i,C=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,P=/Silk/i,M=/Windows Phone/i,D=/\bWindows(?:.+)ARM\b/i,O=/BlackBerry/i,B=/BB10/i,F=/Opera Mini/i,N=/\b(CriOS|Chrome)(?:.+)Mobile/i,L=/Mobile(?:.+)Firefox\b/i,k=function(t){return"undefined"!==typeof t&&"MacIntel"===t.platform&&"number"===typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"===typeof MSStream};function U(t){return function(e){return e.test(t)}}function G(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"===typeof navigator?"string"===typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,n=r.split("[FBAN");"undefined"!==typeof n[1]&&(r=n[0]),n=r.split("Twitter"),"undefined"!==typeof n[1]&&(r=n[0]);var i=U(r),s={apple:{phone:i(T)&&!i(M),ipod:i(w),tablet:!i(T)&&(i(A)||k(e))&&!i(M),universal:i(S),device:(i(T)||i(w)||i(A)||i(S)||k(e))&&!i(M)},amazon:{phone:i(C),tablet:!i(C)&&i(P),device:i(C)||i(P)},android:{phone:!i(M)&&i(C)||!i(M)&&i(R),tablet:!i(M)&&!i(C)&&!i(R)&&(i(P)||i(I)),device:!i(M)&&(i(C)||i(P)||i(R)||i(I))||i(/\bokhttp\b/i)},windows:{phone:i(M),tablet:i(D),device:i(M)||i(D)},other:{blackberry:i(O),blackberry10:i(B),opera:i(F),firefox:i(L),chrome:i(N),device:i(O)||i(B)||i(F)||i(L)||i(N)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const j=G(globalThis.navigator);E.RETINA_PREFIX=/@([0-9\.]+)x/,E.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var H=r(3529),X=r(6583),z=r(5106);const W={parse:z.qg,format:z.GP,resolve:z.hd};function $(t){if("string"!==typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function V(t){const e=t.split("?")[0];return e.split("#")[0]}function Y(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(t,e,r){return t.replace(new RegExp(Y(e),"g"),r)}function K(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(i===a-1||1===s);else if(i!==a-1&&2===s){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){const t=r.lastIndexOf("/");if(t!==r.length-1){-1===t?(r="",n=0):(r=r.slice(0,t),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(2===r.length||1===r.length){r="",n=0,i=a,s=0;continue}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${t.slice(i+1,a)}`:r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else 46===o&&-1!==s?++s:s=-1}return r}const Z={toPosix(t){return q(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){$(t),t=this.toPosix(t);let e="";const r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(r||n||i){const s=r?.[0]||n?.[0]||i?.[0];e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,r){if(this.isDataUrl(t))return t;const n=V(this.toPosix(e??E.ADAPTER.getBaseUrl())),i=V(this.toPosix(r??this.rootname(n)));if($(t),t=this.toPosix(t),t.startsWith("/"))return Z.join(i,t.slice(1));const s=this.isAbsolute(t)?t:this.join(n,t);return s},normalize(t){if(t=this.toPosix(t),$(t),0===t.length)return".";let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=K(t,!1),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return $(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if($(n),n.length>0)if(void 0===e)e=n;else{const i=t[r-1]??"";this.extname(i)?e+=`/../${n}`:e+=`/${n}`}}return void 0===e?".":this.normalize(e)},dirname(t){if($(t),0===t.length)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=47===e;let n=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!i){n=a;break}}else i=!1;return-1===n?r?"/":this.isUrl(o)?s+t:s:r&&1===n?"//":s+t.slice(0,n)},rootname(t){$(t),t=this.toPosix(t);let e="";if(e=t.startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);e=-1!==r?t.slice(0,r):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){$(t),e&&$(e),t=V(this.toPosix(t));let r,n=0,i=-1,s=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(r=t.length-1;r>=0;--r){const h=t.charCodeAt(r);if(47===h){if(!s){n=r+1;break}}else-1===a&&(s=!1,a=r+1),o>=0&&(h===e.charCodeAt(o)?-1===--o&&(i=r):(o=-1,i=a))}return n===i?i=a:-1===i&&(i=t.length),t.slice(n,i)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!s){n=r+1;break}}else-1===i&&(s=!1,i=r+1);return-1===i?"":t.slice(n,i)},extname(t){$(t),t=V(this.toPosix(t));let e=-1,r=0,n=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(47!==a)-1===n&&(i=!1,n=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!i){r=o+1;break}}return-1===e||-1===n||0===s||1===s&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){$(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;t=V(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let i;const s="";e.root=this.rootname(t),i=n||this.hasProtocol(t)?1:0;let o=-1,a=0,h=-1,l=!0,u=t.length-1,c=0;for(;u>=i;--u)if(r=t.charCodeAt(u),47!==r)-1===h&&(l=!1,h=u+1),46===r?-1===o?o=u:1!==c&&(c=1):-1!==o&&(c=-1);else if(!l){a=u+1;break}return-1===o||-1===h||0===c||1===c&&o===h-1&&o===a+1?-1!==h&&(e.base=e.name=0===a&&n?t.slice(1,h):t.slice(a,h)):(0===a&&n?(e.name=t.slice(1,o),e.base=t.slice(1,h)):(e.name=t.slice(a,o),e.base=t.slice(a,h)),e.ext=t.slice(o,h)),e.dir=this.dirname(t),s&&(e.dir=s+e.dir),e},sep:"/",delimiter:":"},Q={};function J(t,e,r=3){if(Q[e])return;let n=(new Error).stack;"undefined"===typeof n?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(n))),Q[e]=!0}let tt;function et(){return"undefined"===typeof tt&&(tt=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:E.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!E.ADAPTER.getWebGLRenderingContext())return!1;const e=E.ADAPTER.createCanvas();let r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);const n=!!r?.getContextAttributes()?.stencil;if(r){const t=r.getExtension("WEBGL_lose_context");t&&t.loseContext()}return r=null,n}catch(e){return!1}}()),tt}var rt="#f0f8ff",nt="#faebd7",it="#00ffff",st="#7fffd4",ot="#f0ffff",at="#f5f5dc",ht="#ffe4c4",lt="#000000",ut="#ffebcd",ct="#0000ff",dt="#8a2be2",ft="#a52a2a",pt="#deb887",mt="#5f9ea0",gt="#7fff00",yt="#d2691e",_t="#ff7f50",vt="#6495ed",xt="#fff8dc",bt="#dc143c",Et="#00ffff",Tt="#00008b",wt="#008b8b",At="#b8860b",St="#a9a9a9",Rt="#006400",It="#a9a9a9",Ct="#bdb76b",Pt="#8b008b",Mt="#556b2f",Dt="#ff8c00",Ot="#9932cc",Bt="#8b0000",Ft="#e9967a",Nt="#8fbc8f",Lt="#483d8b",kt="#2f4f4f",Ut="#2f4f4f",Gt="#00ced1",jt="#9400d3",Ht="#ff1493",Xt="#00bfff",zt="#696969",Wt="#696969",$t="#1e90ff",Vt="#b22222",Yt="#fffaf0",qt="#228b22",Kt="#ff00ff",Zt="#dcdcdc",Qt="#f8f8ff",Jt="#daa520",te="#ffd700",ee="#808080",re="#008000",ne="#adff2f",ie="#808080",se="#f0fff0",oe="#ff69b4",ae="#cd5c5c",he="#4b0082",le="#fffff0",ue="#f0e68c",ce="#fff0f5",de="#e6e6fa",fe="#7cfc00",pe="#fffacd",me="#add8e6",ge="#f08080",ye="#e0ffff",_e="#fafad2",ve="#d3d3d3",xe="#90ee90",be="#d3d3d3",Ee="#ffb6c1",Te="#ffa07a",we="#20b2aa",Ae="#87cefa",Se="#778899",Re="#778899",Ie="#b0c4de",Ce="#ffffe0",Pe="#00ff00",Me="#32cd32",De="#faf0e6",Oe="#ff00ff",Be="#800000",Fe="#66cdaa",Ne="#0000cd",Le="#ba55d3",ke="#9370db",Ue="#3cb371",Ge="#7b68ee",je="#00fa9a",He="#48d1cc",Xe="#c71585",ze="#191970",We="#f5fffa",$e="#ffe4e1",Ve="#ffe4b5",Ye="#ffdead",qe="#000080",Ke="#fdf5e6",Ze="#808000",Qe="#6b8e23",Je="#ffa500",tr="#ff4500",er="#da70d6",rr="#eee8aa",nr="#98fb98",ir="#afeeee",sr="#db7093",or="#ffefd5",ar="#ffdab9",hr="#cd853f",lr="#ffc0cb",ur="#dda0dd",cr="#b0e0e6",dr="#800080",fr="#663399",pr="#ff0000",mr="#bc8f8f",gr="#4169e1",yr="#8b4513",_r="#fa8072",vr="#f4a460",xr="#2e8b57",br="#fff5ee",Er="#a0522d",Tr="#c0c0c0",wr="#87ceeb",Ar="#6a5acd",Sr="#708090",Rr="#708090",Ir="#fffafa",Cr="#00ff7f",Pr="#4682b4",Mr="#d2b48c",Dr="#008080",Or="#d8bfd8",Br="#ff6347",Fr="#40e0d0",Nr="#ee82ee",Lr="#f5deb3",kr="#ffffff",Ur="#f5f5f5",Gr="#ffff00",jr="#9acd32",Hr={aliceblue:rt,antiquewhite:nt,aqua:it,aquamarine:st,azure:ot,beige:at,bisque:ht,black:lt,blanchedalmond:ut,blue:ct,blueviolet:dt,brown:ft,burlywood:pt,cadetblue:mt,chartreuse:gt,chocolate:yt,coral:_t,cornflowerblue:vt,cornsilk:xt,crimson:bt,cyan:Et,darkblue:Tt,darkcyan:wt,darkgoldenrod:At,darkgray:St,darkgreen:Rt,darkgrey:It,darkkhaki:Ct,darkmagenta:Pt,darkolivegreen:Mt,darkorange:Dt,darkorchid:Ot,darkred:Bt,darksalmon:Ft,darkseagreen:Nt,darkslateblue:Lt,darkslategray:kt,darkslategrey:Ut,darkturquoise:Gt,darkviolet:jt,deeppink:Ht,deepskyblue:Xt,dimgray:zt,dimgrey:Wt,dodgerblue:$t,firebrick:Vt,floralwhite:Yt,forestgreen:qt,fuchsia:Kt,gainsboro:Zt,ghostwhite:Qt,goldenrod:Jt,gold:te,gray:ee,green:re,greenyellow:ne,grey:ie,honeydew:se,hotpink:oe,indianred:ae,indigo:he,ivory:le,khaki:ue,lavenderblush:ce,lavender:de,lawngreen:fe,lemonchiffon:pe,lightblue:me,lightcoral:ge,lightcyan:ye,lightgoldenrodyellow:_e,lightgray:ve,lightgreen:xe,lightgrey:be,lightpink:Ee,lightsalmon:Te,lightseagreen:we,lightskyblue:Ae,lightslategray:Se,lightslategrey:Re,lightsteelblue:Ie,lightyellow:Ce,lime:Pe,limegreen:Me,linen:De,magenta:Oe,maroon:Be,mediumaquamarine:Fe,mediumblue:Ne,mediumorchid:Le,mediumpurple:ke,mediumseagreen:Ue,mediumslateblue:Ge,mediumspringgreen:je,mediumturquoise:He,mediumvioletred:Xe,midnightblue:ze,mintcream:We,mistyrose:$e,moccasin:Ve,navajowhite:Ye,navy:qe,oldlace:Ke,olive:Ze,olivedrab:Qe,orange:Je,orangered:tr,orchid:er,palegoldenrod:rr,palegreen:nr,paleturquoise:ir,palevioletred:sr,papayawhip:or,peachpuff:ar,peru:hr,pink:lr,plum:ur,powderblue:cr,purple:dr,rebeccapurple:fr,red:pr,rosybrown:mr,royalblue:gr,saddlebrown:yr,salmon:_r,sandybrown:vr,seagreen:xr,seashell:br,sienna:Er,silver:Tr,skyblue:wr,slateblue:Ar,slategray:Sr,slategrey:Rr,snow:Ir,springgreen:Cr,steelblue:Pr,tan:Mr,teal:Dr,thistle:Or,tomato:Br,turquoise:Fr,violet:Nr,wheat:Lr,white:kr,whitesmoke:Ur,yellow:Gr,yellowgreen:jr};function Xr(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function zr(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function Wr(t){if("string"===typeof t&&(t=Hr[t.toLowerCase()]||t,"#"===t[0]&&(t=t.slice(1)),3===t.length)){const[e,r,n]=t;t=e+e+r+r+n+n}return parseInt(t,16)}r(4114),r(9577);function $r(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[s.NORMAL_NPM]=s.NORMAL,t[s.ADD_NPM]=s.ADD,t[s.SCREEN_NPM]=s.SCREEN,e[s.NORMAL]=s.NORMAL_NPM,e[s.ADD]=s.ADD_NPM,e[s.SCREEN]=s.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const Vr=$r();function Yr(t,e){return Vr[e?1:0][t]}function qr(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function Kr(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;let r=t>>16&255,n=t>>8&255,i=255&t;return r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0,(255*e<<24)+(r<<16)+(n<<8)+i}function Zr(t,e,r,n){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function Qr(t,e=null){const r=6*t;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function Jr(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}Float32Array,Uint32Array,Int32Array,Uint8Array;function tn(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function en(t){return!(t&t-1)&&!!t}function rn(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function nn(t,e,r){const n=t.length;let i;if(e>=n||0===r)return;r=e+r>n?n-e:r;const s=n-r;for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}function sn(t){return 0===t?0:t<0?-1:1}let on=0;function an(){return++on}const hn=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let ln=hn;ln.EMPTY=new hn(0,0,0,0);const un={},cn=Object.create(null),dn=Object.create(null);class fn{constructor(t,e,r){this._canvas=E.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||E.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function pn(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(0!==t[i+3])return!1;return!0}function mn(t,e,r,n,i){const s=4*e;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(0!==t[a+3])return!1;return!0}function gn(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(null===n)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,r),s=i.data;let o=0,a=0,h=e-1,l=r-1;while(a<r&&pn(s,e,a))++a;if(a===r)return ln.EMPTY;while(pn(s,e,l))--l;while(mn(s,e,o,a,l))++o;while(mn(s,e,h,a,l))--h;return++h,++l,new ln(o,a,h,l)}function yn(t){const e=gn(t),{width:r,height:n}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(null===s)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:i}}let _n;function vn(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,_n||(_n=document.createElement("a")),_n.href=t;const r=W.parse(_n.href),n=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&n&&r.protocol===e.protocol?"":"anonymous"}function xn(t,e=1){const r=E.RETINA_PREFIX?.exec(t);return r?parseFloat(r[1]):e}r(8111),r(7588),r(1701);var bn=(t=>(t["Renderer"]="renderer",t["Application"]="application",t["RendererSystem"]="renderer-webgl-system",t["RendererPlugin"]="renderer-webgl-plugin",t["CanvasRendererSystem"]="renderer-canvas-system",t["CanvasRendererPlugin"]="renderer-canvas-plugin",t["Asset"]="asset",t["LoadParser"]="load-parser",t["ResolveParser"]="resolve-parser",t["CacheParser"]="cache-parser",t["DetectionParser"]="detection-parser",t))(bn||{});const En=t=>{if("function"===typeof t||"object"===typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");const e="object"!==typeof t.extension?{type:t.extension}:t.extension;t={...e,ref:t}}if("object"!==typeof t)throw new Error("Invalid extension type");return t={...t},"string"===typeof t.type&&(t.type=[t.type]),t},Tn=(t,e)=>En(t).priority??e,wn={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(En).forEach(t=>{t.type.forEach(e=>this._removeHandlers[e]?.(t))}),this},add(...t){return t.map(En).forEach(t=>{t.type.forEach(e=>{const r=this._addHandlers,n=this._queue;r[e]?r[e](t):(n[e]=n[e]||[],n[e].push(t))})}),this},handle(t,e,r){const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&(s[t].forEach(t=>e(t)),delete s[t]),this},handleByMap(t,e){return this.handle(t,t=>{e[t.name]=t.ref},t=>{delete e[t.name]})},handleByList(t,e,r=-1){return this.handle(t,t=>{e.includes(t.ref)||(e.push(t.ref),e.sort((t,e)=>Tn(e,r)-Tn(t,r)))},t=>{const r=e.indexOf(t.ref);-1!==r&&e.splice(r,1)})}};class An{constructor(t){"number"===typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Sn=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Rn(t){let e="";for(let r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function In(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);while(1){const n=Sn.replace(/%forloop%/gi,Rn(t));if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}const Cn=0,Pn=1,Mn=2,Dn=3,On=4,Bn=5;class Fn{constructor(){this.data=0,this.blendMode=s.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Cn)}set blend(t){!!(this.data&1<<Cn)!==t&&(this.data^=1<<Cn)}get offsets(){return!!(this.data&1<<Pn)}set offsets(t){!!(this.data&1<<Pn)!==t&&(this.data^=1<<Pn)}get culling(){return!!(this.data&1<<Mn)}set culling(t){!!(this.data&1<<Mn)!==t&&(this.data^=1<<Mn)}get depthTest(){return!!(this.data&1<<Dn)}set depthTest(t){!!(this.data&1<<Dn)!==t&&(this.data^=1<<Dn)}get depthMask(){return!!(this.data&1<<Bn)}set depthMask(t){!!(this.data&1<<Bn)!==t&&(this.data^=1<<Bn)}get clockwiseFrontFace(){return!!(this.data&1<<On)}set clockwiseFrontFace(t){!!(this.data&1<<On)!==t&&(this.data^=1<<On)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==s.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Fn;return t.depthTest=!1,t.blend=!0,t}}const Nn=[];function Ln(t,e){if(!t)return null;let r="";if("string"===typeof t){const e=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);e&&(r=e[1].toLowerCase())}for(let n=Nn.length-1;n>=0;--n){const i=Nn[n];if(i.test&&i.test(t,r))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class kn{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,r,n,i,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:l}=this;this._aliasCount++;for(let u=0,c=l.length;u<c;u++)l[u][h](t,e,r,n,i,s,o,a);return l===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(kn.prototype,{dispatch:{value:kn.prototype.emit},run:{value:kn.prototype.emit}});class Un{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new kn("setRealSize"),this.onUpdate=new kn("update"),this.onError=new kn("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Gn extends Un{constructor(t,e){const{width:r,height:n}=e||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=t}upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===p.UNPACK);const i=e.realWidth,s=e.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(e.target,0,0,0,i,s,e.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(e.target,0,r.internalFormat,i,s,0,e.format,r.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const jn={scaleMode:c.NEAREST,format:a.RGBA,alphaMode:p.NPM},Hn=class extends H{constructor(t=null,e=null){super(),e=Object.assign({},Hn.defaultOptions,e);const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:h,format:l,type:u,target:c,resolution:d,resourceOptions:f}=e;!t||t instanceof Un||(t=Ln(t,f),t.internal=!0),this.resolution=d||E.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=i,this._wrapMode=h,this._scaleMode=s,this.format=l,this.type=u,this.target=c,this.alphaMode=r,this.uid=an(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=en(this.realWidth)&&en(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete dn[this.cacheId],delete cn[this.cacheId],this.cacheId=null),this.dispose(),Hn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=E.STRICT_TEXTURE_CACHE){const n="string"===typeof t;let i=null;if(n)i=t;else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${an()}`}i=t._pixiId}let s=dn[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new Hn(t,e),s.cacheId=i,Hn.addToCache(s,i)),s}static fromBuffer(t,e,r,n){t=t||new Float32Array(e*r*4);const i=new Gn(t,{width:e,height:r}),s=t instanceof Float32Array?l.FLOAT:l.UNSIGNED_BYTE;return new Hn(i,Object.assign({},jn,n||{width:e,height:r,type:s}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),dn[e]&&dn[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),dn[e]=t)}static removeFromCache(t){if("string"===typeof t){const e=dn[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete dn[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete dn[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let Xn=Hn;Xn.defaultOptions={mipmap:f.POW2,anisotropicLevel:0,scaleMode:c.LINEAR,wrapMode:d.CLAMP,alphaMode:p.UNPACK,target:h.TEXTURE_2D,format:a.RGBA,type:l.UNSIGNED_BYTE},Xn._globalBatch=0;class zn{constructor(){this.texArray=null,this.blend=0,this.type=o.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Wn=0;class $n{constructor(t,e=!0,r=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=Wn++,this.disposeRunner=new kn("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?x.ELEMENT_ARRAY_BUFFER:x.ARRAY_BUFFER}get index(){return this.type===x.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new $n(t)}}class Vn{constructor(t,e=0,r=!1,n=l.FLOAT,i,s,o,a=1){this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=i,this.start=s,this.instance=o,this.divisor=a}destroy(){this.buffer=null}static from(t,e,r,n,i){return new Vn(t,e,r,n,i)}}const Yn={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function qn(t,e){let r=0,n=0;const i={};for(let h=0;h<t.length;h++)n+=e[h],r+=t[h].length;const s=new ArrayBuffer(4*r);let o=null,a=0;for(let h=0;h<t.length;h++){const r=e[h],l=t[h],u=Jr(l);i[u]||(i[u]=new Yn[u](s)),o=i[u];for(let t=0;t<l.length;t++){const e=(t/r|0)*n+a,i=t%r;o[e+i]=l[t]}a+=r}return new Float32Array(s)}const Kn={5126:4,5123:2,5121:1};let Zn=0;const Qn={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class Jn{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Zn++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new kn("disposeGeometry"),this.refCount=0}addAttribute(t,e,r=0,n=!1,i,s,o,a=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof $n||(e instanceof Array&&(e=new Float32Array(e)),e=new $n(e));const h=t.split("|");if(h.length>1){for(let t=0;t<h.length;t++)this.addAttribute(h[t],e,r,n,i);return this}let l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new Vn(l,r,n,i,s,o,a),this.instanced=this.instanced||a,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof $n||(t instanceof Array&&(t=new Uint16Array(t)),t=new $n(t)),t.type=x.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const t=[],e=[],r=new $n;let n;for(n in this.attributes){const r=this.attributes[n],i=this.buffers[r.buffer];t.push(i.data),e.push(r.size*Kn[r.type]/4),r.buffer=0}for(r.data=qn(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t],r=this.buffers[e.buffer];return r.data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Jn;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new $n(this.buffers[e].data.slice(0));for(const e in this.attributes){const r=this.attributes[e];t.attributes[e]=new Vn(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=x.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new Jn,r=[],n=[],i=[];let s;for(let o=0;o<t.length;o++){s=t[o];for(let t=0;t<s.buffers.length;t++)n[t]=n[t]||0,n[t]+=s.buffers[t].data.length,i[t]=0}for(let o=0;o<s.buffers.length;o++)r[o]=new(Qn[Jr(s.buffers[o].data)])(n[o]),e.buffers[o]=new $n(r[o]);for(let o=0;o<t.length;o++){s=t[o];for(let t=0;t<s.buffers.length;t++)r[t].set(s.buffers[t].data,i[t]),i[t]+=s.buffers[t].data.length}if(e.attributes=s.attributes,s.indexBuffer){e.indexBuffer=e.buffers[s.buffers.indexOf(s.indexBuffer)],e.indexBuffer.type=x.ELEMENT_ARRAY_BUFFER;let r=0,n=0,i=0,o=0;for(let t=0;t<s.buffers.length;t++)if(s.buffers[t]!==s.indexBuffer){o=t;break}for(const t in s.attributes){const e=s.attributes[t];(0|e.buffer)===o&&(n+=e.size*Kn[e.type]/4)}for(let s=0;s<t.length;s++){const a=t[s].indexBuffer.data;for(let t=0;t<a.length;t++)e.indexBuffer.data[t+i]+=r;r+=t[s].buffers[o].data.length/n,i+=a.length}}return e}}class ti extends Jn{constructor(t=!1){super(),this._buffer=new $n(null,t,!1),this._indexBuffer=new $n(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,l.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,l.FLOAT).addAttribute("aColor",this._buffer,4,!0,l.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,l.FLOAT).addIndex(this._indexBuffer)}}const ei=2*Math.PI,ri=180/Math.PI,ni=Math.PI/180;var ii=(t=>(t[t["POLY"]=0]="POLY",t[t["RECT"]=1]="RECT",t[t["CIRC"]=2]="CIRC",t[t["ELIP"]=3]="ELIP",t[t["RREC"]=4]="RREC",t))(ii||{});class si{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new si(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const oi=[new si,new si,new si,new si];class ai{constructor(t=0,e=0,r=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=ii.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ai(0,0,0,0)}clone(){return new ai(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x,r=this.right>t.right?t.right:this.right;if(r<=e)return!1;const n=this.y<t.y?t.y:this.y,i=this.bottom>t.bottom?t.bottom:this.bottom;return i>n}const r=this.left,n=this.right,i=this.top,s=this.bottom;if(n<=r||s<=i)return!1;const o=oi[0].set(t.left,t.top),a=oi[1].set(t.left,t.bottom),h=oi[2].set(t.right,t.top),l=oi[3].set(t.right,t.bottom);if(h.x<=o.x||a.y<=o.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(0===u)return!1;if(e.apply(o,o),e.apply(a,a),e.apply(h,h),e.apply(l,l),Math.max(o.x,a.x,h.x,l.x)<=r||Math.min(o.x,a.x,h.x,l.x)>=n||Math.max(o.y,a.y,h.y,l.y)<=i||Math.min(o.y,a.y,h.y,l.y)>=s)return!1;const c=u*(a.y-o.y),d=u*(o.x-a.x),f=c*r+d*i,p=c*n+d*i,m=c*r+d*s,g=c*n+d*s;if(Math.max(f,p,m,g)<=c*o.x+d*o.y||Math.min(f,p,m,g)>=c*l.x+d*l.y)return!1;const y=u*(o.y-h.y),_=u*(h.x-o.x),v=y*r+_*i,x=y*n+_*i,b=y*r+_*s,E=y*n+_*s;return!(Math.max(v,x,b,E)<=y*o.x+_*o.y||Math.min(v,x,b,E)>=y*l.x+_*l.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=i-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class hi{constructor(t=0,e=0,r=0){this.x=t,this.y=e,this.radius=r,this.type=ii.CIRC}clone(){return new hi(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r}getBounds(){return new ai(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class li{constructor(t=0,e=0,r=0,n=0){this.x=t,this.y=e,this.width=r,this.height=n,this.type=ii.ELIP}clone(){return new li(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1}getBounds(){return new ai(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}r(8237);class ui{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if("number"!==typeof e[0]){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r].x,e[r].y);e=t}this.points=e,this.type=ii.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new ui(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let r=!1;const n=this.points.length/2;for(let i=0,s=n-1;i<n;s=i++){const n=this.points[2*i],o=this.points[2*i+1],a=this.points[2*s],h=this.points[2*s+1],l=o>e!==h>e&&t<(e-o)/(h-o)*(a-n)+n;l&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}}class ci{constructor(t=0,e=0,r=0,n=0,i=20){this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i,this.type=ii.RREC}clone(){return new ci(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),i=e-(this.y+r);const s=r*r;if(n*n+i*i<=s)return!0;if(n=t-(this.x+this.width-r),n*n+i*i<=s)return!0;if(i=e-(this.y+this.height-r),n*n+i*i<=s)return!0;if(n=t-(this.x+r),n*n+i*i<=s)return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class di{constructor(t=1,e=0,r=0,n=1,i=0,s=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=s}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,n,i,s){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=s,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new si;const r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e}applyInverse(t,e){e=e||new si;const r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,s=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this}append(t){const e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this}setTransform(t,e,r,n,i,s,o,a,h){return this.a=Math.cos(o+h)*i,this.b=Math.sin(o+h)*i,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,r=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,n=this.c,i=this.d,s=t.pivot,o=-Math.atan2(-n,i),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(ei-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx+(s.x*e+s.y*n),t.position.y=this.ty+(s.x*r+s.y*i),t}invert(){const t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,s=t*n-e*r;return this.a=n/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-n*i)/s,this.ty=-(t*this.ty-e*i)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new di;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new di}static get TEMP_MATRIX(){return new di}}const fi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],pi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],mi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],gi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],yi=[],_i=[],vi=Math.sign;function xi(){for(let t=0;t<16;t++){const e=[];yi.push(e);for(let r=0;r<16;r++){const n=vi(fi[t]*fi[r]+mi[t]*pi[r]),i=vi(pi[t]*fi[r]+gi[t]*pi[r]),s=vi(fi[t]*mi[r]+mi[t]*gi[r]),o=vi(pi[t]*mi[r]+gi[t]*gi[r]);for(let t=0;t<16;t++)if(fi[t]===n&&pi[t]===i&&mi[t]===s&&gi[t]===o){e.push(t);break}}}for(let t=0;t<16;t++){const e=new di;e.set(fi[t],pi[t],mi[t],gi[t],0,0),_i.push(e)}}xi();const bi={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>fi[t],uY:t=>pi[t],vX:t=>mi[t],vY:t=>gi[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>yi[t][e],sub:(t,e)=>yi[t][bi.inv(e)],rotate180:t=>4^t,isVertical:t=>2===(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?bi.S:bi.N:2*Math.abs(e)<=Math.abs(t)?t>0?bi.E:bi.W:e>0?t>0?bi.SE:bi.SW:t>0?bi.NE:bi.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=_i[bi.inv(e)];i.tx=r,i.ty=n,t.append(i)}};class Ei{constructor(t,e,r=0,n=0){this._x=r,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Ei(t,e,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const Ti=class{constructor(){this.worldTransform=new di,this.localTransform=new di,this.position=new Ei(this.onChange,this,0,0),this.scale=new Ei(this.onChange,this,1,1),this.pivot=new Ei(this.onChange,this,0,0),this.skew=new Ei(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let wi=Ti;wi.IDENTITY=new Ti;var Ai="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}",Si="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n";function Ri(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function Ii(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Ri(2*e);case"bvec3":return Ri(3*e);case"bvec4":return Ri(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ci=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray&&(null==e||void 0!==e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}],Pi={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Mi={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Di(t,e){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const n in t.uniforms){const i=e[n];if(!i){t.uniforms[n]?.group&&(t.uniforms[n].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${n}, syncData);\n                    `));continue}const s=t.uniforms[n];let o=!1;for(let t=0;t<Ci.length;t++)if(Ci[t].test(i,s)){r.push(Ci[t].code(n,s)),o=!0;break}if(!o){const t=1!==i.size||i.isArray?Mi:Pi,e=t[i.type].replace("location",`ud["${n}"].location`);r.push(`\n            cu = ud["${n}"];\n            cv = cu.value;\n            v = uv["${n}"];\n            ${e};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}const Oi={};let Bi,Fi=Oi;function Ni(){if(Fi===Oi||Fi?.isContextLost()){const t=E.ADAPTER.createCanvas();let e;E.PREFER_ENV>=n.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Fi=e}return Fi}function Li(){if(!Bi){Bi=y.MEDIUM;const t=Ni();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Bi=e.precision?y.HIGH:y.MEDIUM}}return Bi}r(2489);function ki(t,e){const r=t.getShaderSource(e).split("\n").map((t,e)=>`${e}: ${t}`),n=t.getShaderInfoLog(e),i=n.split("\n"),s={},o=i.map(t=>parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(t=>!(!t||s[t])&&(s[t]=!0,!0)),a=[""];o.forEach(t=>{r[t-1]=`%c${r[t-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=r.join("\n");a[0]=h,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function Ui(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||ki(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||ki(t,n),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const Gi={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ji(t){return Gi[t]}let Hi=null;const Xi={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function zi(t,e){if(!Hi){const e=Object.keys(Xi);Hi={};for(let r=0;r<e.length;++r){const n=e[r];Hi[t[n]]=Xi[n]}}return Hi[e]}function Wi(t,e,r){if("precision"!==t.substring(0,9)){let n=e;return e===y.HIGH&&r!==y.HIGH&&(n=y.MEDIUM),`precision ${n} float;\n${t}`}return r!==y.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}let $i=0;const Vi={},Yi=class{constructor(t,e,r="pixi-shader",n={}){this.extra={},this.id=$i++,this.vertexSrc=t||Yi.defaultVertexSrc,this.fragmentSrc=e||Yi.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Vi[r]?(Vi[r]++,r+=`-${Vi[r]}`):Vi[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}\n${this.fragmentSrc}`,this.vertexSrc=Wi(this.vertexSrc,Yi.defaultVertexPrecision,y.HIGH),this.fragmentSrc=Wi(this.fragmentSrc,Yi.defaultFragmentPrecision,Li())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Si}static get defaultFragmentSrc(){return Ai}static from(t,e,r){const n=t+e;let i=un[n];return i||(un[n]=i=new Yi(t,e,r)),i}};let qi=Yi;qi.defaultVertexPrecision=y.HIGH,qi.defaultFragmentPrecision=j.apple.device?y.HIGH:y.MEDIUM;let Ki=0;class Zi{constructor(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Ki++,this.static=!!e,this.ubo=!!r,t instanceof $n?(this.buffer=t,this.buffer.type=x.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new $n(new Float32Array(1)),this.buffer.type=x.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new Zi(e,r)}static from(t,e,r){return new Zi(t,e,r)}static uboFrom(t,e){return new Zi(t,e??!0,!0)}}class Qi{constructor(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof Zi?e:new Zi(e):new Zi({}),this.disposeRunner=new kn("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const r in e.uniforms){const n=e.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,r){const n=qi.from(t,e);return new Qi(n,r)}}class Ji{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const e=new Int32Array(t);for(let n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=Zi.from({uSamplers:e},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new qi(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new di,default:this.defaultGroupCache[t]};return new Qi(this.programCache[t],e)}generateSampleSrc(t){let e="";e+="\n",e+="\n";for(let r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(vTextureId < ${r}.5)`),e+="\n{",e+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,e+="\n}";return e+="\n",e+="\n",e}}class ts{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function es(){return!j.apple.device}function rs(t){let e=!0;const r=E.ADAPTER.getNavigator();if(j.tablet||j.phone){if(j.apple.device){const t=r.userAgent.match(/OS (\d+)_(\d+)?/);if(t){const r=parseInt(t[1],10);r<11&&(e=!1)}}if(j.android.device){const t=r.userAgent.match(/Android\s([0-9.]*)/);if(t){const r=parseInt(t[1],10);r<7&&(e=!1)}}}return e?t:4}class ns{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var is="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",ss="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n";const os=class extends ns{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=ti,this.vertexSize=6,this.state=Fn.for2d(),this.size=4*os.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??rs(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??es(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return J("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return ss}static get defaultFragmentTemplate(){return is}setShaderGenerator({vertex:t=os.defaultVertexSrc,fragment:e=os.defaultFragmentTemplate}={}){this.shaderGenerator=new Ji(t,e)}contextChange(){const t=this.renderer.gl;E.PREFER_ENV===n.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),os.defaultMaxTextures),this.maxTextures=In(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=os,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;while(t.length<r)t.push(new zn);while(e.length<n)e.push(new ts);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=os._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Xn._globalBatch,a=0,h=r[0],l=0;n.copyBoundTextures(i,e);for(let u=0;u<this._bufferSize;++u){const c=t[u];t[u]=null,c._batchEnabled!==o&&(h.count>=e&&(n.boundArray(h,i,o,e),this.buildDrawCalls(h,l,u),l=u,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}h.count>0&&(n.boundArray(h,i,o,e),this.buildDrawCalls(h,l,this._bufferSize),++a,++o);for(let u=0;u<i.length;u++)i[u]=null;Xn._globalBatch=o}buildDrawCalls(t,e,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=os._drawCallPool;let h=this._dcIndex,l=this._aIndex,u=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(let d=e;d<r;++d){const r=n[d],f=r._texture.baseTexture,p=Vr[f.alphaMode?1:0][r.blendMode];n[d]=null,e<d&&c.blend!==p&&(c.size=u-c.start,e=d,c=a[++h],c.texArray=t,c.start=u),this.packInterleavedGeometry(r,i,s,l,u),l+=r.vertexData.length/2*o,u+=r.indices.length,c.blend=p}e<r&&(c.size=u-c.start,++h),this._dcIndex=h,this._aIndex=l,this._iIndex=u}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;os.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,n=os._drawCallPool;let i=null;for(let s=0;s<t;s++){const{texArray:t,type:o,size:a,start:h,blend:l}=n[s];i!==t&&(i=t,this.bindAndClearTexArray(t)),this.state.blendMode=l,r.set(this.state),e.drawElements(o,a,e.UNSIGNED_SHORT,2*h)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),os.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=tn(Math.ceil(t/8)),r=rn(e),n=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new An(n*this.vertexSize*4)),i}getIndexBuffer(t){const e=tn(Math.ceil(t/12)),r=rn(e),n=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(t,e,r,n,i){const{uint32View:s,float32View:o}=e,a=n/this.vertexSize,h=t.uvs,l=t.indices,u=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?Kr(t._tintRGB,d):t._tintRGB+(255*d<<24);for(let p=0;p<u.length;p+=2)o[n++]=u[p],o[n++]=u[p+1],o[n++]=h[p],o[n++]=h[p+1],s[n++]=f,o[n++]=c;for(let p=0;p<l.length;p++)r[i++]=a+l[p]}};let as=os;as.defaultBatchSize=4096,as.extension={name:"batch",type:bn.RendererPlugin},as._drawCallPool=[],as._textureArrayPool=[],wn.add(as);var hs="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n",ls="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";const us=class extends Qi{constructor(t,e,r){const n=qi.from(t||us.defaultVertexSrc,e||us.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=us.defaultResolution,this.multisample=us.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Fn}apply(t,e,r,n,i){t.applyFilter(this,e,r,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return ls}static get defaultFragmentSrc(){return hs}};let cs=us;cs.defaultResolution=1,cs.defaultMultisample=v.NONE;class ds{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color="string"===typeof t.color?Wr(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=zr(t),Xr(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}ds.extension={type:[bn.RendererSystem,bn.CanvasRendererSystem],name:"background"},wn.add(ds);class fs{constructor(t){this.renderer=t,this.emptyRenderer=new ns(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:r}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,r,n){const{elements:i,ids:s,count:o}=t;let a=0;for(let h=0;h<o;h++){const t=i[h],o=t._batchLocation;if(o>=0&&o<n&&e[o]===t)s[h]=o;else while(a<n){const n=e[a];if(!n||n._batchEnabled!==r||n._batchLocation!==a){s[h]=a,t._batchLocation=a,e[a]=t;break}a++}}}destroy(){this.renderer=null}}fs.extension={type:bn.RendererSystem,name:"batch"},wn.add(fs);let ps=0;class ms{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ps++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,r=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:r,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ps++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;void 0!==e.addEventListener&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let r;if(E.PREFER_ENV>=n.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,void 0!==t.removeEventListener&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ms.extension={type:bn.RendererSystem,name:"context"},wn.add(ms);class gs extends Gn{upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===p.UNPACK);const i=e.realWidth,s=e.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(e.target,0,0,0,i,s,e.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(e.target,0,r.internalFormat,i,s,0,e.format,r.type,this.data)),!0}}class ys{constructor(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new kn("disposeFramebuffer"),this.multisample=v.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Xn(null,{scaleMode:c.NEAREST,resolution:1,mipmap:f.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Xn(new gs(null,{width:this.width,height:this.height}),{scaleMode:c.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:f.OFF,format:a.DEPTH_COMPONENT,type:l.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],i=n.resolution;n.setSize(t/i,e/i)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class _s extends Xn{constructor(t={}){if("number"===typeof t){const e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];t={width:e,height:r,scaleMode:n,resolution:i}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=v.NONE),super(null,t),this.mipmap=f.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new ys(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class vs extends Un{constructor(t){const e=t,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;super(r,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,r){void 0!==r||e.startsWith("data:")?!1!==r&&(t.crossOrigin="string"===typeof r?r:"anonymous"):t.crossOrigin=vn(e)}upload(t,e,r,n){const i=t.gl,s=e.realWidth,o=e.realHeight;if(n=n||this.source,"undefined"!==typeof HTMLImageElement&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if("undefined"!==typeof HTMLVideoElement&&n instanceof HTMLVideoElement&&n.readyState<=1&&0===n.buffered.length)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===p.UNPACK),this.noSubImage||e.target!==i.TEXTURE_2D||r.width!==s||r.height!==o?(r.width=s,r.height=o,i.texImage2D(e.target,0,r.internalFormat,e.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,r.type,n),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(e,r),super.update()}dispose(){this.source=null}}class xs extends vs{constructor(t,e){if(e=e||{},"string"===typeof t){const r=new Image;vs.crossOrigin(r,t,e.crossorigin),r.src=t,t=r}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??E.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"===typeof e.alphaMode?e.alphaMode:null,this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}load(t){return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((t,e)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?t(this.process()):t(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=t=>{e(t),this.onError.emit(t)})})),this._load}process(){const t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then(t=>t.blob()).then(r=>e(r,0,0,t.width,t.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===p.UNPACK?"premultiply":"none"})).then(t=>this.destroyed?Promise.reject():(this.bitmap=t,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,r){if("number"===typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,r,this.bitmap),!this.preserveBitmap){let t=!0;const n=e._glTextures;for(const i in n){const s=n[i];if(s!==r&&s.dirtyId!==e.dirtyId){t=!1;break}}t&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return"undefined"!==typeof HTMLImageElement&&("string"===typeof t||t instanceof HTMLImageElement)}}class bs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,r){const n=e.width,i=e.height;if(r){const e=t.width/2/n,s=t.height/2/i,o=t.x/n+e,a=t.y/i+s;r=bi.add(r,bi.NW),this.x0=o+e*bi.uX(r),this.y0=a+s*bi.uY(r),r=bi.add(r,2),this.x1=o+e*bi.uX(r),this.y1=a+s*bi.uY(r),r=bi.add(r,2),this.x2=o+e*bi.uX(r),this.y2=a+s*bi.uY(r),r=bi.add(r,2),this.x3=o+e*bi.uX(r),this.y3=a+s*bi.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Es=new bs;function Ts(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class ws extends H{constructor(t,e,r,n,i,s){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new ai(0,0,1,1)),t instanceof ws&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this._uvs=Es,this.uvMatrix=null,this.orig=r||e,this._rotate=Number(i||0),!0===i)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new si(s.x,s.y):new si(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:t}=this.baseTexture;t?.url&&cn[t.url]&&ws.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ws.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),r=new ws(this.baseTexture,!this.noFrame&&t,e,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===Es&&(this._uvs=new bs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},r=E.STRICT_TEXTURE_CACHE){const n="string"===typeof t;let i=null;if(n)i=t;else if(t instanceof Xn){if(!t.cacheId){const r=e?.pixiIdPrefix||"pixiid";t.cacheId=`${r}-${an()}`,Xn.addToCache(t,t.cacheId)}i=t.cacheId}else{if(!t._pixiId){const r=e?.pixiIdPrefix||"pixiid";t._pixiId=`${r}_${an()}`}i=t._pixiId}let s=cn[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return s||t instanceof Xn?!s&&t instanceof Xn&&(s=new ws(t),ws.addToCache(s,i)):(e.resolution||(e.resolution=xn(t)),s=new ws(new Xn(t,e)),s.baseTexture.cacheId=i,Xn.addToCache(s.baseTexture,i),ws.addToCache(s,i)),s}static fromURL(t,e){const r=Object.assign({autoLoad:!1},e?.resourceOptions),n=ws.from(t,Object.assign({resourceOptions:r},e),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,r,n){return new ws(Xn.fromBuffer(t,e,r,n))}static fromLoader(t,e,r,n){const i=new Xn(t,Object.assign({scaleMode:Xn.defaultOptions.scaleMode,resolution:xn(e)},n)),{resource:s}=i;s instanceof xs&&(s.url=e);const o=new ws(i);return r||(r=e),Xn.addToCache(o.baseTexture,r),ws.addToCache(o,r),r!==e&&(Xn.addToCache(o.baseTexture,e),ws.addToCache(o,e)),o.baseTexture.valid?Promise.resolve(o):new Promise(t=>{o.baseTexture.once("loaded",()=>t(o))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),cn[e]&&cn[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),cn[e]=t)}static removeFromCache(t){if("string"===typeof t){const e=cn[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete cn[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)cn[t.textureCacheIds[e]]===t&&delete cn[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:r,width:n,height:i}=t,s=e+n>this.baseTexture.width,o=r+i>this.baseTexture.height;if(s||o){const t=s&&o?"and":"or",a=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,h=`Y: ${r} + ${i} = ${r+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${a} ${t} ${h}`)}this.valid=n&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ws._EMPTY||(ws._EMPTY=new ws(new Xn),Ts(ws._EMPTY),Ts(ws._EMPTY.baseTexture)),ws._EMPTY}static get WHITE(){if(!ws._WHITE){const t=E.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),ws._WHITE=new ws(Xn.from(t)),Ts(ws._WHITE),Ts(ws._WHITE.baseTexture)}return ws._WHITE}}class As extends ws{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,r=!0){const n=this.baseTexture.resolution,i=Math.round(t*n)/n,s=Math.round(e*n)/n;this.valid=i>0&&s>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=s,r&&this.baseTexture.resize(i,s),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new As(new _s(t))}}class Ss{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,r=v.NONE){const n=new _s(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new As(n)}getOptimalTexture(t,e,r=1,n=v.NONE){let i;t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?i=n>1?-n:-1:(t=tn(t),e=tn(e),i=((65535&t)<<16|65535&e)>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);let s=this.texturePool[i].pop();return s||(s=this.createTexture(t,e,n)),s.filterPoolKey=i,s.setResolution(r),s}getFilterTexture(t,e,r){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||v.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=!1!==t,t)for(const e in this.texturePool){const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this.texturePool={}}setScreenSize(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){this.enableFullScreen=t.width>0&&t.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Ss.SCREEN_KEY=-1;class Rs extends Jn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Is extends Jn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new $n(this.vertices),this.uvBuffer=new $n(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Cs{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=v.NONE,this.sourceFrame=new ai,this.destinationFrame=new ai,this.bindingSourceFrame=new ai,this.bindingDestinationFrame=new ai,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ps=[new si,new si,new si,new si],Ms=new di;class Ds{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Ss,this.statePool=[],this.quad=new Rs,this.quadUv=new Is,this.tempRect=new ai,this.activeState={},this.globalUniforms=new Zi({outputFrame:new ai,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new Cs,s=this.renderer.renderTexture;let o=e[0].resolution,a=e[0].multisample,h=e[0].padding,l=e[0].autoFit,u=e[0].legacy??!0;for(let f=1;f<e.length;f++){const t=e[f];o=Math.min(o,t.resolution),a=Math.min(a,t.multisample),h=this.useMaxPadding?Math.max(h,t.padding):h+t.padding,l=l&&t.autoFit,u=u||(t.legacy??!0)}1===n.length&&(this.defaultFilterStack[0].renderTexture=s.current),n.push(i),i.resolution=o,i.multisample=a,i.legacy=u,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(h);const c=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(Ms.copyFrom(r.projection.transform).invert(),c),l?(i.sourceFrame.fit(c),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(c)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,o,a),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const d=this.tempRect;d.x=0,d.y=0,d.width=i.sourceFrame.width,d.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(s.sourceFrame),i.bindingDestinationFrame.copyFrom(s.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,s.bind(i.renderTexture,i.sourceFrame,d),r.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const i=n.inputSize,s=n.inputPixel,o=n.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],s[0]=Math.round(i[0]*e.resolution),s[1]=Math.round(i[1]*e.resolution),s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*i[2]-.5*s[2],o[3]=e.sourceFrame.height*i[3]-.5*s[3],e.legacy){const t=n.filterArea;t[0]=e.destinationFrame.width,t[1]=e.destinationFrame.height,t[2]=e.sourceFrame.x,t[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const a=t[t.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,a.renderTexture,m.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let t=e.renderTexture,n=this.getOptimalFilterTexture(t.width,t.height,e.resolution);n.filterFrame=t.filterFrame;let i=0;for(i=0;i<r.length-1;++i){1===i&&e.multisample>1&&(n=this.getOptimalFilterTexture(t.width,t.height,e.resolution),n.filterFrame=t.filterFrame),r[i].apply(this,t,n,m.CLEAR,e);const s=t;t=n,n=s}r[i].apply(this,t,a.renderTexture,m.BLEND,e),i>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(t),this.returnFilterTexture(n)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=m.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const e=this.tempRect;e.x=0,e.y=0,e.width=t.filterFrame.width,e.height=t.filterFrame.height,r.bind(t,t.filterFrame,e)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=1&n.stateId||this.forceClear;(e===m.CLEAR||e===m.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,r,n){const i=this.renderer;i.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(o.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(o.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:i}=e._texture,s=t.set(n.width,0,0,n.height,r.x,r.y),o=e.worldTransform.copyTo(di.TEMP_MATRIX);return o.invert(),s.prepend(o),s.scale(1/i.width,1/i.height),s.translate(e.anchor.x,e.anchor.y),s}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,r=1,n=v.NONE){return this.texturePool.getOptimalTexture(t,e,r,n)}getFilterTexture(t,e,r){if("number"===typeof t){const r=t;t=e,e=r}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||v.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const r=Ps[0],n=Ps[1],i=Ps[2],s=Ps[3];r.set(e.left,e.top),n.set(e.left,e.bottom),i.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(r,r),t.apply(n,n),t.apply(i,i),t.apply(s,s);const o=Math.min(r.x,n.x,i.x,s.x),a=Math.min(r.y,n.y,i.y,s.y),h=Math.max(r.x,n.x,i.x,s.x),l=Math.max(r.y,n.y,i.y,s.y);e.x=o,e.y=a,e.width=h-o,e.height=l-a}roundFrame(t,e,r,n,i){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(i){const{a:t,b:e,c:r,d:n}=i;if((Math.abs(e)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4))return}i=i?Ms.copyFrom(i):Ms.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}}}Ds.extension={type:bn.RendererSystem,name:"filter"},wn.add(Ds);class Os{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=v.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Bs=new ai;class Fs{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new ys(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ai,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;E.PREFER_ENV===n.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=t=>e.drawBuffersWEBGL(t):(this.hasMRT=!1,t.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,r=0){const{gl:n}=this;if(t){const i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=r),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let e=0;e<t.colorTextures.length;e++){const r=t.colorTextures[e];this.renderer.texture.unbind(r.parentTextureArray||r)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const t=e.width>>r,n=e.height>>r,i=t/e.width;this.setViewport(e.x*i,e.y*i,t,n)}else{const e=t.width>>r,n=t.height>>r;this.setViewport(0,0,e,n)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,r,n){const i=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),i.width===r&&i.height===n&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=r,i.height=n,this.gl.viewport(t,e,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,r,n,s=i.COLOR|i.DEPTH){const{gl:o}=this;o.clearColor(t,e,r,n),o.clear(s)}initFramebuffer(t){const{gl:e}=this,r=new Os(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r}resizeFramebuffer(t){const{gl:e}=this,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let i=n.length;e.drawBuffers||(i=Math.min(i,1));for(let s=0;s<i;s++){const i=n[s],o=i.parentTextureArray||i;this.renderer.texture.bind(o,0),0===s&&r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,o._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const o=[];for(let a=0;a<s;a++){const s=i[a],h=s.parentTextureArray||s;this.renderer.texture.bind(h,0),0===a&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,s.target,h._glTextures[this.CONTEXT_UID].texture,e),o.push(r.COLOR_ATTACHMENT0+a))}if(o.length>1&&r.drawBuffers(o),t.depthTexture){const n=this.writeDepthTexture;if(n){const n=t.depthTexture;this.renderer.texture.bind(n,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n._glTextures[this.CONTEXT_UID].texture,e)}}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))}canMultisampleFramebuffer(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let r=v.NONE;if(t<=1||null===e)return r;for(let n=0;n<e.length;n++)if(e[n]<=t){r=e[n];break}return 1===r&&(r=v.NONE),r}blit(t,e,r){const{current:n,renderer:i,gl:s,CONTEXT_UID:o}=this;if(2!==i.context.webGLVersion)return;if(!n)return;const a=n.glFramebuffers[o];if(!a)return;if(!t){if(!a.msaaBuffer)return;const e=n.colorTextures[0];if(!e)return;a.blitFramebuffer||(a.blitFramebuffer=new ys(n.width,n.height),a.blitFramebuffer.addColorTexture(0,e)),t=a.blitFramebuffer,t.colorTextures[0]!==e&&(t.colorTextures[0]=e,t.dirtyId++,t.dirtyFormat++),t.width===n.width&&t.height===n.height||(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=Bs,e.width=n.width,e.height=n.height),r||(r=e);const h=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,a.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,h?s.NEAREST:s.LINEAR)}disposeFramebuffer(t,e){const r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete t.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil)return;t.stencil=!0;const r=t.width,n=t.height,i=this.gl,s=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,s),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,r,n):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,r,n),e.stencil=s,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ai}destroy(){this.renderer=null}}Fs.extension={type:bn.RendererSystem,name:"framebuffer"},wn.add(Fs);const Ns={5126:4,5123:2,5121:1};class Ls{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){let e=this.renderer.context.extensions.vertexArrayObject;E.PREFER_ENV===n.WEBGL_LEGACY&&(e=null),e?(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=t=>e.bindVertexArrayOES(t),t.deleteVertexArray=t=>e.deleteVertexArrayOES(t)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(2!==e.webGLVersion){const e=t.getExtension("ANGLE_instanced_arrays");e?(t.vertexAttribDivisor=(t,r)=>e.vertexAttribDivisorANGLE(t,r),t.drawElementsInstanced=(t,r,n,i,s)=>e.drawElementsInstancedANGLE(t,r,n,i,s),t.drawArraysInstanced=(t,r,n,i)=>e.drawArraysInstancedANGLE(t,r,n,i)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:r}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const s=n[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let r=0;r<t.buffers.length;r++){const n=t.buffers[r];e.update(n)}}checkCompatibility(t,e){const r=t.attributes,n=e.attributeData;for(const i in n)if(!r[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(t,e){const r=t.attributes,n=e.attributeData,i=["g",t.id];for(const s in r)n[s]&&i.push(s,n[s].location);return i.join("-")}initGeometryVao(t,e,r=!0){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.program;o.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);const a=this.getSignature(t,o),h=t.glVertexArrayObjects[this.CONTEXT_UID];let l=h[a];if(l)return h[o.id]=l,l;const u=t.buffers,c=t.attributes,d={},f={};for(const p in u)d[p]=0,f[p]=0;for(const p in c)!c[p].size&&o.attributeData[p]?c[p].size=o.attributeData[p].size:c[p].size||console.warn(`PIXI Geometry attribute '${p}' size cannot be determined (likely the bound shader does not have the attribute)`),d[c[p].buffer]+=c[p].size*Ns[c[p].type];for(const p in c){const t=c[p],e=t.size;void 0===t.stride&&(d[t.buffer]===e*Ns[t.type]?t.stride=0:t.stride=d[t.buffer]),void 0===t.start&&(t.start=f[t.buffer],f[t.buffer]+=e*Ns[t.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(let p=0;p<u.length;p++){const t=u[p];s.bind(t),r&&t._glBuffers[i].refCount++}return this.activateVao(t,o),h[o.id]=l,h[a]=l,n.bindVertexArray(null),s.unbind(x.ARRAY_BUFFER),l}disposeGeometry(t,e){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=t.buffers,s=this.renderer?.buffer;if(t.disposeRunner.remove(this),r){if(s)for(let t=0;t<i.length;t++){const r=i[t]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0!==r.refCount||e||s.dispose(i[t],e))}if(!e)for(const t in r)if("g"===t[0]){const e=r[t];this._activeVao===e&&this.unbind(),n.deleteVertexArray(e)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)}activateVao(t,e){const r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,s=t.buffers,o=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);let a=null;for(const h in o){const t=o[h],l=s[t.buffer],u=l._glBuffers[n];if(e.attributeData[h]){a!==u&&(i.bind(l),a=u);const n=e.attributeData[h].location;if(r.enableVertexAttribArray(n),r.vertexAttribPointer(n,t.size,t.type||r.FLOAT,t.normalized,t.stride,t.start),t.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(n,t.divisor)}}}}draw(t,e,r,n){const{gl:i}=this,s=this._activeGeometry;if(s.indexBuffer){const o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?i.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(r||0)*o,n||1):i.drawElements(t,e||s.indexBuffer.data.length,a,(r||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?i.drawArraysInstanced(t,r,e||s.getSize(),n||1):i.drawArrays(t,r,e||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Ls.extension={type:bn.RendererSystem,name:"geometry"},wn.add(Ls);const ks=new di;class Us{constructor(t,e){this._texture=t,this.mapCoord=new di,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof e?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){void 0===e&&(e=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const i=t[n],s=t[n+1];e[n]=i*r.a+s*r.c+r.tx,e[n+1]=i*r.b+s*r.d+r.ty}return e}update(t){const e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=e.orig,i=e.trim;i&&(ks.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(ks));const s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,h=this.clampOffset;return o[0]=(e._frame.x+a+h)/s.width,o[1]=(e._frame.y+a+h)/s.height,o[2]=(e._frame.x+e._frame.width-a+h)/s.width,o[3]=(e._frame.y+e._frame.height-a+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0}}var Gs="varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",js="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n";class Hs extends cs{constructor(t,e,r){let n=null;"string"!==typeof t&&void 0===e&&void 0===r&&(n=t,t=void 0,e=void 0,r=void 0),super(t||js,e||Gs,r),this.maskSprite=n,this.maskMatrix=new di}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,r,n){const i=this._maskSprite,s=i._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Us(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,r,n))}}class Xs{constructor(t=null){this.type=_.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=cs.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=_.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class zs{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let r=e;if(!r.isMaskData){const t=this.maskDataPool.pop()||new Xs;t.pooled=!0,t.maskObject=e,r=t}const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==_.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case _.SCISSOR:this.renderer.scissor.push(r);break;case _.STENCIL:this.renderer.stencil.push(r);break;case _.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case _.COLOR:this.pushColorMask(r);break;default:break}r.type===_.SPRITE&&this.maskStack.push(r)}pop(t){const e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case _.SCISSOR:this.renderer.scissor.pop(e);break;case _.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case _.SPRITE:this.popSpriteMask(e);break;case _.COLOR:this.popColorMask(e);break;default:break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){const t=this.maskStack[this.maskStack.length-1];t.type===_.SPRITE&&t._filters&&(t._filters[0].maskSprite=t.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=_.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=_.SCISSOR:t.type=_.STENCIL:t.type=_.COLOR}pushSpriteMask(t){const{maskObject:e}=t,r=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new Hs]));const i=this.renderer,s=i.renderTexture;let o,a;if(s.current){const e=s.current;o=t.resolution||e.resolution,a=t.multisample??e.multisample}else o=t.resolution||i.resolution,a=t.multisample??i.multisample;n[0].resolution=o,n[0].multisample=a,n[0].maskSprite=e;const h=r.filterArea;r.filterArea=e.getBounds(!0),i.filter.push(r,n),r.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))}popColorMask(t){const e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))}destroy(){this.renderer=null}}zs.extension={type:bn.RendererSystem,name:"mask"},wn.add(zs);class Ws{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,r=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==r&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const $s=new di,Vs=[],Ys=class extends Ws{constructor(t){super(t),this.glConst=E.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,Vs.pop()??new ai);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:n,d:i}=t;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect())return!1;if(Ys.isMatrixRotated(e.worldTransform))return!1;if(Ys.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,n,i){Ys.isMatrixRotated(i)||(i=i?$s.copyFrom(i):$s.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&Vs.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let qs=Ys;qs.extension={type:bn.RendererSystem,name:"scissor"},wn.add(qs);class Ks extends Ws{constructor(t){super(t),this.glConst=E.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:r}=this.renderer,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;const i=t._colorMask;0!==i&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==i&&(t._colorMask=i,r.colorMask(0!==(1&i),0!==(2&i),0!==(4&i),0!==(8&i))),this._useCurrent()}pop(t){const e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==n&&(r._colorMask=n,e.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Ks.extension={type:bn.RendererSystem,name:"stencil"},wn.add(Ks);class Zs{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return J("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return J("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return J("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(t){for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}Zs.extension={type:[bn.RendererSystem,bn.CanvasRendererSystem],name:"_plugin"},wn.add(Zs);class Qs{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new di,this.transform=null}update(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(t,e,r,n){const i=this.projectionMatrix,s=n?-1:1;i.identity(),i.a=1/e.width*2,i.d=s*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-s-e.y*i.d}setTransform(t){}destroy(){this.renderer=null}}Qs.extension={type:bn.RendererSystem,name:"projection"},wn.add(Qs);const Js=new wi;class to{constructor(t){this.renderer=t,this._tempMatrix=new di}generateTexture(t,e){const{region:r,...n}=e||{},i=r||t.getLocalBounds(null,!0);0===i.width&&(i.width=1),0===i.height&&(i.height=1);const s=As.create({width:i.width,height:i.height,...n});this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const o=t.transform;return t.transform=Js,this.renderer.render(t,{renderTexture:s,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=o,s}destroy(){}}to.extension={type:[bn.RendererSystem,bn.CanvasRendererSystem],name:"textureGenerator"},wn.add(to);const eo=new ai,ro=new ai;class no{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ai,this.destinationFrame=new ai,this.viewportFrame=new ai}bind(t=null,e,r){const n=this.renderer;let i,s,o;this.current=t,t?(i=t.baseTexture,o=i.resolution,e||(eo.width=t.frame.width,eo.height=t.frame.height,e=eo),r||(ro.x=t.frame.x,ro.y=t.frame.y,ro.width=e.width,ro.height=e.height,r=ro),s=i.framebuffer):(o=n.resolution,e||(eo.width=n._view.screen.width,eo.height=n._view.screen.height,e=eo),r||(r=eo,r.width=e.width,r.height=e.height));const a=this.viewportFrame;a.x=r.x*o,a.y=r.y*o,a.width=r.width*o,a.height=r.height*o,t||(a.y=n.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(s,a),this.renderer.projection.update(r,e,o,!s),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)}clear(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.renderer.background.colorRgba;const r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,i=r.width!==n.width||r.height!==n.height;if(i){let{x:t,y:e,width:r,height:n}=this.viewportFrame;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(t,e,r,n)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}no.extension={type:bn.RendererSystem,name:"renderTexture"},wn.add(no);class io{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function so(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function oo(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const n=e.getActiveAttrib(t,i);if(n.name.startsWith("gl_"))continue;const s=zi(e,n.type),o={type:s,name:n.name,size:ji(s),location:e.getAttribLocation(t,n.name)};r[n.name]=o}return r}function ao(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const n=e.getActiveUniform(t,i),s=n.name.replace(/\[.*?\]$/,""),o=!!n.name.match(/\[.*?\]$/),a=zi(e,n.type);r[s]={name:s,index:i,type:a,size:n.size,isArray:o,value:Ii(a,n.size)}}return r}function ho(t,e){const r=so(t,t.VERTEX_SHADER,e.vertexSrc),n=so(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=e.extra?.transformFeedbackVaryings;if(s&&("function"!==typeof t.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,"separate"===s.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||Ui(t,i,r,n),e.attributeData=oo(i,t),e.uniformData=ao(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const r=Object.keys(e.attributeData);r.sort((t,e)=>t>e?1:-1);for(let n=0;n<r.length;n++)e.attributeData[r[n]].location=n,t.bindAttribLocation(i,n,r[n]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);const o={};for(const h in e.uniformData){const r=e.uniformData[h];o[h]={location:t.getUniformLocation(i,h),value:Ii(r.type,r.size)}}const a=new io(i,o);return a}function lo(t,e,r,n,i){r.buffer.update(i)}const uo={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},co={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function fo(t){const e=t.map(t=>({data:t,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<e.length;s++){const t=e[s];if(r=co[t.data.type],t.data.size>1&&(r=Math.max(r,16)*t.data.size),t.dataLen=r,n%r!==0&&n<16){const t=n%r%16;n+=t,i+=t}n+r>16?(i=16*Math.ceil(i/16),t.offset=i,i+=r,n=r):(t.offset=i,n+=r,i+=r)}return i=16*Math.ceil(i/16),{uboElements:e,size:i}}function po(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((t,e)=>t.index-e.index),r}function mo(t,e){if(!t.autoManage)return{size:0,syncFunc:lo};const r=po(t.uniforms,e),{uboElements:n,size:i}=fo(r),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let o=0;o<n.length;o++){const e=n[o],r=t.uniforms[e.data.name],i=e.data.name;let a=!1;for(let t=0;t<Ci.length;t++){const n=Ci[t];if(n.codeUbo&&n.test(e.data,r)){s.push(`offset = ${e.offset/4};`,Ci[t].codeUbo(e.data.name,r)),a=!0;break}}if(!a)if(e.data.size>1){const t=ji(e.data.type),r=Math.max(co[e.data.type]/16,1),n=t/r,o=(4-n%4)%4;s.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${e.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${e.data.size*r}; i++)\n                {\n                    for(var j = 0; j < ${n}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${o};\n                }\n\n                `)}else{const t=uo[e.data.type];s.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${e.offset/4};\n                ${t};\n                `)}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}let go;function yo(){if("boolean"===typeof go)return go;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");go=!0===t({a:"b"},"a","b")}catch(t){go=!1}return go}let _o=0;const vo={textureCount:0,uboCount:0};class xo{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=_o++}systemCheck(){if(!yo())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(vo.textureCount=0,vo.uboCount=0,this.syncUniformGroup(t.uniformGroup,vo)),n}setUniforms(t){const e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)}syncUniformGroup(t,e){const r=this.getGlProgram();t.static&&t.dirtyId===r.uniformDirtyGroups[t.id]||(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))}syncUniforms(t,e,r){const n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,r)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Di(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const r=this.getGlProgram();if(!t.static||0!==t.dirtyId||!r.uniformGroups[t.id]){t.dirtyId=0;const n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,vo,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])}createSyncBufferGroup(t,e,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const i=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const s=this.getSignature(t,this.shader.program.uniformData,"ubo");let o=this._uboCache[s];if(o||(o=this._uboCache[s]=mo(t,this.shader.program.uniformData)),t.autoManage){const e=new Float32Array(o.size/4);t.buffer.update(e)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,r){const n=t.uniforms,i=[`${r}-`];for(const s in n)i.push(s),e[s]&&i.push(e[s].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,r=t.program,n=ho(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}xo.extension={type:bn.RendererSystem,name:"shader"},wn.add(xo);class bo{constructor(t){this.renderer=t}run(t){const e=this.renderer;e.emitWithCustomOptions(e.runners.init,t),t.hello&&console.log(`PixiJS 7.1.1 - ${e.rendererLogId} - https://pixijs.com`),e.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}function Eo(t,e=[]){return e[s.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.ADD]=[t.ONE,t.ONE],e[s.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.NONE]=[0,0],e[s.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[s.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[s.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[s.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[s.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[s.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[s.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[s.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[s.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[s.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[s.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}bo.extension={type:[bn.RendererSystem,bn.CanvasRendererSystem],name:"startup"},wn.add(bo);const To=0,wo=1,Ao=2,So=3,Ro=4,Io=5,Co=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=s.NONE,this._blendEq=!1,this.map=[],this.map[To]=this.setBlend,this.map[wo]=this.setOffset,this.map[Ao]=this.setCullFace,this.map[So]=this.setDepthTest,this.map[Ro]=this.setFrontFace,this.map[Io]=this.setDepthMask,this.checks=[],this.defaultState=new Fn,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=Eo(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;while(e)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Co.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Co.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let Po=Co;Po.extension={type:bn.RendererSystem,name:"state"},wn.add(Po);r(116);class Mo extends H{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(e=>t.systems[e]),r=[...e,...Object.keys(t.systems).filter(t=>!e.includes(t))];for(const n of r)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(t=>{this.runners[t]=new kn(t)})}addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const n in this.runners)this.runners[n].add(r);return this}emitWithCustomOptions(t,e){const r=Object.keys(this._systemsHash);t.items.forEach(n=>{const i=r.find(t=>this._systemsHash[t]===n);n[t.name](e[i])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Do=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Do.defaultMaxIdle,this.checkCountMax=Do.defaultCheckCountMax,this.mode=Do.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==g.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let n=0;n<e.length;n++){const i=e[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){let t=0;for(let r=0;r<e.length;r++)null!==e[r]&&(e[t++]=e[r]);e.length=t}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};let Oo=Do;Oo.defaultMode=g.AUTO,Oo.defaultMaxIdle=3600,Oo.defaultCheckCountMax=600,Oo.extension={type:bn.RendererSystem,name:"textureGC"},wn.add(Oo);class Bo{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=l.UNSIGNED_BYTE,this.internalFormat=a.RGBA,this.samplerType=0}}function Fo(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[l.UNSIGNED_BYTE]:{[a.RGBA]:t.RGBA8,[a.RGB]:t.RGB8,[a.RG]:t.RG8,[a.RED]:t.R8,[a.RGBA_INTEGER]:t.RGBA8UI,[a.RGB_INTEGER]:t.RGB8UI,[a.RG_INTEGER]:t.RG8UI,[a.RED_INTEGER]:t.R8UI,[a.ALPHA]:t.ALPHA,[a.LUMINANCE]:t.LUMINANCE,[a.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[l.BYTE]:{[a.RGBA]:t.RGBA8_SNORM,[a.RGB]:t.RGB8_SNORM,[a.RG]:t.RG8_SNORM,[a.RED]:t.R8_SNORM,[a.RGBA_INTEGER]:t.RGBA8I,[a.RGB_INTEGER]:t.RGB8I,[a.RG_INTEGER]:t.RG8I,[a.RED_INTEGER]:t.R8I},[l.UNSIGNED_SHORT]:{[a.RGBA_INTEGER]:t.RGBA16UI,[a.RGB_INTEGER]:t.RGB16UI,[a.RG_INTEGER]:t.RG16UI,[a.RED_INTEGER]:t.R16UI,[a.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[l.SHORT]:{[a.RGBA_INTEGER]:t.RGBA16I,[a.RGB_INTEGER]:t.RGB16I,[a.RG_INTEGER]:t.RG16I,[a.RED_INTEGER]:t.R16I},[l.UNSIGNED_INT]:{[a.RGBA_INTEGER]:t.RGBA32UI,[a.RGB_INTEGER]:t.RGB32UI,[a.RG_INTEGER]:t.RG32UI,[a.RED_INTEGER]:t.R32UI,[a.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[l.INT]:{[a.RGBA_INTEGER]:t.RGBA32I,[a.RGB_INTEGER]:t.RGB32I,[a.RG_INTEGER]:t.RG32I,[a.RED_INTEGER]:t.R32I},[l.FLOAT]:{[a.RGBA]:t.RGBA32F,[a.RGB]:t.RGB32F,[a.RG]:t.RG32F,[a.RED]:t.R32F,[a.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[l.HALF_FLOAT]:{[a.RGBA]:t.RGBA16F,[a.RGB]:t.RGB16F,[a.RG]:t.RG16F,[a.RED]:t.R16F},[l.UNSIGNED_SHORT_5_6_5]:{[a.RGB]:t.RGB565},[l.UNSIGNED_SHORT_4_4_4_4]:{[a.RGBA]:t.RGBA4},[l.UNSIGNED_SHORT_5_5_5_1]:{[a.RGBA]:t.RGB5_A1},[l.UNSIGNED_INT_2_10_10_10_REV]:{[a.RGBA]:t.RGB10_A2,[a.RGBA_INTEGER]:t.RGB10_A2UI},[l.UNSIGNED_INT_10F_11F_11F_REV]:{[a.RGB]:t.R11F_G11F_B10F},[l.UNSIGNED_INT_5_9_9_9_REV]:{[a.RGB]:t.RGB9_E5},[l.UNSIGNED_INT_24_8]:{[a.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[l.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[a.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[l.UNSIGNED_BYTE]:{[a.RGBA]:t.RGBA,[a.RGB]:t.RGB,[a.ALPHA]:t.ALPHA,[a.LUMINANCE]:t.LUMINANCE,[a.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[l.UNSIGNED_SHORT_5_6_5]:{[a.RGB]:t.RGB},[l.UNSIGNED_SHORT_4_4_4_4]:{[a.RGBA]:t.RGBA},[l.UNSIGNED_SHORT_5_5_5_1]:{[a.RGBA]:t.RGBA}},e}class No{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Xn,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Fo(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const r=new Bo(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Bo(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:r}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let t=0;t<r.length;t++)r[t]===this.unknownTexture&&this.bind(null,t)}for(let n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let i=t-1;i>=0;--i){const t=e[i];if(t){const e=t._glTextures[n];e.samplerType!==u.FLOAT&&this.renderer.texture.unbind(t)}}}initTexture(t){const e=new Bo(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){e.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,2===this.webGLVersion&&t.type===l.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const r=this.renderer;if(this.initTextureType(t,e),t.resource?.upload(r,t,e))e.samplerType!==u.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,i=t.realHeight,s=r.gl;(e.width!==n||e.height!==i||e.dirtyId<0)&&(e.width=n,e.height=i,s.texImage2D(t.target,0,e.internalFormat,n,i,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:r}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const e=this.managedTextures.indexOf(t);-1!==e&&nn(this.managedTextures,e,1)}}updateTextureStyle(t){const e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==f.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=d.CLAMP,t.resource?.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const r=this.gl;if(e.mipmap&&t.mipmap!==f.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===c.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const e=this.renderer.context.extensions.anisotropicFiltering;if(e&&t.anisotropicLevel>0&&t.scaleMode===c.LINEAR){const n=Math.min(t.anisotropicLevel,r.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===c.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===c.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}No.extension={type:bn.RendererSystem,name:"texture"},wn.add(No);class Lo{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glTransformFeedbacks[r]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:r,renderer:n}=this;e&&n.shader.bind(e),r.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:r,CONTEXT_UID:n}=this,i=e.createTransformFeedback();t._glTransformFeedbacks[n]=i,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,i);for(let s=0;s<t.buffers.length;s++){const i=t.buffers[s];i&&(r.buffer.update(i),i._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,s,i._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),i}disposeTransformFeedback(t,e){const r=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let s=0;s<t.buffers.length;s++){const r=t.buffers[s];if(!r)continue;const n=r._glBuffers[this.CONTEXT_UID];n&&(n.refCount--,0!==n.refCount||e||i.dispose(r,e))}r&&(e||n.deleteTransformFeedback(r),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Lo.extension={type:bn.RendererSystem,name:"transformFeedback"},wn.add(Lo);class ko{constructor(t){this.renderer=t}init(t){this.screen=new ai(0,0,t.width,t.height),this.element=t.view||E.ADAPTER.createCanvas(),this.resolution=t.resolution||E.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}ko.extension={type:[bn.RendererSystem,bn.CanvasRendererSystem],name:"_view"},wn.add(ko),E.PREFER_ENV=n.WEBGL2,E.STRICT_TEXTURE_CACHE=!1,Object.defineProperties(E,{WRAP_MODE:{get(){return Xn.defaultOptions.wrapMode},set(t){J("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Xn.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Xn.defaultOptions.scaleMode},set(t){J("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Xn.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Xn.defaultOptions.mipmap},set(t){J("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Xn.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Xn.defaultOptions.anisotropicLevel},set(t){J("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Xn.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return J("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),cs.defaultResolution},set(t){cs.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return J("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),cs.defaultMultisample},set(t){cs.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return as.defaultMaxTextures},set(t){J("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),as.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return as.defaultBatchSize},set(t){J("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),as.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return as.canUploadSameBuffer},set(t){J("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),as.canUploadSameBuffer=t}},GC_MODE:{get(){return Oo.defaultMode},set(t){J("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Oo.defaultMode=t}},GC_MAX_IDLE:{get(){return Oo.defaultMaxIdle},set(t){J("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Oo.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Oo.defaultCheckCountMax},set(t){J("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Oo.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return qi.defaultVertexPrecision},set(t){J("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),qi.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return qi.defaultFragmentPrecision},set(t){J("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),qi.defaultFragmentPrecision=t}}});var Uo=(t=>(t[t["HIGH"]=25]="HIGH",t[t["NORMAL"]=0]="NORMAL",t[t["LOW"]=-25]="LOW",t[t["UTILITY"]=-50]="UTILITY",t))(Uo||{});class Go{constructor(t,e=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const jo=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Go(null,null,1/0),this.deltaMS=1/jo.targetFPMS,this.elapsedMS=1/jo.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=Uo.NORMAL){return this._addListener(new Go(t,e,r))}addOnce(t,e,r=Uo.NORMAL){return this._addListener(new Go(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(e){while(e){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this}remove(t,e){let r=this._head.next;while(r)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;while(e=e.next)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;while(t)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*jo.targetFPMS;const r=this._head;let n=r.next;while(n)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,jo.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!jo._shared){const t=jo._shared=new jo;t.autoStart=!0,t._protected=!0}return jo._shared}static get system(){if(!jo._system){const t=jo._system=new jo;t.autoStart=!0,t._protected=!0}return jo._system}};let Ho=jo;Ho.targetFPMS=.06,Object.defineProperties(E,{TARGET_FPMS:{get(){return Ho.targetFPMS},set(t){J("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ho.targetFPMS=t}}});class Xo{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Uo.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Ho.shared:new Ho,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}Xo.extension=bn.Application,wn.add(Xo);const zo=[];function Wo(t){for(const e of zo)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}wn.handleByList(bn.Renderer,zo);var $o="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Vo="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";const Yo=$o,qo=Vo;class Ko{constructor(t){this.renderer=t}contextChange(t){let e;if(1===this.renderer.context.webGLVersion){const r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else{const r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r)}e>=v.HIGH?this.multisample=v.HIGH:e>=v.MEDIUM?this.multisample=v.MEDIUM:e>=v.LOW?this.multisample=v.LOW:this.multisample=v.NONE}destroy(){}}Ko.extension={type:bn.RendererSystem,name:"_multisample"},wn.add(Ko);class Zo{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Qo{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const i=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,i.buffer)}}bindBufferRange(t,e,r){const{gl:n,CONTEXT_UID:i}=this;r=r||0;const s=t._glBuffers[i]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,s.buffer,256*r,256)}update(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const r=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,r)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:r}=this;return t._glBuffers[e]=new Zo(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}Qo.extension={type:bn.RendererSystem,name:"buffer"},wn.add(Qo);class Jo{constructor(t){this.renderer=t}render(t,e){const r=this.renderer;let n,i,s,o;if(e&&(n=e.renderTexture,i=e.clear,s=e.transform,o=e.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=s,!r.context.isLost){if(n||(this.lastObjectRendered=t),!o){const e=t.enableTempParent();t.updateTransform(),t.disableTempParent(e)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(i??r.background.clearBeforeRender)&&r.renderTexture.clear(),t.render(r),r.batch.currentRenderer.flush(),n&&(e.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Jo.extension={type:bn.RendererSystem,name:"objectRenderer"},wn.add(Jo);const ta=class extends Mo{constructor(t){super(),t=Object.assign({},E.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Zi({projectionMatrix:new di},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ta.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(J("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha);const r={hello:t.hello,_plugin:ta.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha,preserveDrawingBuffer:t.preserveDrawingBuffer}};this.startup.run(r),this.options=t}static test(t){return!t?.forceCanvas&&et()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return J("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return J("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return J("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return J("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){J("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return J("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(t){J("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return J("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let ea=ta;ea.extension={type:bn.Renderer,priority:1},ea.__plugins={},ea.__systems={},wn.handleByMap(bn.RendererPlugin,ea.__plugins),wn.handleByMap(bn.RendererSystem,ea.__systems),wn.add(ea);class ra extends Un{constructor(t,e){const{width:r,height:n}=e||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let i=0;i<t;i++){const t=new Xn;this.items.push(t),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof Un?this.addResourceAt(t[r],r):this.addResourceAt(Ln(t[r],e),r))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(t=>t.resource).filter(t=>t),e=t.map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:e}=this.items[0];return this.resize(t,e),Promise.resolve(this)}),this._load}}class na extends ra{constructor(t,e){const{width:r,height:n}=e||{};let i,s;Array.isArray(t)?(i=t,s=t.length):s=t,super(s,{width:r,height:n}),i&&this.initFromArray(i,e)}addBaseTextureAt(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this}bind(t){super.bind(t),t.target=h.TEXTURE_2D_ARRAY}upload(t,e,r){const{length:n,itemDirtyIds:i,items:s}=this,{gl:o}=t;r.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,e.format,r.type,null);for(let a=0;a<n;a++){const t=s[a];i[a]<t.dirtyId&&(i[a]=t.dirtyId,t.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,t.resource.width,t.resource.height,1,e.format,r.type,t.resource.source))}return!0}}class ia extends vs{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const sa=class extends ra{constructor(t,e){const{width:r,height:n,autoLoad:i,linkBaseTexture:s}=e||{};if(t&&t.length!==sa.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:n});for(let o=0;o<sa.SIDES;o++)this.items[o].target=h.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,e),!1!==i&&this.load()}bind(t){super.bind(t),t.target=h.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=h.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const n=this.itemDirtyIds;for(let i=0;i<sa.SIDES;i++){const s=this.items[i];(n[i]<s.dirtyId||r.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,r),n[i]=s.dirtyId):n[i]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===sa.SIDES}};let oa=sa;oa.SIDES=6;class aa extends vs{constructor(t,e){let r,n;e=e||{},"string"===typeof t?(r=aa.EMPTY,n=t):(r=t,n=null),super(r),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode="number"===typeof e.alphaMode?e.alphaMode:null,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(async(t,e)=>{if(null!==this.url)try{const e=await E.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await e.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===p.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),t(this)}catch(r){if(this.destroyed)return;e(r),this.onError.emit(r)}else t(this)})),this._load}upload(t,e,r){return this.source instanceof ImageBitmap?("number"===typeof this.alphaMode&&(e.alphaMode=this.alphaMode),super.upload(t,e,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&"undefined"!==typeof ImageBitmap&&("string"===typeof t||t instanceof ImageBitmap)}static get EMPTY(){return aa._EMPTY=aa._EMPTY??E.ADAPTER.createCanvas(0,0),aa._EMPTY}}r(4979);const ha=class extends vs{constructor(t,e){e=e||{},super(E.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},ha.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const t=new Image;vs.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*e,i=this._overrideHeight||this._overrideWidth/e*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${an()}`,s.getContext("2d").drawImage(t,0,0,e,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(t){const e=ha.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"===typeof t&&t.startsWith("data:image/svg+xml")||"string"===typeof t&&ha.SVG_XML.test(t)}};let la=ha;la.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,la.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const ua=class extends vs{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"===typeof t&&(t=[t]);const n=t[0].src||t[0];vs.crossOrigin(r,n,e.crossorigin);for(let e=0;e<t.length;++e){const n=document.createElement("source");let{src:i,mime:s}=t[e];i=i||t[e];const o=i.split("?").shift().toLowerCase(),a=o.slice(o.lastIndexOf(".")+1);s=s||ua.MIME_TYPES[a]||`video/${a}`,n.src=i,n.type=s,r.appendChild(n)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){if(!this.destroyed){const t=Ho.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){const t=this.source;return t.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ho.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Ho.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(Ho.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ho.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ho.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||ua.TYPES.includes(e)}};let ca=ua;ca.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],ca.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Nn.push(aa,xs,ia,ca,la,Gn,oa,na);class da{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?ai.EMPTY:(t=t||new ai(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:r,b:n,c:i,d:s,tx:o,ty:a}=t,h=r*e.x+i*e.y+o,l=n*e.x+s*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)}addQuad(t){let e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,s=t[0],o=t[1];e=s<e?s:e,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=t[2],o=t[3],e=s<e?s:e,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=t[4],o=t[5],e=s<e?s:e,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,s=t[6],o=t[7],e=s<e?s:e,r=o<r?o:r,n=s>n?s:n,i=o>i?o:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i}addFrame(t,e,r,n,i){this.addFrameMatrix(t.worldTransform,e,r,n,i)}addFrameMatrix(t,e,r,n,i){const s=t.a,o=t.b,a=t.c,h=t.d,l=t.tx,u=t.ty;let c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=s*e+a*r+l,g=o*e+h*r+u;c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*n+a*r+l,g=o*n+h*r+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*e+a*i+l,g=o*e+h*i+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*n+a*i+l,g=o*n+h*i+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p}addVertexData(t,e,r){let n=this.minX,i=this.minY,s=this.maxX,o=this.maxY;for(let a=e;a<r;a+=2){const e=t[a],r=t[a+1];n=e<n?e:n,i=r<i?r:i,s=e>s?e:s,o=r>o?r:o}this.minX=n,this.minY=i,this.maxX=s,this.maxY=o}addVertices(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)}addVerticesMatrix(t,e,r,n,i=0,s=i){const o=t.a,a=t.b,h=t.c,l=t.d,u=t.tx,c=t.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY;for(let g=r;g<n;g+=2){const t=e[g],r=e[g+1],n=o*t+h*r+u,y=l*r+a*t+c;d=Math.min(d,n-i),p=Math.max(p,n+i),f=Math.min(f,y-s),m=Math.max(m,y+s)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addBounds(t){const e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i}addBoundsMask(t,e){const r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=s){const t=this.minX,e=this.minY,o=this.maxX,a=this.maxY;this.minX=r<t?r:t,this.minY=n<e?n:e,this.maxX=i>o?i:o,this.maxY=s>a?s:a}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=s){const t=this.minX,e=this.minY,o=this.maxX,a=this.maxY;this.minX=r<t?r:t,this.minY=n<e?n:e,this.maxX=i>o?i:o,this.maxY=s>a?s:a}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,r,n,i,s){t-=i,e-=s,r+=i,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class fa extends H{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new wi,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new da,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let r=0;r<e.length;++r){const n=e[r];Object.defineProperty(fa.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new ai),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new ai),t=this._localBoundsRect),this._localBounds||(this._localBounds=new da);const e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const s=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-i,s}toGlobal(t,e,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,e=0,r=1,n=1,i=0,s=0,o=0,a=0,h=0){return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new pa),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*ri}set angle(t){this.transform.rotation=t*ni}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=t,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(0===t._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class pa extends fa{constructor(){super(...arguments),this.sortDirty=null}}fa.prototype.displayObjectUpdateTransform=fa.prototype.updateTransform;const ma=new di;function ga(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const ya=class extends fa{constructor(){super(),this.children=[],this.sortableChildren=ya.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);nn(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,nn(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,nn(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,n=e,i=n-r;let s;if(i>0&&i<=n){s=this.children.splice(r,i);for(let t=0;t<s.length;++t)s[t].parent=null,s[t].transform&&(s[t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let t=0;t<s.length;++t)s[t].emit("removed",this),this.emit("childRemoved",s[t],this,t);return s}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(ga),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const e=this.children[t];e.visible&&e.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){const t=e._mask.isMaskData?e._mask.maskObject:e._mask;t?(t.calculateBounds(),this._bounds.addBoundsMask(e._bounds,t._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let n=0,i=this.children.length;n<i;++n){const t=this.children[n];t.visible&&t.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==ya.prototype._render&&(r=this.getBounds(!0));const i=t.projection.transform;if(i&&(n?(n=ma.copyFrom(n),n.prepend(i)):n=i),r&&e.intersects(r,n))this._render(t);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const e=this.children[s],r=e.cullable;e.cullable=r||!this.cullArea,e.render(t),e.cullable=r}}render(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}}renderAdvanced(t){const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let t=0;t<e.length;t++)e[t].enabled&&this._enabledFilters.push(e[t])}const n=e&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==_.NONE));if(n&&t.batch.flush(),e&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}n&&t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e="boolean"===typeof t?t:t?.children,r=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<r.length;++n)r[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}};let _a=ya;_a.defaultSortableChildren=!1,_a.prototype.containerUpdateTransform=_a.prototype.updateTransform,Object.defineProperties(E,{SORTABLE_CHILDREN:{get(){return _a.defaultSortableChildren},set(t){J("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),_a.defaultSortableChildren=t}}});const va=new si,xa=new Uint16Array([0,1,2,0,2,3]);class ba extends _a{constructor(t){super(),this._anchor=new Ei(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=s.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ws.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=xa,this.pluginName="batch",this.isSprite=!0,this._roundPixels=E.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,l=t.trim,u=t.orig,c=this._anchor;let d=0,f=0,p=0,m=0;if(l?(f=l.x-c._x*u.width,d=f+l.width,m=l.y-c._y*u.height,p=m+l.height):(f=-c._x*u.width,d=f+u.width,m=-c._y*u.height,p=m+u.height),h[0]=r*f+i*m+o,h[1]=s*m+n*f+a,h[2]=r*d+i*m+o,h[3]=s*m+n*d+a,h[4]=r*d+i*p+o,h[5]=s*p+n*d+a,h[6]=r*f+i*p+o,h[7]=s*p+n*f+a,this._roundPixels){const t=E.RESOLUTION;for(let e=0;e<h.length;++e)h[e]=Math.round(h[e]*t)/t}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,h=i.d,l=i.tx,u=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;e[0]=s*c+a*f+l,e[1]=h*f+o*c+u,e[2]=s*d+a*f+l,e[3]=h*f+o*d+u,e[4]=s*d+a*p+l,e[5]=h*p+o*d+u,e[6]=s*c+a*p+l,e[7]=h*p+o*c+u}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new da),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ai),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,va);const e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x;let i=0;return va.x>=n&&va.x<n+e&&(i=-r*this.anchor.y,va.y>=i&&va.y<i+r)}destroy(t){super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;const e="boolean"===typeof t?t:t?.texture;if(e){const e="boolean"===typeof t?t:t?.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const r=t instanceof ws?t:ws.from(t,e);return new ba(r)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=sn(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=sn(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tint}set tint(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ws.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Ea=new di;fa.prototype._cacheAsBitmap=!1,fa.prototype._cacheData=null,fa.prototype._cacheAsBitmapResolution=null,fa.prototype._cacheAsBitmapMultisample=null;class Ta{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(fa.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;let e;this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Ta),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),fa.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},fa.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const t=this.filters[0].padding;r.pad(t)}r.ceil(E.RESOLUTION);const n=t.renderTexture.current,i=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),o=t.projection.transform,a=As.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${an()}`;this._cacheData.textureCacheId=h,Xn.addToCache(a.baseTexture,h),ws.addToCache(a,h);const l=this.transform.localTransform.copyTo(Ea).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:a,clear:!0,transform:l,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=o,t.renderTexture.bind(n,i,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const u=new ba(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-r.x/r.width,u.anchor.y=-r.y/r.height,u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)},fa.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},fa.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,i=t._projTransform;e.ceil(E.RESOLUTION);const s=As.create({width:e.width,height:e.height}),o=`cacheAsBitmap_${an()}`;this._cacheData.textureCacheId=o,Xn.addToCache(s.baseTexture,o),ws.addToCache(s,o);const a=Ea;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:a,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const h=new ba(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)},fa.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},fa.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},fa.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Xn.removeFromCache(this._cacheData.textureCacheId),ws.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},fa.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},fa.prototype.name=null,_a.prototype.getChildByName=function(t,e){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(let r=0,n=this.children.length;r<n;r++){const e=this.children[r];if(!e.getChildByName)continue;const n=e.getChildByName(t,!0);if(n)return n}return null},fa.prototype.getGlobalPosition=function(t=new si,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var wa="varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n";class Aa extends cs{constructor(t=1){super(Yo,wa,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const Sa={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Ra=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");function Ia(t){const e=Sa[t],r=e.length;let n=Ra,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let n=s.replace("%index%",a.toString());o=a,a>=r&&(o=t-a-1),n=n.replace("%value%",e[o].toString()),i+=n,i+="\n"}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}const Ca="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";function Pa(t,e){const r=Math.ceil(t/2);let n,i=Ca,s="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let t=n.replace("%index%",o.toString());t=t.replace("%sampleIndex%",o-(r-1)+".0"),s+=t,s+="\n"}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}class Ma extends cs{constructor(t,e=8,r=4,n=cs.defaultResolution,i=5){const s=Pa(i,t),o=Ia(i);super(s,o),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=r,this.blur=e}apply(t,e,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{const i=t.getFilterTexture(),s=t.renderer;let o=e,a=i;this.state.blend=!1,t.applyFilter(this,o,a,m.CLEAR);for(let e=1;e<this.passes-1;e++){t.bindAndClear(o,m.BLIT),this.uniforms.uSampler=a;const e=a;a=o,o=e,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,r,n),t.returnFilterTexture(i)}}get blur(){return this.strength}set blur(t){this.padding=1+2*Math.abs(t),this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class Da extends cs{constructor(t=8,e=4,r=cs.defaultResolution,n=5){super(),this.blurXFilter=new Ma(!0,t,e,r,n),this.blurYFilter=new Ma(!1,t,e,r,n),this.resolution=r,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,r,n){const i=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(i&&s){const i=t.getFilterTexture();this.blurXFilter.apply(t,e,i,m.CLEAR),this.blurYFilter.apply(t,i,r,n),t.returnFilterTexture(i)}else s?this.blurYFilter.apply(t,e,r,n):this.blurXFilter.apply(t,e,r,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var Oa="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n";class Ba extends cs{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(qo,Oa,t),this.alpha=1}_loadMatrix(t,e=!1){let r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}tint(t,e){const r=t>>16&255,n=t>>8&255,i=255&t,s=[r/255,0,0,0,0,0,n/255,0,0,0,0,0,i/255,0,0,0,0,0,1,0];this._loadMatrix(s,e)}greyscale(t,e){const r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const r=Math.cos(t),n=Math.sin(t),i=Math.sqrt,s=1/3,o=i(s),a=r+(1-r)*s,h=s*(1-r)-o*n,l=s*(1-r)+o*n,u=s*(1-r)+o*n,c=r+s*(1-r),d=s*(1-r)-o*n,f=s*(1-r)-o*n,p=s*(1-r)+o*n,m=r+s*(1-r),g=[a,h,l,0,0,u,c,d,0,0,f,p,m,0,0,0,0,0,1,0];this._loadMatrix(g,e)}contrast(t,e){const r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)}saturate(t=0,e){const r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,r,n,i){t=t||.2,e=e||.15,r=r||16770432,n=n||3375104;const s=(r>>16&255)/255,o=(r>>8&255)/255,a=(255&r)/255,h=(n>>16&255)/255,l=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,o,a,t,0,h,l,u,e,0,s-h,o-l,a-u,0,0];this._loadMatrix(c,i)}night(t,e){t=t||.1;const r=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}predator(t,e){const r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Ba.prototype.grayscale=Ba.prototype.greyscale;var Fa="varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",Na="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n";class La extends cs{constructor(t,e){const r=new di;t.renderable=!1,super(Na,Fa,{mapSampler:t._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=r,null!==e&&void 0!==e||(e=20),this.scale=new si(e,e)}apply(t,e,r,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const i=this.maskSprite.worldTransform,s=Math.sqrt(i.a*i.a+i.b*i.b),o=Math.sqrt(i.c*i.c+i.d*i.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=i.a/s,this.uniforms.rotation[1]=i.b/s,this.uniforms.rotation[2]=i.c/o,this.uniforms.rotation[3]=i.d/o),t.applyFilter(this,e,r,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var ka='varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n',Ua="\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n";class Ga extends cs{constructor(){super(Ua,ka)}}var ja="precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n";class Ha extends cs{constructor(t=.5,e=Math.random()){super(qo,ja,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Xa={AlphaFilter:Aa,BlurFilter:Da,BlurFilterPass:Ma,ColorMatrixFilter:Ba,DisplacementFilter:La,FXAAFilter:Ga,NoiseFilter:Ha};Object.entries(Xa).forEach(([t,e])=>{Object.defineProperty(Xa,t,{get(){return J("7.1.0",`filters.${t} has moved to ${t}`),e}})});class za{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=za.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new si,this.page=new si,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,r,n,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Wa extends za{constructor(){super(...arguments),this.client=new si,this.movement=new si,this.offset=new si,this.global=new si,this.screen=new si}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,r,n,i,s,o,a,h,l,u,c,d,f,p){throw new Error("Method not implemented.")}}class $a extends Wa{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Va extends Wa{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const Ya=2048,qa=new si,Ka=new si;class Za{constructor(t){this.dispatch=new H,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((t,e)=>t.priority-e.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let r=0,n=e.length;r<n;r++)e[r].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){const r=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,qa.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;const r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,i=r.length-1;n<i;n++)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){t.eventPhase=t.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(t.currentTarget=r[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,r=this.rootTarget){t.eventPhase=t.BUBBLING_PHASE;const n=r.children;if(n)for(let i=0;i<n.length;i++)this.all(t,e,n[i]);t.currentTarget=r,this.notifyTarget(t,e)}propagationPath(t){const e=[t];for(let r=0;r<Ya&&t!==this.rootTarget;r++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestRecursive(t,e,r,n,i){if(!t||!t.visible)return null;if(i(t,r))return null;if(t.interactiveChildren&&t.children){const s=t.children;for(let o=s.length-1;o>=0;o--){const a=s[o],h=this.hitTestRecursive(a,e||a.interactive,r,n,i);if(h){if(h.length>0&&!h[h.length-1].parent)continue;return(h.length>0||t.interactive)&&h.push(t),h}}}return e&&n(t,r)?t.interactive?[t]:[]:null}hitPruneFn(t,e){if(t.hitArea&&(t.worldTransform.applyInverse(e,Ka),!t.hitArea.contains(Ka.x,Ka.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!r.containsPoint?.(e))return!0}return!1}hitTestFn(t,e){return!!t.hitArea||!!t.containsPoint&&t.containsPoint(e)}notifyTarget(t,e){e=e??t.type;const r=`on${e}`;t.currentTarget[r]?.(t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof $a))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)this.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){const t=2===e.button;this.dispatchEvent(e,t?"rightdown":"mousedown")}const r=this.trackingData(t.pointerId);r.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){if(!(t instanceof $a))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.createPointerEvent(t),r="mouse"===e.pointerType||"pen"===e.pointerType,n=this.trackingData(t.pointerId),i=this.findMountedTarget(n.overTargets);if(n.overTargets?.length>0&&i!==e.target){const n="mousemove"===t.type?"mouseout":"pointerout",s=this.createPointerEvent(t,n,i);if(this.dispatchEvent(s,"pointerout"),r&&this.dispatchEvent(s,"mouseout"),!e.composedPath().includes(i)){const n=this.createPointerEvent(t,"pointerleave",i);n.eventPhase=n.AT_TARGET;while(n.target&&!e.composedPath().includes(n.target))n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;this.freeEvent(n)}this.freeEvent(s)}if(i!==e.target){const n="mousemove"===t.type?"mouseover":"pointerover",s=this.clonePointerEvent(e,n);this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover");let o=i?.parent;while(o&&o!==this.rootTarget.parent){if(o===e.target)break;o=o.parent}const a=!o||o===this.rootTarget.parent;if(a){const t=this.clonePointerEvent(e,"pointerenter");t.eventPhase=t.AT_TARGET;while(t.target&&t.target!==i&&t.target!==this.rootTarget.parent)t.currentTarget=t.target,this.notifyTarget(t),r&&this.notifyTarget(t,"mouseenter"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(s)}const s=this.moveOnAll?"all":"dispatchEvent";this[s](e,"pointermove"),this.all(e,"globalpointermove"),"touch"===e.pointerType&&(this[s](e,"touchmove"),this.all(e,"globaltouchmove")),r&&(this[s](e,"mousemove"),this.all(e,"globalmousemove"),this.cursor=e.target?.cursor),n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){if(!(t instanceof $a))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.createPointerEvent(t),n="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const i=this.clonePointerEvent(r,"pointerenter");i.eventPhase=i.AT_TARGET;while(i.target&&i.target!==this.rootTarget.parent)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;e.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(i)}mapPointerOut(t){if(!(t instanceof $a))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId);if(e.overTargets){const r="mouse"===t.pointerType||"pen"===t.pointerType,n=this.findMountedTarget(e.overTargets),i=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(i),r&&this.dispatchEvent(i,"mouseout");const s=this.createPointerEvent(t,"pointerleave",n);s.eventPhase=s.AT_TARGET;while(s.target&&s.target!==this.rootTarget.parent)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;e.overTargets=null,this.freeEvent(i),this.freeEvent(s)}this.cursor=null}mapPointerUp(t){if(!(t instanceof $a))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=performance.now(),r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.dispatchEvent(r,t?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[t.button]);let s=i;if(i&&!r.composedPath().includes(i)){let e=i;while(e&&!r.composedPath().includes(e)){if(r.currentTarget=e,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){const t=2===r.button;this.notifyTarget(r,t?"rightupoutside":"mouseupoutside")}e=e.parent}delete n.pressTargetsByButton[t.button],s=e}if(s){const i=this.clonePointerEvent(r,"click");i.target=s,i.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:i.target,timeStamp:e});const o=n.clicksByButton[t.button];o.target===i.target&&e-o.timeStamp<200?++o.clickCount:o.clickCount=1,o.target=i.target,o.timeStamp=e,i.detail=o.clickCount,"mouse"===i.pointerType?this.dispatchEvent(i,"click"):"touch"===i.pointerType&&this.dispatchEvent(i,"tap"),this.dispatchEvent(i,"pointertap"),this.freeEvent(i)}this.freeEvent(r)}mapPointerUpOutside(t){if(!(t instanceof $a))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const e=this.trackingData(t.pointerId),r=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(r){let i=r;while(i)n.currentTarget=i,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof Va))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let r=1;r<t.length;r++){if(t[r].parent!==e)break;e=t[r]}return e}createPointerEvent(t,e,r){const n=this.allocateEvent($a);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=r??this.hitTest(n.global.x,n.global.y),"string"===typeof e&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(Va);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const r=this.allocateEvent($a);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=e??r.type,r}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof $a&&e instanceof $a&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Wa&&e instanceof Wa&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const r=t.currentTarget._events[e];if(r)if("fn"in r)r.fn.call(r.context,t);else for(let n=0,i=r.length;n<i&&!t.propagationImmediatelyStopped;n++)r[n].fn.call(r[n].context,t)}}const Qa=1,Ja={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class th{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Za(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new $a(null),this.rootWheelEvent=new Va(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:t,resolution:e}=this.renderer;this.setTargetElement(t),this.resolution=e}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r);break}else e&&"string"===typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}onPointerDown(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized){const e=t.cancelable||!("cancelable"in t);e&&t.preventDefault()}for(let r=0,n=e.length;r<n;r++){const t=e[r],n=this.bootstrapEvent(this.rootPointerEvent,t);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const t=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let i=0,s=n.length;i<s;i++){const t=this.bootstrapEvent(this.rootPointerEvent,n[i]);t.type+=r,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===t.pointerType)return;const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const t=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,r){let n;n=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*i,t.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,n=t.changedTouches.length;r<n;r++){const n=t.changedTouches[r];"undefined"===typeof n.button&&(n.button=0),"undefined"===typeof n.buttons&&(n.buttons=1),"undefined"===typeof n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"===typeof n.width&&(n.width=n.radiusX||1),"undefined"===typeof n.height&&(n.height=n.radiusY||1),"undefined"===typeof n.tiltX&&(n.tiltX=0),"undefined"===typeof n.tiltY&&(n.tiltY=0),"undefined"===typeof n.pointerType&&(n.pointerType="touch"),"undefined"===typeof n.pointerId&&(n.pointerId=n.identifier||0),"undefined"===typeof n.pressure&&(n.pressure=n.force||.5),"undefined"===typeof n.twist&&(n.twist=0),"undefined"===typeof n.tangentialPressure&&(n.tangentialPressure=0),"undefined"===typeof n.layerX&&(n.layerX=n.offsetX=n.clientX),"undefined"===typeof n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=t.type,e.push(n)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{const r=t;"undefined"===typeof r.isPrimary&&(r.isPrimary=!0),"undefined"===typeof r.width&&(r.width=1),"undefined"===typeof r.height&&(r.height=1),"undefined"===typeof r.tiltX&&(r.tiltX=0),"undefined"===typeof r.tiltY&&(r.tiltY=0),"undefined"===typeof r.pointerType&&(r.pointerType="mouse"),"undefined"===typeof r.pointerId&&(r.pointerId=Qa),"undefined"===typeof r.pressure&&(r.pressure=.5),"undefined"===typeof r.twist&&(r.twist=0),"undefined"===typeof r.tangentialPressure&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Ja[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}}th.extension={name:"events",type:[bn.RendererSystem,bn.CanvasRendererSystem]},wn.add(th);const eh={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n="boolean"===typeof r&&r||"object"===typeof r&&r.capture,i="function"===typeof e?void 0:e;t=n?`${t}capture`:t,e="function"===typeof e?e:e.handleEvent,this.on(t,e,i)},removeEventListener(t,e,r){const n="boolean"===typeof r&&r||"object"===typeof r&&r.capture,i="function"===typeof e?void 0:e;t=n?`${t}capture`:t,e="function"===typeof e?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof za))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};fa.mixin(eh);const rh={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};fa.mixin(rh);const nh=9,ih=100,sh=0,oh=0,ah=2,hh=1,lh=-1e3,uh=-1e3,ch=2;class dh{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(j.tablet||j.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${ih}px`,e.style.height=`${ih}px`,e.style.position="absolute",e.style.top=`${sh}px`,e.style.left=`${oh}px`,e.style.zIndex=ah.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${hh}px`,t.style.height=`${hh}px`,t.style.position="absolute",t.style.top=`${lh}px`,t.style.left=`${uh}px`,t.style.zIndex=ch.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}update(){const t=performance.now();if(j.android.device&&t<this.androidUpdateCount)return;if(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen)return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:r,width:n,height:i}=this.renderer.view.getBoundingClientRect(),{width:s,height:o,resolution:a}=this.renderer,h=n/s*a,l=i/o*a;let u=this.div;u.style.left=`${e}px`,u.style.top=`${r}px`,u.style.width=`${s}px`,u.style.height=`${o}px`;for(let c=0;c<this.children.length;c++){const t=this.children[c];if(t.renderId!==this.renderId)t._accessibleActive=!1,nn(this.children,c,1),this.div.removeChild(t._accessibleDiv),this.pool.push(t._accessibleDiv),t._accessibleDiv=null,c--;else{u=t._accessibleDiv;let e=t.hitArea;const r=t.worldTransform;t.hitArea?(u.style.left=(r.tx+e.x*r.a)*h+"px",u.style.top=(r.ty+e.y*r.d)*l+"px",u.style.width=e.width*r.a*h+"px",u.style.height=e.height*r.d*l+"px"):(e=t.getBounds(),this.capHitArea(e),u.style.left=e.x*h+"px",u.style.top=e.y*l+"px",u.style.width=e.width*h+"px",u.style.height=e.height*l+"px",u.title!==t.accessibleTitle&&null!==t.accessibleTitle&&(u.title=t.accessibleTitle),u.getAttribute("aria-label")!==t.accessibleHint&&null!==t.accessibleHint&&u.setAttribute("aria-label",t.accessibleHint)),t.accessibleTitle===u.title&&t.tabIndex===u.tabIndex||(u.title=t.accessibleTitle,u.tabIndex=t.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:r}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>r&&(t.height=r-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${ih}px`,e.style.height=`${ih}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=ah.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:r}=t.target,n=this.renderer.events.rootBoundary,i=Object.assign(new za(n),{target:r});n.rootTarget=this.renderer.lastObjectRendered,e.forEach(t=>n.dispatchEvent(i,t))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===nh&&this.activate()}_onMouseMove(t){0===t.movementX&&0===t.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}dh.extension={name:"accessibility",type:[bn.RendererPlugin,bn.CanvasRendererPlugin]},wn.add(dh);const fh=class{constructor(t){this.stage=new _a,t=Object.assign({forceCanvas:!1},t),this.renderer=Wo(t),fh._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const r=fh._plugins.slice(0);r.reverse(),r.forEach(t=>{t.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let ph=fh;ph._plugins=[],wn.handleByList(bn.Application,ph._plugins);class mh{static init(t){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let t,e;if(this.cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,e=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;t=r,e=n}this.renderer.resize(t,e),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}mh.extension=bn.Application,wn.add(mh);const gh={loader:bn.LoadParser,resolver:bn.ResolveParser,cache:bn.CacheParser,detection:bn.DetectionParser};wn.handle(bn.Asset,t=>{const e=t.ref;Object.entries(gh).filter(([t])=>!!e[t]).forEach(([t,r])=>wn.add(Object.assign(e[t],{extension:e[t].extension??r})))},t=>{const e=t.ref;Object.keys(gh).filter(t=>!!e[t]).forEach(t=>wn.remove(e[t]))});class yh{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function _h(t,e){const r=t.split("?")[0],n=Z.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const vh=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(t=>"string"===typeof t?e(t):t):t);function xh(t,e,r,n,i){const s=e[r];for(let o=0;o<s.length;o++){const a=s[o];r<e.length-1?xh(t.replace(n[r],a),e,r+1,n,i):i.push(t.replace(n[r],a))}}function bh(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const e=[];r.forEach(t=>{const r=t.substring(1,t.length-1).split(",");e.push(r)}),xh(t,e,0,r,n)}else n.push(t);return n}class Eh{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const r=vh(t);let n;for(let o=0;o<this.parsers.length;o++){const t=this.parsers[o];if(t.test(e)){n=t.getCacheableAssets(r,e);break}}n||(n={},r.forEach(t=>{n[t]=e}));const i=Object.keys(n),s={cacheKeys:i,keys:r};if(r.forEach(t=>{this._cacheMap.set(t,s)}),i.forEach(t=>{this._cache.has(t)&&this._cache.get(t)!==e&&console.warn("[Cache] already has key:",t),this._cache.set(t,n[t])}),e instanceof ws){const t=e;r.forEach(e=>{t.baseTexture!==ws.EMPTY.baseTexture&&Xn.addToCache(t.baseTexture,e),ws.addToCache(t,e)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t))return void console.warn(`[Assets] Asset id ${t} was not found in the Cache`);const e=this._cacheMap.get(t),r=e.cacheKeys;r.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}}const Th=new Eh,wh=t=>!Array.isArray(t);class Ah{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{let n=null;for(let i=0;i<this.parsers.length;i++){const s=this.parsers[i];if(s.load&&s.test?.(t,e,this)){n=await s.load(t,e,this),r.parser=s;break}}if(!r.parser)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let t=0;t<this.parsers.length;t++){const i=this.parsers[t];i.parse&&i.parse&&await(i.testParse?.(n,e,this))&&(n=await i.parse(n,e,this)||n,r.parser=i)}return n})(),r}async load(t,e){let r=0;const n={},i=wh(t),s=vh(t,t=>({src:t})),o=s.length,a=s.map(async t=>{const i=Z.toAbsolute(t.src);if(!n[t.src])try{this.promiseCache[i]||(this.promiseCache[i]=this._getLoadPromiseAndParser(i,t)),n[t.src]=await this.promiseCache[i].promise,e&&e(++r/o)}catch(s){throw delete this.promiseCache[i],delete n[t.src],new Error(`[Loader.load] Failed to load ${i}.\n${s}`)}});return await Promise.all(a),i?n[s[0].src]:n}async unload(t){const e=vh(t,t=>({src:t})),r=e.map(async t=>{const e=Z.toAbsolute(t.src),r=this.promiseCache[e];if(r){const n=await r.promise;r.parser?.unload?.(n,t,this),delete this.promiseCache[e]}});await Promise.all(r)}get parsers(){return this._parsers}}var Sh=(t=>(t[t["Low"]=0]="Low",t[t["Normal"]=1]="Normal",t[t["High"]=2]="High",t))(Sh||{});const Rh={extension:{type:bn.LoadParser,priority:Sh.Low},test(t){return".json"===Z.extname(t).toLowerCase()},async load(t){const e=await E.ADAPTER.fetch(t),r=await e.json();return r}};wn.add(Rh);const Ih={extension:{type:bn.LoadParser,priority:Sh.Low},test(t){return".txt"===Z.extname(t).toLowerCase()},async load(t){const e=await E.ADAPTER.fetch(t),r=await e.text();return r}};function Ch(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}wn.add(Ih);const Ph=["normal","bold","100","200","300","400","500","600","700","800","900"],Mh=[".ttf",".otf",".woff",".woff2"],Dh=["font/ttf","font/otf","font/woff","font/woff2"];function Oh(t){const e=Z.extname(t),r=Z.basename(t,e),n=r.replace(/(-|_)/g," "),i=n.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ");return i}const Bh={extension:{type:bn.LoadParser,priority:Sh.Low},test(t){return Ch(t,Dh)||_h(t,Mh)},async load(t,e){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const r=E.ADAPTER.getFontFaceSet();if(r){const n=[],i=e.data?.family??Oh(t),s=e.data?.weights?.filter(t=>Ph.includes(t))??["normal"],o=e.data??{};for(let e=0;e<s.length;e++){const a=s[e],h=new FontFace(i,`url(${encodeURI(t)})`,{...o,weight:a});await h.load(),r.add(h),n.push(h)}return 1===n.length?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(t=>E.ADAPTER.getFontFaceSet().delete(t))}};wn.add(Bh);let Fh,Nh=0;const Lh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",kh={id:"checkImageBitmap",code:`\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('${Lh}');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    `},Uh={id:"loadImageBitmap",code:"\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };"};let Gh;class jh{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(t=>{const e=URL.createObjectURL(new Blob([kh.code],{type:"application/javascript"})),r=new Worker(e);r.addEventListener("message",n=>{r.terminate(),URL.revokeObjectURL(e),t(n.data)})})),this._isImageBitmapSupported}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===Fh&&(Fh=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Fh&&(Gh||(Gh=URL.createObjectURL(new Blob([Uh.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Gh),t.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){void 0!==t.error?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise((r,n)=>{this.queue.push({id:t,arguments:e,resolve:r,reject:n})});return this.next(),r}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),r=e.id;this.resolveHash[Nh]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Nh++,id:r})}}const Hh=new jh;function Xh(t,e,r){const n=new ws(t);return n.baseTexture.on("dispose",()=>{delete e.promiseCache[r]}),n}const zh=[".jpeg",".jpg",".png",".webp",".avif"],Wh=["image/jpeg","image/png","image/webp","image/avif"];async function $h(t){const e=await E.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob(),n=await createImageBitmap(r);return n}const Vh={extension:{type:bn.LoadParser,priority:Sh.High},config:{preferWorkers:!0},test(t){return Ch(t,Wh)||_h(t,zh)},async load(t,e,r){let n=null;n=globalThis.createImageBitmap?this.config.preferWorkers&&await Hh.isImageBitmapSupported()?await Hh.loadImageBitmap(t):await $h(t):await new Promise(e=>{n=new Image,n.crossOrigin="anonymous",n.src=t,n.complete?e(n):n.onload=()=>{e(n)}});const i=new Xn(n,{resolution:xn(t),...e.data});return i.resource.src=t,Xh(i,r,t)},unload(t){t.destroy(!0)}};wn.add(Vh);const Yh={extension:{type:bn.LoadParser,priority:Sh.High},test(t){return".svg"===Z.extname(t).toLowerCase()},async testParse(t){return la.test(t)},async parse(t,e,r){const n=new la(t,e?.data?.resourceOptions),i=new Xn(n,{resolution:xn(t),...e?.data});i.resource.src=t;const s=Xh(i,r,t);return e?.data?.resourceOptions?.autoLoad||await n.load(),s},async load(t,e){const r=await E.ADAPTER.fetch(t);return r.text()},unload:Vh.unload};wn.add(Yh);class qh{constructor(){this._bundleIdConnector="-",this._createBundleAssetId=(t,e)=>`${t}${this._bundleIdConnector}${e}`,this._extractAssetIdFromBundle=(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,""),this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}setDefaultSearchParams(t){if("string"===typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(t,e){const r=[];Array.isArray(e)?e.forEach(e=>{if("string"===typeof e.name){const n=this._createBundleAssetId(t,e.name);r.push(n),this.add([e.name,n],e.srcs,e.data)}else{const n=e.name.map(e=>this._createBundleAssetId(t,e));n.forEach(t=>{r.push(t)}),this.add([...e.name,...n],e.srcs)}}):Object.keys(e).forEach(n=>{r.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],e[n])}),this._bundles[t]=r}add(t,e,r){const n=vh(t);n.forEach(t=>{this._assetMap[t]&&console.warn(`[Resolver] already has key: ${t} overwriting`)}),Array.isArray(e)||(e="string"===typeof e?bh(e):[e]);const i=e.map(t=>{let e=t;if("string"===typeof t){let r=!1;for(let n=0;n<this._parsers.length;n++){const i=this._parsers[n];if(i.test(t)){e=i.parse(t),r=!0;break}}r||(e={src:t})}return e.format||(e.format=e.src.split(".").pop()),e.alias||(e.alias=n),(this._basePath||this._rootPath)&&(e.src=Z.toAbsolute(e.src,this._basePath,this._rootPath)),e.src=this._appendDefaultSearchParams(e.src),e.data=e.data??r,e});n.forEach(t=>{this._assetMap[t]=i})}resolveBundle(t){const e=wh(t);t=vh(t);const r={};return t.forEach(t=>{const e=this._bundles[t];if(e){const n=this.resolve(e),i={};for(const e in n){const r=n[e];i[this._extractAssetIdFromBundle(t,e)]=r}r[t]=i}}),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if("string"!==typeof t){const t={};for(const r in e)t[r]=e[r].src;return t}return e.src}resolve(t){const e=wh(t);t=vh(t);const r={};return t.forEach(t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const r=this._getPreferredOrder(e),n=e[0];r?.priority.forEach(t=>{r.params[t].forEach(r=>{const n=e.filter(e=>!!e[t]&&e[t]===r);n.length&&(e=n)})}),this._resolverHash[t]=e[0]??n}else{let e=t;(this._basePath||this._rootPath)&&(e=Z.toAbsolute(e,this._basePath,this._rootPath)),e=this._appendDefaultSearchParams(e),this._resolverHash[t]={src:e}}r[t]=this._resolverHash[t]}),e?r[t[0]]:r}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const e=t[0],r=this._preferredOrder.find(t=>t.params.format.includes(e.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}}class Kh{constructor(){this._detections=[],this._initialized=!1,this.resolver=new qh,this.loader=new Ah,this.cache=Th,this._backgroundLoader=new yh(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let e=t.manifest;"string"===typeof e&&(e=await this.load(e)),this.resolver.addManifest(e)}const e=t.texturePreference?.resolution??1,r="number"===typeof e?[e]:e;let n=[];if(t.texturePreference?.format){const e=t.texturePreference?.format;n="string"===typeof e?[e]:e;for(const t of this._detections)await t.test()||(n=await t.remove(n))}else for(const i of this._detections)await i.test()&&(n=await i.add(n));this.resolver.prefer({params:{format:n,resolution:r}})}add(t,e,r){this.resolver.add(t,e,r)}async load(t,e){this._initialized||await this.init();const r=wh(t),n=vh(t).map(t=>"string"!==typeof t?(this.resolver.add(t.src,t),t.src):t),i=this.resolver.resolve(n),s=await this._mapLoadToResolve(i,e);return r?s[n[0]]:s}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;"string"===typeof t&&(r=!0,t=[t]);const n=this.resolver.resolveBundle(t),i={},s=Object.keys(n);let o=0,a=0;const h=()=>{e?.(++o/a)},l=s.map(t=>{const e=n[t];return a+=Object.keys(e).length,this._mapLoadToResolve(e,h).then(e=>{i[t]=e})});return await Promise.all(l),r?i[t[0]]:i}async backgroundLoad(t){this._initialized||await this.init(),"string"===typeof t&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),"string"===typeof t&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(t=>{this._backgroundLoader.add(Object.values(t))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if("string"===typeof t)return Th.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=Th.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const i=await this.loader.load(r,e);this._backgroundLoader.active=!0;const s={};return r.forEach((t,e)=>{const r=i[t.src],o=[t.src];t.alias&&o.push(...t.alias),s[n[e]]=r,Th.set(o,r)}),s}async unload(t){this._initialized||await this.init();const e=vh(t).map(t=>"string"!==typeof t?t.src:t),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=vh(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map(t=>this._unloadFromResolved(e[t]));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(t=>{Th.remove(t.src)}),await this.loader.unload(e)}get detections(){return this._detections}get preferWorkers(){return Vh.config.preferWorkers}set preferWorkers(t){Vh.config.preferWorkers=t}}const Zh=new Kh;wn.handleByList(bn.LoadParser,Zh.loader.parsers).handleByList(bn.ResolveParser,Zh.resolver.parsers).handleByList(bn.CacheParser,Zh.cache.parsers).handleByList(bn.DetectionParser,Zh.detections);r(1148);const Qh={extension:bn.CacheParser,test:t=>Array.isArray(t)&&t.every(t=>t instanceof ws),getCacheableAssets:(t,e)=>{const r={};return t.forEach(t=>{e.forEach((e,n)=>{r[t+(0===n?"":n+1)]=e})}),r}};wn.add(Qh);const Jh={extension:{type:bn.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e=await E.ADAPTER.fetch(t).then(t=>t.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(t=>"avif"!==t)};wn.add(Jh);const tl={extension:{type:bn.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e=await E.ADAPTER.fetch(t).then(t=>t.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(t=>"webp"!==t)};wn.add(tl);const el=["png","jpg","jpeg"],rl={extension:{type:bn.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...el],remove:async t=>t.filter(t=>!el.includes(t))};wn.add(rl);const nl={extension:bn.ResolveParser,test:Vh.test,parse:t=>({resolution:parseFloat(E.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};wn.add(nl);const il=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};var sl=(t=>(t[t["COMPRESSED_RGB_S3TC_DXT1_EXT"]=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t["COMPRESSED_RGBA_S3TC_DXT1_EXT"]=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t["COMPRESSED_RGBA_S3TC_DXT3_EXT"]=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t["COMPRESSED_RGBA_S3TC_DXT5_EXT"]=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t["COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT"]=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t["COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT"]=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t["COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT"]=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t["COMPRESSED_SRGB_S3TC_DXT1_EXT"]=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t["COMPRESSED_R11_EAC"]=37488]="COMPRESSED_R11_EAC",t[t["COMPRESSED_SIGNED_R11_EAC"]=37489]="COMPRESSED_SIGNED_R11_EAC",t[t["COMPRESSED_RG11_EAC"]=37490]="COMPRESSED_RG11_EAC",t[t["COMPRESSED_SIGNED_RG11_EAC"]=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t["COMPRESSED_RGB8_ETC2"]=37492]="COMPRESSED_RGB8_ETC2",t[t["COMPRESSED_RGBA8_ETC2_EAC"]=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t["COMPRESSED_SRGB8_ETC2"]=37493]="COMPRESSED_SRGB8_ETC2",t[t["COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"]=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t["COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2"]=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t["COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2"]=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t["COMPRESSED_RGB_PVRTC_4BPPV1_IMG"]=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t["COMPRESSED_RGBA_PVRTC_4BPPV1_IMG"]=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t["COMPRESSED_RGB_PVRTC_2BPPV1_IMG"]=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t["COMPRESSED_RGBA_PVRTC_2BPPV1_IMG"]=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t["COMPRESSED_RGB_ETC1_WEBGL"]=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t["COMPRESSED_RGB_ATC_WEBGL"]=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t["COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL"]=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t["COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"]=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t["COMPRESSED_RGBA_ASTC_4x4_KHR"]=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(sl||{});const ol={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let al,hl;function ll(){hl={s3tc:al.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:al.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:al.getExtension("WEBGL_compressed_texture_etc"),etc1:al.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:al.getExtension("WEBGL_compressed_texture_pvrtc")||al.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:al.getExtension("WEBGL_compressed_texture_atc"),astc:al.getExtension("WEBGL_compressed_texture_astc")}}const ul={extension:{type:bn.DetectionParser,priority:2},test:async()=>{const t=E.ADAPTER.createCanvas(),e=t.getContext("webgl");return e?(al=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{hl||ll();const e=[];for(const r in hl){const t=hl[r];t&&e.push(r)}return[...e,...t]},remove:async t=>(hl||ll(),t.filter(t=>!(t in hl)))};wn.add(ul);class cl extends Gn{constructor(t,e={width:1,height:1,autoLoad:!0}){let r,n;"string"===typeof t?(r=t,n=new Uint8Array):(r=null,n=t),super(n,e),this.origin=r,this.buffer=n?new An(n):null,this.origin&&!1!==e.autoLoad&&this.load(),n?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const t=await fetch(this.origin),e=await t.blob(),r=await e.arrayBuffer();return this.data=new Uint32Array(r),this.buffer=new An(r),this.loaded=!0,this.onBlobLoaded(r),this.update(),this}}class dl extends cl{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=dl._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||dl._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,r){const n=t.gl,i=t.context.extensions[this._extension];if(!i)throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let s=0,o=this.levels;s<o;s++){const{levelID:t,levelWidth:e,levelHeight:r,levelBuffer:i}=this._levelBuffers[s];n.compressedTexImage2D(n.TEXTURE_2D,t,this.format,e,r,0,i)}return!0}onBlobLoaded(){this._levelBuffers=dl._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,e,r,n,i,s,o){const a=new Array(r);let h=t.byteOffset,l=s,u=o,c=l+n-1&~(n-1),d=u+i-1&~(i-1),f=c*d*ol[e];for(let p=0;p<r;p++)a[p]={levelID:p,levelWidth:r>1?l:c,levelHeight:r>1?u:d,levelBuffer:new Uint8Array(t.buffer,h,f)},h+=f,l=l>>1||1,u=u>>1||1,c=l+n-1&~(n-1),d=u+i-1&~(i-1),f=c*d*ol[e];return a}}const fl=4,pl=124,ml=32,gl=20,yl=542327876,_l={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},vl={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},xl={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};const bl=1,El=2,Tl=4,wl=64,Al=512,Sl=131072,Rl=827611204,Il=861165636,Cl=894720068,Pl=808540228,Ml=4,Dl={[Rl]:sl.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Il]:sl.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Cl]:sl.COMPRESSED_RGBA_S3TC_DXT5_EXT},Ol={[70]:sl.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:sl.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:sl.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:sl.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:sl.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:sl.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:sl.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:sl.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:sl.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Bl(t){const e=new Uint32Array(t),r=e[0];if(r!==yl)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(t,0,pl/Uint32Array.BYTES_PER_ELEMENT),i=n[_l.HEIGHT],s=n[_l.WIDTH],o=n[_l.MIPMAP_COUNT],a=new Uint32Array(t,_l.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,ml/Uint32Array.BYTES_PER_ELEMENT),h=a[bl];if(h&Tl){const r=a[vl.FOURCC];if(r!==Pl){const e=Dl[r],n=fl+pl,a=new Uint8Array(t,n),h=new dl(a,{format:e,width:s,height:i,levels:o});return[h]}const n=fl+pl,h=new Uint32Array(e.buffer,n,gl/Uint32Array.BYTES_PER_ELEMENT),l=h[xl.DXGI_FORMAT],u=h[xl.RESOURCE_DIMENSION],c=h[xl.MISC_FLAG],d=h[xl.ARRAY_SIZE],f=Ol[l];if(void 0===f)throw new Error(`DDSParser cannot parse texture data with DXGI format ${l}`);if(c===Ml)throw new Error("DDSParser does not support cubemap textures");if(6===u)throw new Error("DDSParser does not supported 3D texture data");const p=new Array,m=fl+pl+gl;if(1===d)p.push(new Uint8Array(t,m));else{const e=ol[f];let r=0,n=s,a=i;for(let t=0;t<o;t++){const t=Math.max(1,n+3&-4),i=Math.max(1,a+3&-4),s=t*i*e;r+=s,n>>>=1,a>>>=1}let h=m;for(let i=0;i<d;i++)p.push(new Uint8Array(t,h,r)),h+=r}return p.map(t=>new dl(t,{format:f,width:s,height:i,levels:o}))}if(h&wl)throw new Error("DDSParser does not support uncompressed texture data.");if(h&Al)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(h&Sl)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(h&El)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Fl=[171,75,84,88,32,49,49,187,13,10,26,10],Nl=67305985,Ll={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},kl=64,Ul={[l.UNSIGNED_BYTE]:1,[l.UNSIGNED_SHORT]:2,[l.INT]:4,[l.UNSIGNED_INT]:4,[l.FLOAT]:4,[l.HALF_FLOAT]:8},Gl={[a.RGBA]:4,[a.RGB]:3,[a.RG]:2,[a.RED]:1,[a.LUMINANCE]:1,[a.LUMINANCE_ALPHA]:2,[a.ALPHA]:1},jl={[l.UNSIGNED_SHORT_4_4_4_4]:2,[l.UNSIGNED_SHORT_5_5_5_1]:2,[l.UNSIGNED_SHORT_5_6_5]:2};function Hl(t,e,r=!1){const n=new DataView(e);if(!Xl(t,n))return null;const i=n.getUint32(Ll.ENDIANNESS,!0)===Nl,s=n.getUint32(Ll.GL_TYPE,i),o=n.getUint32(Ll.GL_FORMAT,i),a=n.getUint32(Ll.GL_INTERNAL_FORMAT,i),h=n.getUint32(Ll.PIXEL_WIDTH,i),u=n.getUint32(Ll.PIXEL_HEIGHT,i)||1,c=n.getUint32(Ll.PIXEL_DEPTH,i)||1,d=n.getUint32(Ll.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=n.getUint32(Ll.NUMBER_OF_FACES,i),p=n.getUint32(Ll.NUMBER_OF_MIPMAP_LEVELS,i),m=n.getUint32(Ll.BYTES_OF_KEY_VALUE_DATA,i);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==f)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==d)throw new Error("WebGL does not support array textures");const g=4,y=4,_=h+3&-4,v=u+3&-4,x=new Array(d);let b,E=h*u;if(0===s&&(E=_*v),b=0!==s?Ul[s]?Ul[s]*Gl[o]:jl[s]:ol[a],void 0===b)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=r?Wl(n,m,i):null,w=E*b;let A=w,S=h,R=u,I=_,C=v,P=kl+m;for(let l=0;l<p;l++){const t=n.getUint32(P,i);let r=P+4;for(let n=0;n<d;n++){let t=x[n];t||(t=x[n]=new Array(p)),t[l]={levelID:l,levelWidth:p>1||0!==s?S:I,levelHeight:p>1||0!==s?R:C,levelBuffer:new Uint8Array(e,r,A)},r+=A}P+=t+4,P=P%4!==0?P+4-P%4:P,S=S>>1||1,R=R>>1||1,I=S+g-1&~(g-1),C=R+y-1&~(y-1),A=I*C*b}return 0!==s?{uncompressed:x.map(t=>{let e=t[0].levelBuffer,r=!1;return s===l.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):s===l.UNSIGNED_INT?(r=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):s===l.INT&&(r=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new Gn(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:s,format:r?zl(o):o}}),kvData:T}:{compressed:x.map(t=>new dl(null,{format:a,width:h,height:u,levels:p,levelBuffers:t})),kvData:T}}function Xl(t,e){for(let r=0;r<Fl.length;r++)if(e.getUint8(r)!==Fl[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function zl(t){switch(t){case a.RGBA:return a.RGBA_INTEGER;case a.RGB:return a.RGB_INTEGER;case a.RG:return a.RG_INTEGER;case a.RED:return a.RED_INTEGER;default:return t}}function Wl(t,e,r){const n=new Map;let i=0;while(i<e){const s=t.getUint32(kl+i,r),o=kl+i+4,a=3-(s+3)%4;if(0===s||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let h=0;for(;h<s;h++)if(0===t.getUint8(o+h))break;if(-1===h){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const l=(new TextDecoder).decode(new Uint8Array(t.buffer,o,h)),u=new DataView(t.buffer,o+h+1,s-h-1);n.set(l,u),i+=4+s+a}return n}const $l={extension:{type:bn.LoadParser,priority:Sh.High},test(t){return _h(t,".dds")},async load(t,e,r){const n=await E.ADAPTER.fetch(t),i=await n.arrayBuffer(),s=Bl(i),o=s.map(n=>{const i=new Xn(n,{mipmap:f.OFF,alphaMode:p.NO_PREMULTIPLIED_ALPHA,resolution:xn(t),...e.data});return Xh(i,r,t)});return 1===o.length?o[0]:o},unload(t){Array.isArray(t)?t.forEach(t=>t.destroy(!0)):t.destroy(!0)}};wn.add($l);const Vl={extension:{type:bn.LoadParser,priority:Sh.High},test(t){return _h(t,".ktx")},async load(t,e,r){const n=await E.ADAPTER.fetch(t),i=await n.arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=Hl(t,i),h=s??o,l={mipmap:f.OFF,alphaMode:p.NO_PREMULTIPLIED_ALPHA,resolution:xn(t),...e.data},u=h.map(e=>{h===o&&Object.assign(l,{type:e.type,format:e.format});const n=new Xn(e,l);return n.ktxKeyValueData=a,Xh(n,r,t)});return 1===u.length?u[0]:u},unload(t){Array.isArray(t)?t.forEach(t=>t.destroy(!0)):t.destroy(!0)}};wn.add(Vl);const Yl={extension:bn.ResolveParser,test:t=>{const e=t.split("?")[0],r=e.split(".").pop();return["basis","ktx","dds"].includes(r)},parse:t=>{const e=t.split("?")[0],r=e.split(".").pop();if("ktx"===r){const e=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(e.some(e=>t.endsWith(e)))return{resolution:parseFloat(E.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e.find(e=>t.endsWith(e)),src:t}}return{resolution:parseFloat(E.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};wn.add(Yl);const ql=new ai,Kl=4,Zl=class{constructor(t){this.renderer=t}async image(t,e,r){const n=new Image;return n.src=await this.base64(t,e,r),n}async base64(t,e,r){const n=this.canvas(t);if(void 0!==n.toDataURL)return n.toDataURL(e,r);if(void 0!==n.convertToBlob){const t=await n.convertToBlob({type:e,quality:r});return await new Promise(e=>{const r=new FileReader;r.onload=()=>e(r.result),r.readAsDataURL(t)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(t,e){const r=this.renderer;let n,i,s=!1,o=!1;t&&(t instanceof As?i=t:(i=this.renderer.generateTexture(t),o=!0)),i?(n=i.baseTexture.resolution,e=e??i.frame,s=!1,r.renderTexture.bind(i)):(n=r.resolution,e||(e=ql,e.width=r.width,e.height=r.height),s=!0,r.renderTexture.bind(null));const a=Math.round(e.width*n),h=Math.round(e.height*n);let l=new fn(a,h,1);const u=new Uint8Array(Kl*a*h),c=r.gl;c.readPixels(Math.round(e.x*n),Math.round(e.y*n),a,h,c.RGBA,c.UNSIGNED_BYTE,u);const d=l.context.getImageData(0,0,a,h);if(Zl.arrayPostDivide(u,d.data),l.context.putImageData(d,0,0),s){const t=new fn(l.width,l.height,1);t.context.scale(1,-1),t.context.drawImage(l.canvas,0,-h),l.destroy(),l=t}return o&&i.destroy(!0),l.canvas}pixels(t,e){const r=this.renderer;let n,i,s=!1;t&&(t instanceof As?i=t:(i=this.renderer.generateTexture(t),s=!0)),i?(n=i.baseTexture.resolution,e=e??i.frame,r.renderTexture.bind(i)):(n=r.resolution,e||(e=ql,e.width=r.width,e.height=r.height),r.renderTexture.bind(null));const o=Math.round(e.width*n),a=Math.round(e.height*n),h=new Uint8Array(Kl*o*a),l=r.gl;return l.readPixels(Math.round(e.x*n),Math.round(e.y*n),o,a,l.RGBA,l.UNSIGNED_BYTE,h),s&&i.destroy(!0),Zl.arrayPostDivide(h,h),h}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let r=0;r<t.length;r+=4){const n=e[r+3]=t[r+3];0!==n?(e[r]=Math.round(Math.min(255*t[r]/n,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/n,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/n,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}}};let Ql=Zl;Ql.extension={name:"extract",type:bn.RendererSystem},wn.add(Ql);const Jl={build(t){const e=t.points;let r,n,i,s,o,a;if(t.type===ii.CIRC){const e=t.shape;r=e.x,n=e.y,o=a=e.radius,i=s=0}else if(t.type===ii.ELIP){const e=t.shape;r=e.x,n=e.y,o=e.width,a=e.height,i=s=0}else{const e=t.shape,h=e.width/2,l=e.height/2;r=e.x+h,n=e.y+l,o=a=Math.max(0,Math.min(e.radius,Math.min(h,l))),i=h-o,s=l-a}if(!(o>=0&&a>=0&&i>=0&&s>=0))return void(e.length=0);const h=Math.ceil(2.3*Math.sqrt(o+a)),l=8*h+(i?4:0)+(s?4:0);if(e.length=l,0===l)return;if(0===h)return e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,void(e[5]=e[7]=n-s);let u=0,c=4*h+(i?2:0)+2,d=c,f=l;{const t=i+o,a=s,h=r+t,l=r-t,p=n+a;if(e[u++]=h,e[u++]=p,e[--c]=p,e[--c]=l,s){const t=n-a;e[d++]=l,e[d++]=t,e[--f]=t,e[--f]=h}}for(let p=1;p<h;p++){const t=Math.PI/2*(p/h),l=i+Math.cos(t)*o,m=s+Math.sin(t)*a,g=r+l,y=r-l,_=n+m,v=n-m;e[u++]=g,e[u++]=_,e[--c]=_,e[--c]=y,e[d++]=y,e[d++]=v,e[--f]=v,e[--f]=g}{const t=i,o=s+a,h=r+t,l=r-t,c=n+o,d=n-o;e[u++]=h,e[u++]=c,e[--f]=d,e[--f]=h,i&&(e[u++]=l,e[u++]=c,e[--f]=d,e[--f]=l)}},triangulate(t,e){const r=t.points,n=e.points,i=e.indices;if(0===r.length)return;let s=n.length/2;const o=s;let a,h;if(t.type!==ii.RREC){const e=t.shape;a=e.x,h=e.y}else{const e=t.shape;a=e.x+e.width/2,h=e.y+e.height/2}const l=t.matrix;n.push(t.matrix?l.a*a+l.c*h+l.tx:a,t.matrix?l.b*a+l.d*h+l.ty:h),s++,n.push(r[0],r[1]);for(let u=2;u<r.length;u+=2)n.push(r[u],r[u+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function tu(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let i=0,s=t[r-2],o=t[r-1];i<r;i+=2){const e=t[i],r=t[i+1];n+=(e-s)*(r+o),s=e,o=r}if(!e&&n>0||e&&n<=0){const e=r/2;for(let n=e+e%2;n<r;n+=2){const e=r-n-2,i=r-n-1,s=n,o=n+1;[t[e],t[s]]=[t[s],t[e]],[t[i],t[o]]=[t[o],t[i]]}}}const eu={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,i=e.points,s=e.indices;if(r.length>=6){tu(r,!1);const t=[];for(let i=0;i<n.length;i++){const e=n[i];tu(e.points,!0),t.push(r.length/2),r=r.concat(e.points)}const e=X(r,t,2);if(!e)return;const o=i.length/2;for(let r=0;r<e.length;r+=3)s.push(e[r]+o),s.push(e[r+1]+o),s.push(e[r+2]+o);for(let n=0;n<r.length;n++)i.push(r[n])}}},ru={build(t){const e=t.shape,r=e.x,n=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(t,e){const r=t.points,n=e.points;if(0===r.length)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},nu={build(t){Jl.build(t)},triangulate(t,e){Jl.triangulate(t,e)}};var iu=(t=>(t["MITER"]="miter",t["BEVEL"]="bevel",t["ROUND"]="round",t))(iu||{}),su=(t=>(t["BUTT"]="butt",t["ROUND"]="round",t["SQUARE"]="square",t))(su||{});const ou={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class au{static curveTo(t,e,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],h=a-e,l=o-t,u=n-e,c=r-t,d=Math.abs(h*c-l*u);if(d<1e-8||0===i)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;const f=h*h+l*l,p=u*u+c*c,m=h*u+l*c,g=i*Math.sqrt(f)/d,y=i*Math.sqrt(p)/d,_=g*m/f,v=y*m/p,x=g*c+y*l,b=g*u+y*h,E=l*(y+_),T=h*(y+_),w=c*(g+v),A=u*(g+v),S=Math.atan2(T-b,E-x),R=Math.atan2(A-b,w-x);return{cx:x+t,cy:b+e,radius:i,startAngle:S,endAngle:R,anticlockwise:l*u>c*h}}static arc(t,e,r,n,i,s,o,a,h){const l=o-s,u=ou._segmentsCount(Math.abs(l)*i,40*Math.ceil(Math.abs(l)/ei)),c=l/(2*u),d=2*c,f=Math.cos(c),p=Math.sin(c),m=u-1,g=m%1/m;for(let y=0;y<=m;++y){const t=y+g*y,e=c+s+d*t,o=Math.cos(e),a=-Math.sin(e);h.push((f*o+p*a)*i+r,(f*-a+p*o)*i+n)}}}class hu{static curveLength(t,e,r,n,i,s,o,a){const h=10;let l=0,u=0,c=0,d=0,f=0,p=0,m=0,g=0,y=0,_=0,v=0,x=t,b=e;for(let E=1;E<=h;++E)u=E/h,c=u*u,d=c*u,f=1-u,p=f*f,m=p*f,g=m*t+3*p*u*r+3*f*c*i+d*o,y=m*e+3*p*u*n+3*f*c*s+d*a,_=x-g,v=b-y,x=g,b=y,l+=Math.sqrt(_*_+v*v);return l}static curveTo(t,e,r,n,i,s,o){const a=o[o.length-2],h=o[o.length-1];o.length-=2;const l=ou._segmentsCount(hu.curveLength(a,h,t,e,r,n,i,s));let u=0,c=0,d=0,f=0,p=0;o.push(a,h);for(let m=1,g=0;m<=l;++m)g=m/l,u=1-g,c=u*u,d=c*u,f=g*g,p=f*g,o.push(d*a+3*c*g*t+3*u*f*r+p*i,d*h+3*c*g*e+3*u*f*n+p*s)}}function lu(t,e,r,n,i,s,o,a){const h=t-r*i,l=e-n*i,u=t+r*s,c=e+n*s;let d,f;o?(d=n,f=-r):(d=-n,f=r);const p=h+d,m=l+f,g=u+d,y=c+f;return a.push(p,m),a.push(g,y),2}function uu(t,e,r,n,i,s,o,a){const h=r-t,l=n-e;let u=Math.atan2(h,l),c=Math.atan2(i-t,s-e);a&&u<c?u+=2*Math.PI:!a&&u>c&&(c+=2*Math.PI);let d=u;const f=c-u,p=Math.abs(f),m=Math.sqrt(h*h+l*l),g=1+(15*p*Math.sqrt(m)/Math.PI|0),y=f/g;if(d+=y,a){o.push(t,e),o.push(r,n);for(let r=1,n=d;r<g;r++,n+=y)o.push(t,e),o.push(t+Math.sin(n)*m,e+Math.cos(n)*m);o.push(t,e),o.push(i,s)}else{o.push(r,n),o.push(t,e);for(let r=1,n=d;r<g;r++,n+=y)o.push(t+Math.sin(n)*m,e+Math.cos(n)*m),o.push(t,e);o.push(i,s),o.push(t,e)}return 2*g}function cu(t,e){const r=t.shape;let n=t.points||r.points.slice();const i=e.closePointEps;if(0===n.length)return;const s=t.lineStyle,o=new si(n[0],n[1]),a=new si(n[n.length-2],n[n.length-1]),h=r.type!==ii.POLY||r.closeStroke,l=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(h){n=n.slice(),l&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const t=.5*(o.x+a.x),e=.5*(a.y+o.y);n.unshift(t,e),n.push(t,e)}const u=e.points,c=n.length/2;let d=n.length;const f=u.length/2,p=s.width/2,m=p*p,g=s.miterLimit*s.miterLimit;let y=n[0],_=n[1],v=n[2],x=n[3],b=0,E=0,T=-(_-x),w=y-v,A=0,S=0,R=Math.sqrt(T*T+w*w);T/=R,w/=R,T*=p,w*=p;const I=s.alignment,C=2*(1-I),P=2*I;h||(s.cap===su.ROUND?d+=uu(y-T*(C-P)*.5,_-w*(C-P)*.5,y-T*C,_-w*C,y+T*P,_+w*P,u,!0)+2:s.cap===su.SQUARE&&(d+=lu(y,_,T,w,C,P,!0,u))),u.push(y-T*C,_-w*C),u.push(y+T*P,_+w*P);for(let O=1;O<c-1;++O){y=n[2*(O-1)],_=n[2*(O-1)+1],v=n[2*O],x=n[2*O+1],b=n[2*(O+1)],E=n[2*(O+1)+1],T=-(_-x),w=y-v,R=Math.sqrt(T*T+w*w),T/=R,w/=R,T*=p,w*=p,A=-(x-E),S=v-b,R=Math.sqrt(A*A+S*S),A/=R,S/=R,A*=p,S*=p;const t=v-y,e=_-x,r=v-b,i=E-x,o=t*r+e*i,a=e*r-i*t,h=a<0;if(Math.abs(a)<.001*Math.abs(o)){u.push(v-T*C,x-w*C),u.push(v+T*P,x+w*P),o>=0&&(s.join===iu.ROUND?d+=uu(v,x,v-T*C,x-w*C,v-A*C,x-S*C,u,!1)+4:d+=2,u.push(v-A*P,x-S*P),u.push(v+A*C,x+S*C));continue}const l=(-T+y)*(-w+x)-(-T+v)*(-w+_),c=(-A+b)*(-S+x)-(-A+v)*(-S+E),f=(t*c-r*l)/a,I=(i*l-e*c)/a,M=(f-v)*(f-v)+(I-x)*(I-x),D=v+(f-v)*C,B=x+(I-x)*C,F=v-(f-v)*P,N=x-(I-x)*P,L=Math.min(t*t+e*e,r*r+i*i),k=h?C:P,U=L+k*k*m,G=M<=U;G?s.join===iu.BEVEL||M/m>g?(h?(u.push(D,B),u.push(v+T*P,x+w*P),u.push(D,B),u.push(v+A*P,x+S*P)):(u.push(v-T*C,x-w*C),u.push(F,N),u.push(v-A*C,x-S*C),u.push(F,N)),d+=2):s.join===iu.ROUND?h?(u.push(D,B),u.push(v+T*P,x+w*P),d+=uu(v,x,v+T*P,x+w*P,v+A*P,x+S*P,u,!0)+4,u.push(D,B),u.push(v+A*P,x+S*P)):(u.push(v-T*C,x-w*C),u.push(F,N),d+=uu(v,x,v-T*C,x-w*C,v-A*C,x-S*C,u,!1)+4,u.push(v-A*C,x-S*C),u.push(F,N)):(u.push(D,B),u.push(F,N)):(u.push(v-T*C,x-w*C),u.push(v+T*P,x+w*P),s.join===iu.ROUND?d+=h?uu(v,x,v+T*P,x+w*P,v+A*P,x+S*P,u,!0)+2:uu(v,x,v-T*C,x-w*C,v-A*C,x-S*C,u,!1)+2:s.join===iu.MITER&&M/m<=g&&(h?(u.push(F,N),u.push(F,N)):(u.push(D,B),u.push(D,B)),d+=2),u.push(v-A*C,x-S*C),u.push(v+A*P,x+S*P),d+=2)}y=n[2*(c-2)],_=n[2*(c-2)+1],v=n[2*(c-1)],x=n[2*(c-1)+1],T=-(_-x),w=y-v,R=Math.sqrt(T*T+w*w),T/=R,w/=R,T*=p,w*=p,u.push(v-T*C,x-w*C),u.push(v+T*P,x+w*P),h||(s.cap===su.ROUND?d+=uu(v-T*(C-P)*.5,x-w*(C-P)*.5,v-T*C,x-w*C,v+T*P,x+w*P,u,!1)+2:s.cap===su.SQUARE&&(d+=lu(v,x,T,w,C,P,!1,u)));const M=e.indices,D=ou.epsilon*ou.epsilon;for(let O=f;O<d+f-2;++O)y=u[2*O],_=u[2*O+1],v=u[2*(O+1)],x=u[2*(O+1)+1],b=u[2*(O+2)],E=u[2*(O+2)+1],Math.abs(y*(x-E)+v*(E-_)+b*(_-x))<D||M.push(O,O+1,O+2)}function du(t,e){let r=0;const n=t.shape,i=t.points||n.points,s=n.type!==ii.POLY||n.closeStroke;if(0===i.length)return;const o=e.points,a=e.indices,h=i.length/2,l=o.length/2;let u=l;for(o.push(i[0],i[1]),r=1;r<h;r++)o.push(i[2*r],i[2*r+1]),a.push(u,u+1),u++;s&&a.push(u,l)}function fu(t,e){t.lineStyle.native?du(t,e):cu(t,e)}class pu{static curveLength(t,e,r,n,i,s){const o=t-2*r+i,a=e-2*n+s,h=2*r-2*t,l=2*n-2*e,u=4*(o*o+a*a),c=4*(o*h+a*l),d=h*h+l*l,f=2*Math.sqrt(u+c+d),p=Math.sqrt(u),m=2*u*p,g=2*Math.sqrt(d),y=c/p;return(m*f+p*c*(f-g)+(4*d*u-c*c)*Math.log((2*p+y+f)/(y+g)))/(4*m)}static curveTo(t,e,r,n,i){const s=i[i.length-2],o=i[i.length-1],a=ou._segmentsCount(pu.curveLength(s,o,t,e,r,n));let h=0,l=0;for(let u=1;u<=a;++u){const c=u/a;h=s+(t-s)*c,l=o+(e-o)*c,i.push(h+(t+(r-t)*c-h)*c,l+(e+(n-e)*c-l)*c)}}}const mu={[ii.POLY]:eu,[ii.CIRC]:Jl,[ii.ELIP]:Jl,[ii.RECT]:ru,[ii.RREC]:nu},gu=[],yu=[];class _u{constructor(t,e=null,r=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new _u(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class vu{constructor(){this.reset()}begin(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const xu=new si,bu=class extends ti{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new da,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),yu.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),gu.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,n=null){const i=new _u(t,e,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new _u(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const n=e[r];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,xu):xu.copyFrom(t),n.shape.contains(xu.x,xu.y)))){let t=!1;if(n.holes)for(let e=0;e<n.holes.length;e++){const r=n.holes[e];if(r.shape.contains(xu.x,xu.y)){t=!0;break}}if(!t)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const i=e[a],s=i.fillStyle,o=i.lineStyle,h=mu[i.type];h.build(i),i.matrix&&this.transformPoints(i.points,i.matrix),(s.visible||o.visible)&&this.processHoles(i.holes);for(let e=0;e<2;e++){const a=0===e?s:o;if(!a.visible)continue;const h=a.texture.baseTexture,l=this.indices.length,u=this.points.length/2;h.wrapMode=d.REPEAT,0===e?this.processFill(i):this.processLine(i);const c=this.points.length/2-u;0!==c&&(r&&!this._compareStyles(n,a)&&(r.end(l,u),r=null),r||(r=gu.pop()||new vu,r.begin(a,l,u),this.batches.push(r),n=a),this.addUvs(this.points,t,a.texture,u,c,a.matrix))}}const i=this.indices.length,s=this.points.length/2;if(r&&r.end(i,s),0===this.batches.length)return void(this.batchable=!0);const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native===!!e.native))}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const e=this.graphicsData[t],r=e.fillStyle,n=e.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const r=t[e];for(let t=0;t<r.size;t++){const e=r.start+t;this.indicesUint16[e]=this.indicesUint16[e]-r.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*bu.BATCHABLE_SIZE}buildDrawCalls(){let t=++Xn._globalBatch;for(let o=0;o<this.drawCalls.length;o++)this.drawCalls[o].texArray.clear(),yu.push(this.drawCalls[o]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let n=yu.pop();n||(n=new zn,n.texArray=new ts),n.texArray.count=0,n.start=0,n.size=0,n.type=o.TRIANGLES;let i=0,s=null,a=0,h=!1,l=o.TRIANGLES,u=0;this.drawCalls.push(n);for(let c=0;c<this.batches.length;c++){const f=this.batches[c],p=8,m=f.style,g=m.texture.baseTexture;h!==!!m.native&&(h=!!m.native,l=h?o.LINES:o.TRIANGLES,s=null,i=p,t++),s!==g&&(s=g,g._batchEnabled!==t&&(i===p&&(t++,i=0,n.size>0&&(n=yu.pop(),n||(n=new zn,n.texArray=new ts),this.drawCalls.push(n)),n.start=u,n.size=0,n.texArray.count=0,n.type=l),g.touched=1,g._batchEnabled=t,g._batchLocation=i,g.wrapMode=d.REPEAT,n.texArray.elements[n.texArray.count++]=g,i++)),n.size+=f.size,u+=f.size,a=g._batchLocation,this.addColors(e,m.color,m.alpha,f.attribSize,f.attribStart),this.addTextureIds(r,a,f.attribSize,f.attribStart)}Xn._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(3*t.length*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=r[h],s[a++]=n[h];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){if(t.holes.length)eu.triangulate(t,this);else{const e=mu[t.type];e.triangulate(t,this)}}processLine(t){fu(t,this);for(let e=0;e<t.holes.length;e++)fu(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e],n=mu[r.type];n.build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const n=t[2*r],i=t[2*r+1];t[2*r]=e.a*n+e.c*i+e.tx,t[2*r+1]=e.b*n+e.d*i+e.ty}}addColors(t,e,r,n,i=0){const s=(e>>16)+(65280&e)+((255&e)<<16),o=Kr(s,r);t.length=Math.max(t.length,i+n);for(let a=0;a<n;a++)t[i+a]=o}addTextureIds(t,e,r,n=0){t.length=Math.max(t.length,n+r);for(let i=0;i<r;i++)t[n+i]=e}addUvs(t,e,r,n,i,s=null){let o=0;const a=e.length,h=r.frame;while(o<i){let r=t[2*(n+o)],i=t[2*(n+o)+1];if(s){const t=s.a*r+s.c*i+s.tx;i=s.b*r+s.d*i+s.ty,r=t}o++,e.push(r/h.width,i/h.height)}const l=r.baseTexture;(h.width<l.width||h.height<l.height)&&this.adjustUvs(e,r,a,i)}adjustUvs(t,e,r,n){const i=e.baseTexture,s=1e-6,o=r+2*n,a=e.frame,h=a.width/i.width,l=a.height/i.height;let u=a.x/a.width,c=a.y/a.height,d=Math.floor(t[r]+s),f=Math.floor(t[r+1]+s);for(let p=r+2;p<o;p+=2)d=Math.min(d,Math.floor(t[p]+s)),f=Math.min(f,Math.floor(t[p+1]+s));u-=d,c-=f;for(let p=r;p<o;p+=2)t[p]=(t[p]+u)*h,t[p+1]=(t[p+1]+c)*l}};let Eu=bu;Eu.BATCHABLE_SIZE=100;class Tu{constructor(){this.color=16777215,this.alpha=1,this.texture=ws.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Tu;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ws.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class wu extends Tu{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=su.BUTT,this.join=iu.MITER,this.miterLimit=10}clone(){const t=new wu;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Au=new Float32Array(3),Su={},Ru=class extends _a{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Tu,this._lineStyle=new wu,this._matrix=null,this._holeMode=!1,this.state=Fn.for2d(),this._geometry=t||new Eu,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=s.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ru(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r=1,n=.5,i=!1){return"number"===typeof t&&(t={width:t,color:e,alpha:r,alignment:n,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:ws.WHITE,color:t?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:su.BUTT,join:iu.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new ui,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new ui,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,n){this._initCurve();const i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),pu.curveTo(t,e,r,n,i),this}bezierCurveTo(t,e,r,n,i,s){return this._initCurve(),hu.curveTo(t,e,r,n,i,s,this.currentPath.points),this}arcTo(t,e,r,n,i){this._initCurve(t,e);const s=this.currentPath.points,o=au.curveTo(t,e,r,n,i,s);if(o){const{cx:t,cy:e,radius:r,startAngle:n,endAngle:i,anticlockwise:s}=o;this.arc(t,e,r,n,i,s)}return this}arc(t,e,r,n,i,s=!1){if(n===i)return this;!s&&i<=n?i+=ei:s&&n<=i&&(n+=ei);const o=i-n;if(0===o)return this;const a=t+Math.cos(n)*r,h=e+Math.sin(n)*r,l=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const t=Math.abs(u[u.length-2]-a),e=Math.abs(u[u.length-1]-h);t<l&&e<l||u.push(a,h)}else this.moveTo(a,h),u=this.currentPath.points;return au.arc(a,h,t,e,r,n,i,s,u),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:ws.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:ws.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,n){return this.drawShape(new ai(t,e,r,n))}drawRoundedRect(t,e,r,n,i){return this.drawShape(new ci(t,e,r,n,i))}drawCircle(t,e,r){return this.drawShape(new hi(t,e,r))}drawEllipse(t,e,r,n){return this.drawShape(new li(t,e,r,n))}drawPolygon(...t){let e,r=!0;const n=t[0];n.points?(r=n.closeStroke,e=n.points):e=Array.isArray(t[0])?t[0]:t;const i=new ui(e);return i.closeStroke=r,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===ii.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let n=0;n<r;n++){const r=t.batches[n],i=r.style.color,s=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),o=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),a=new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),h={vertexData:s,blendMode:e,indices:a,uvs:o,_batchRGB:Xr(i),_tintRGB:i,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=h}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,n=this.tint,i=this.worldAlpha,s=e.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*i,s.tint[1]=(n>>8&255)/255*i,s.tint[2]=(255&n)/255*i,s.tint[3]=i,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,r.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:r,type:n,size:i,start:s}=e,o=r.count;for(let a=0;a<o;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(n,i,s)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!Su[r]){const{maxTextures:e}=t.plugins[r],n=new Int32Array(e);for(let t=0;t<e;t++)n[t]=t;const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new di,default:Zi.from({uSamplers:n},!0)},s=t.plugins[r]._shader.program;Su[r]=new Qi(s,i)}e=Su[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:n,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,r,n,i)}containsPoint(t){return this.worldTransform.applyInverse(t,Ru._TEMP_POINT),this._geometry.containsPoint(Ru._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=Xr(this.tint,Au);for(let e=0;e<this.batches.length;e++){const r=this.batches[e],n=r._batchRGB,i=t[0]*n[0]*255,s=t[1]*n[1]*255,o=t[2]*n[2]*255,a=(i<<16)+(s<<8)+(0|o);r._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty,h=this._geometry.points,l=this.vertexData;let u=0;for(let c=0;c<h.length;c+=2){const t=h[c],e=h[c+1];l[u++]=r*t+i*e+o,l[u++]=s*e+n*t+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let Iu=Ru;Iu.curves=ou,Iu._TEMP_POINT=new si;r(1806);class Cu{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const Pu=new si,Mu=new ui,Du=class extends _a{constructor(t,e,r,n=o.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||Fn.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=E.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data,r=this.shader;r.batchable&&this.drawMode===o.TRIANGLES&&e.length<2*Du.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const t=this.geometry,e=t.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,h=i.d,l=i.tx,u=i.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const t=r[2*d],e=r[2*d+1];c[2*d]=s*t+a*e+l,c[2*d+1]=o*t+h*e+u}if(this._roundPixels){const t=E.RESOLUTION;for(let e=0;e<c.length;++e)c[e]=Math.round(c[e]*t)/t}this.vertexDirty=n}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Cu(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Pu);const e=this.geometry.getBuffer("aVertexPosition").data,r=Mu.points,n=this.geometry.getIndex().data,i=n.length,s=4===this.drawMode?3:1;for(let o=0;o+2<i;o+=s){const t=2*n[o],i=2*n[o+1],s=2*n[o+2];if(r[0]=e[t],r[1]=e[t+1],r[2]=e[i],r[3]=e[i+1],r[4]=e[s],r[5]=e[s+1],Mu.contains(Pu.x,Pu.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Ou=Du;Ou.BATCHABLE_SIZE=100;class Bu extends Jn{constructor(t,e,r){super();const n=new $n(t),i=new $n(e,!0),s=new $n(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,l.FLOAT).addAttribute("aTextureCoord",i,2,!1,l.FLOAT).addIndex(s),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var Fu="varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n",Nu="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n";class Lu extends Qi{constructor(t,e){const r={uSampler:t,alpha:1,uTextureMatrix:di.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(r,e.uniforms),super(e.program||qi.from(Nu,Fu),r),this._colorDirty=!1,this.uvMatrix=new Us(t),this.batchable=void 0===e.program,this.pluginName=e.pluginName,this.tint=e.tint,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!==!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture;Zr(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ku{constructor(t,e,r){this.geometry=new Jn,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let r=t[n];r={attributeName:r.attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||l.FLOAT,offset:r.offset},e[n]?this.dynamicProperties.push(r):this.staticProperties.push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new $n(Qr(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let s=0;s<this.dynamicProperties.length;++s){const t=this.dynamicProperties[s];t.offset=e,e+=t.size,this.dynamicStride+=t.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new $n(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let s=0;s<this.staticProperties.length;++s){const t=this.staticProperties[s];t.offset=n,n+=t.size,this.staticStride+=t.size}const i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new $n(this.staticData,!0,!1);for(let s=0;s<this.dynamicProperties.length;++s){const e=this.dynamicProperties[s];t.addAttribute(e.attributeName,this.dynamicBuffer,0,e.type===l.UNSIGNED_BYTE,e.type,4*this.dynamicStride,4*e.offset)}for(let s=0;s<this.staticProperties.length;++s){const e=this.staticProperties[s];t.addAttribute(e.attributeName,this.staticBuffer,0,e.type===l.UNSIGNED_BYTE,e.type,4*this.staticStride,4*e.offset)}}uploadDynamic(t,e,r){for(let n=0;n<this.dynamicProperties.length;n++){const i=this.dynamicProperties[n];i.uploadFunction(t,e,r,i.type===l.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,r){for(let n=0;n<this.staticProperties.length;n++){const i=this.staticProperties[n];i.uploadFunction(t,e,r,i.type===l.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var Uu="varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",Gu="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n";class ju extends ns{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new di,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:l.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Qi.from(Gu,Uu,{}),this.state=Fn.for2d()}render(t){const e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer;let s=e.length;if(0===s)return;s>r&&!t.autoResize&&(s=r);let o=t._buffers;o||(o=t._buffers=this.generateBuffers(t));const a=e[0]._texture.baseTexture,h=a.alphaMode>0;this.state.blendMode=Yr(t.blendMode,h),i.state.set(this.state);const l=i.gl,u=t.worldTransform.copyTo(this.tempMatrix);u.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=qr(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);let c=!1;for(let d=0,f=0;d<s;d+=n,f+=1){let r=s-d;r>n&&(r=n),f>=o.length&&o.push(this._generateOneMoreBuffer(t));const a=o[f];a.uploadDynamic(e,d,r);const h=t._bufferUpdateIDs[f]||0;c=c||a._updateID<h,c&&(a._updateID=t._updateID,a.uploadStatic(e,d,r)),i.geometry.bind(a.geometry),l.drawElements(l.TRIANGLES,6*r,l.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],r=t._maxSize,n=t._batchSize,i=t._properties;for(let s=0;s<r;s+=n)e.push(new ku(this.properties,i,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,r=t._properties;return new ku(this.properties,r,e)}uploadVertices(t,e,r,n,i,s){let o=0,a=0,h=0,l=0;for(let u=0;u<r;++u){const r=t[e+u],c=r._texture,d=r.scale.x,f=r.scale.y,p=c.trim,m=c.orig;p?(a=p.x-r.anchor.x*m.width,o=a+p.width,l=p.y-r.anchor.y*m.height,h=l+p.height):(o=m.width*(1-r.anchor.x),a=m.width*-r.anchor.x,h=m.height*(1-r.anchor.y),l=m.height*-r.anchor.y),n[s]=a*d,n[s+1]=l*f,n[s+i]=o*d,n[s+i+1]=l*f,n[s+2*i]=o*d,n[s+2*i+1]=h*f,n[s+3*i]=a*d,n[s+3*i+1]=h*f,s+=4*i}}uploadPosition(t,e,r,n,i,s){for(let o=0;o<r;o++){const r=t[e+o].position;n[s]=r.x,n[s+1]=r.y,n[s+i]=r.x,n[s+i+1]=r.y,n[s+2*i]=r.x,n[s+2*i+1]=r.y,n[s+3*i]=r.x,n[s+3*i+1]=r.y,s+=4*i}}uploadRotation(t,e,r,n,i,s){for(let o=0;o<r;o++){const r=t[e+o].rotation;n[s]=r,n[s+i]=r,n[s+2*i]=r,n[s+3*i]=r,s+=4*i}}uploadUvs(t,e,r,n,i,s){for(let o=0;o<r;++o){const r=t[e+o]._texture._uvs;r?(n[s]=r.x0,n[s+1]=r.y0,n[s+i]=r.x1,n[s+i+1]=r.y1,n[s+2*i]=r.x2,n[s+2*i+1]=r.y2,n[s+3*i]=r.x3,n[s+3*i+1]=r.y3,s+=4*i):(n[s]=0,n[s+1]=0,n[s+i]=0,n[s+i+1]=0,n[s+2*i]=0,n[s+2*i+1]=0,n[s+3*i]=0,n[s+3*i+1]=0,s+=4*i)}}uploadTint(t,e,r,n,i,s){for(let o=0;o<r;++o){const r=t[e+o],a=r._texture.baseTexture.alphaMode>0,h=r.alpha,l=h<1&&a?Kr(r._tintRGB,h):r._tintRGB+(255*h<<24);n[s]=l,n[s+i]=l,n[s+2*i]=l,n[s+3*i]=l,s+=4*i}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ju.extension={name:"particle",type:bn.RendererPlugin},wn.add(ju);var Hu=(t=>(t[t["LINEAR_VERTICAL"]=0]="LINEAR_VERTICAL",t[t["LINEAR_HORIZONTAL"]=1]="LINEAR_HORIZONTAL",t))(Hu||{});const Xu={willReadFrequently:!0},zu=class{static get experimentalLetterSpacingSupported(){let t=zu._experimentalLetterSpacingSupported;if(void 0!==t){const e=E.ADAPTER.getCanvasRenderingContext2D().prototype;t=zu._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,r,n,i,s,o,a,h){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}static measureText(t,e,r,n=zu._canvas){r=void 0===r||null===r?e.wordWrap:r;const i=e.toFontString(),s=zu.measureFont(i);0===s.fontSize&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const o=n.getContext("2d",Xu);o.font=i;const a=r?zu.wordWrap(t,e,n):t,h=a.split(/(?:\r\n|\r|\n)/),l=new Array(h.length);let u=0;for(let p=0;p<h.length;p++){const t=zu._measureText(h[p],e.letterSpacing,o);l[p]=t,u=Math.max(u,t)}let c=u+e.strokeThickness;e.dropShadow&&(c+=e.dropShadowDistance);const d=e.lineHeight||s.fontSize+e.strokeThickness;let f=Math.max(d,s.fontSize+2*e.strokeThickness)+(h.length-1)*(d+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new zu(t,e,c,f,h,l,d+e.leading,u,s)}static _measureText(t,e,r){let n=!1;zu.experimentalLetterSpacingSupported&&(zu.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let i=r.measureText(t).width;return i>0&&(n?i-=e:i+=(zu.graphemeSegmenter(t).length-1)*e),i}static wordWrap(t,e,r=zu._canvas){const n=r.getContext("2d",Xu);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:h,whiteSpace:l}=e,u=zu.collapseSpaces(l),c=zu.collapseNewlines(l);let d=!u;const f=e.wordWrapWidth+h,p=zu.tokenize(t);for(let m=0;m<p.length;m++){let t=p[m];if(zu.isNewline(t)){if(!c){o+=zu.addLine(s),d=!u,s="",i=0;continue}t=" "}if(u){const e=zu.isBreakingSpace(t),r=zu.isBreakingSpace(s[s.length-1]);if(e&&r)continue}const r=zu.getFromCache(t,h,a,n);if(r>f)if(""!==s&&(o+=zu.addLine(s),s="",i=0),zu.canBreakWords(t,e.breakWords)){const r=zu.wordWrapSplit(t);for(let l=0;l<r.length;l++){let u=r[l],c=u,p=1;while(r[l+p]){const n=r[l+p];if(zu.canBreakChars(c,n,t,l,e.breakWords))break;u+=n,c=n,p++}l+=p-1;const m=zu.getFromCache(u,h,a,n);m+i>f&&(o+=zu.addLine(s),d=!1,s="",i=0),s+=u,i+=m}}else{s.length>0&&(o+=zu.addLine(s),s="",i=0);const e=m===p.length-1;o+=zu.addLine(t,!e),d=!1,s="",i=0}else r+i>f&&(d=!1,o+=zu.addLine(s),s="",i=0),(s.length>0||!zu.isBreakingSpace(t)||d)&&(s+=t,i+=r)}return o+=zu.addLine(s,!1),o}static addLine(t,e=!0){return t=zu.trimRight(t),t=e?`${t}\n`:t,t}static getFromCache(t,e,r,n){let i=r[t];return"number"!==typeof i&&(i=zu._measureText(t,e,n)+e,r[t]=i),i}static collapseSpaces(t){return"normal"===t||"pre-line"===t}static collapseNewlines(t){return"normal"===t}static trimRight(t){if("string"!==typeof t)return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!zu.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static isNewline(t){return"string"===typeof t&&zu._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return"string"===typeof t&&zu._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let r="";if("string"!==typeof t)return e;for(let n=0;n<t.length;n++){const i=t[n],s=t[n+1];zu.isBreakingSpace(i,s)||zu.isNewline(i)?(""!==r&&(e.push(r),r=""),e.push(i)):r+=i}return""!==r&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,n,i){return!0}static wordWrapSplit(t){return zu.graphemeSegmenter(t)}static measureFont(t){if(zu._fonts[t])return zu._fonts[t];const e={ascent:0,descent:0,fontSize:0},r=zu._canvas,n=zu._context;n.font=t;const i=zu.METRICS_STRING+zu.BASELINE_SYMBOL,s=Math.ceil(n.measureText(i).width);let o=Math.ceil(n.measureText(zu.BASELINE_SYMBOL).width);const a=Math.ceil(zu.HEIGHT_MULTIPLIER*o);if(o=o*zu.BASELINE_MULTIPLIER|0,0===s||0===a)return zu._fonts[t]=e,e;r.width=s,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,o);const h=n.getImageData(0,0,s,a).data,l=h.length,u=4*s;let c=0,d=0,f=!1;for(c=0;c<o;++c){for(let t=0;t<u;t+=4)if(255!==h[d+t]){f=!0;break}if(f)break;d+=u}for(e.ascent=o-c,d=l-u,f=!1,c=a;c>o;--c){for(let t=0;t<u;t+=4)if(255!==h[d+t]){f=!0;break}if(f)break;d-=u}return e.descent=c-o,e.fontSize=e.ascent+e.descent,zu._fonts[t]=e,e}static clearMetrics(t=""){t?delete zu._fonts[t]:zu._fonts={}}static get _canvas(){if(!zu.__canvas){let e;try{const t=new OffscreenCanvas(0,0),r=t.getContext("2d",Xu);if(r?.measureText)return zu.__canvas=t,t;e=E.ADAPTER.createCanvas()}catch(t){e=E.ADAPTER.createCanvas()}e.width=e.height=10,zu.__canvas=e}return zu.__canvas}static get _context(){return zu.__context||(zu.__context=zu._canvas.getContext("2d",Xu)),zu.__context}};let Wu=zu;Wu.METRICS_STRING="|q",Wu.BASELINE_SYMBOL="M",Wu.BASELINE_MULTIPLIER=1.4,Wu.HEIGHT_MULTIPLIER=2,Wu.graphemeSegmenter=(()=>{if("function"===typeof Intl?.Segmenter){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(t=>t.segment)}return t=>[...t]})(),Wu.experimentalLetterSpacing=!1,Wu._fonts={},Wu._newlines=[10,13],Wu._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const $u=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Vu=class{constructor(t){this.styleID=0,this.reset(),Qu(this,t,t)}clone(){const t={};return Qu(t,this,Vu.defaultStyle),new Vu(t)}reset(){Qu(this,Vu.defaultStyle,Vu.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Ku(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Ku(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){Zu(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Ku(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t="number"===typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let r=e.length-1;r>=0;r--){let t=e[r].trim();/([\"\'])[^\'\"]+\1/.test(t)||$u.includes(t)||(t=`"${t}"`),e[r]=t}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let Yu=Vu;function qu(t){return"number"===typeof t?zr(t):("string"===typeof t&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function Ku(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=qu(t[e]);return t}return qu(t)}function Zu(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Qu(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}Yu.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Hu.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};const Ju={texture:!0,children:!1,baseTexture:!0},tc=class extends ba{constructor(t,e,r){let n=!1;r||(r=E.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const i=ws.from(r);i.orig=new ai,i.trim=new ai,super(i),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=tc.defaultResolution??E.RESOLUTION,this._autoResolution=tc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Wu.experimentalLetterSpacing}static set experimentalLetterSpacing(t){J("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Wu.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const r=this.context,n=Wu.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,s=n.height,o=n.lines,a=n.lineHeight,h=n.lineWidths,l=n.maxLineWidth,u=n.fontProperties;let c,d;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;const f=e.dropShadow?2:1;for(let p=0;p<f;++p){const t=e.dropShadow&&0===p,i=t?Math.ceil(Math.max(1,s)+2*e.padding):0,f=i*this._resolution;if(t){r.fillStyle="black",r.strokeStyle="black";const t=e.dropShadowColor,n=Xr("number"===typeof t?t:Wr(t)),i=e.dropShadowBlur*this._resolution,s=e.dropShadowDistance*this._resolution;r.shadowColor=`rgba(${255*n[0]},${255*n[1]},${255*n[2]},${e.dropShadowAlpha})`,r.shadowBlur=i,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*s,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*s+f}else r.fillStyle=this._generateFillStyle(e,o,n),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let m=(a-u.fontSize)/2;a-u.fontSize<0&&(m=0);for(let r=0;r<o.length;r++)c=e.strokeThickness/2,d=e.strokeThickness/2+r*a+u.ascent+m,"right"===e.align?c+=l-h[r]:"center"===e.align&&(c+=(l-h[r])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[r],c+e.padding,d+e.padding-i,!0),e.fill&&this.drawLetterSpacing(o[r],c+e.padding,d+e.padding-i)}this.updateTexture()}drawLetterSpacing(t,e,r,n=!1){const i=this._style,s=i.letterSpacing;let o=!1;if(Wu.experimentalLetterSpacingSupported&&(Wu.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===s||o)return void(n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r));let a=e;const h=Wu.graphemeSegmenter(t);let l=this.context.measureText(t).width,u=0;for(let c=0;c<h.length;++c){const t=h[c];n?this.context.strokeText(t,a,r):this.context.fillText(t,a,r);let e="";for(let r=c+1;r<h.length;++r)e+=h[r];u=this.context.measureText(e).width,a+=l-u+s,l=u}}updateTexture(){const t=this.canvas;if(this._style.trim){const e=yn(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}const e=this._texture,r=this._style,n=r.trim?0:r.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-2*n,e.orig.height=e._frame.height-2*n,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,r){const n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];let i;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-2*o,h=this.canvas.height/this._resolution-s-2*o,l=n.slice(),u=t.fillGradientStops.slice();if(!u.length){const t=l.length+1;for(let e=1;e<t;++e)u.push(e/t)}if(l.unshift(n[0]),u.unshift(0),l.push(n[n.length-1]),u.push(1),t.fillGradientType===Hu.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,h+o);const n=r.fontProperties.fontSize+t.strokeThickness;for(let t=0;t<e.length;t++){const s=r.lineHeight*(t-1)+n,o=r.lineHeight*t;let a=o;t>0&&s>o&&(a=(o+s)/2);const c=o+n,d=r.lineHeight*(t+1);let f=c;t+1<e.length&&d<c&&(f=(c+d)/2);const p=(f-a)/h;for(let t=0;t<l.length;t++){let e=0;e="number"===typeof u[t]?u[t]:t/l.length;let r=Math.min(1,Math.max(0,a/h+e*p));r=Number(r.toFixed(5)),i.addColorStop(r,l[t])}}}else{i=this.context.createLinearGradient(o,h/2,a+o,h/2);const t=l.length+1;let e=1;for(let r=0;r<l.length;r++){let n;n="number"===typeof u[r]?u[r]:e/t,i.addColorStop(n,l[r]),e++}}return i}destroy(t){"boolean"===typeof t&&(t={children:t}),t=Object.assign({},Ju,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=sn(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=sn(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},this._style=t instanceof Yu?t:new Yu(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let ec=tc;ec.defaultAutoResolution=!0;class rc{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function nc(t,e){let r=!1;if(t?._textures?.length)for(let n=0;n<t._textures.length;n++)if(t._textures[n]instanceof ws){const i=t._textures[n].baseTexture;e.includes(i)||(e.push(i),r=!0)}return r}function ic(t,e){if(t.baseTexture instanceof Xn){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function sc(t,e){if(t._texture&&t._texture instanceof ws){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function oc(t,e){return e instanceof ec&&(e.updateText(!0),!0)}function ac(t,e){if(e instanceof Yu){const t=e.toFontString();return Wu.measureFont(t),!0}return!1}function hc(t,e){if(t instanceof ec){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function lc(t,e){return t instanceof Yu&&(e.includes(t)||e.push(t),!0)}const uc=class{constructor(t){this.limiter=new rc(uc.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(hc),this.registerFindHook(lc),this.registerFindHook(nc),this.registerFindHook(ic),this.registerFindHook(sc),this.registerUploadHook(oc),this.registerUploadHook(ac)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Ho.system.addOnce(this.tick,this,Uo.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){this.limiter.beginFrame();while(this.queue.length&&this.limiter.allowedToUpload()){const t=this.queue[0];let e=!1;if(t&&!t._destroyed)for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)Ho.system.addOnce(this.tick,this,Uo.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,r=t.length;e<r;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,r=this.addHooks.length;e<r;e++)if(this.addHooks[e](t,this.queue))break;if(t instanceof _a)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Ho.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let cc=uc;function dc(t,e){return e instanceof Xn&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function fc(t,e){if(!(e instanceof Iu))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:e}=n[i].style;e&&dc(t,e.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function pc(t,e){return t instanceof Iu&&(e.push(t),!0)}cc.uploadsPerFrame=4,Object.defineProperties(E,{UPLOADS_PER_FRAME:{get(){return cc.uploadsPerFrame},set(t){J("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),cc.uploadsPerFrame=t}}});class mc extends cc{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(pc),this.registerUploadHook(dc),this.registerUploadHook(fc)}}mc.extension={name:"prepare",type:bn.RendererSystem},wn.add(mc);class gc extends ba{constructor(t,e=!0){super(t[0]instanceof ws?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ho.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ho.shared.add(this.update,this,Uo.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){let r=this._currentTime%1*this._durations[this.currentFrame];r+=e/60*1e3;while(r<0)this._currentTime--,r+=this._durations[this.currentFrame];const n=Math.sign(this.animationSpeed*t);this._currentTime=Math.floor(this._currentTime);while(r>=this._durations[this.currentFrame])r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let r=0;r<t.length;++r)e.push(ws.from(t[r]));return new gc(e)}static fromImages(t){const e=[];for(let r=0;r<t.length;++r)e.push(ws.from(t[r]));return new gc(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof ws)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ho.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ho.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const yc=new si;class _c extends ba{constructor(t,e=100,r=100){super(t),this.tileTransform=new wi,this._width=e,this._height=r,this.uvMatrix=this.texture.uvMatrix||new Us(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)}getLocalBounds(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new ai),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,yc);const e=this._width,r=this._height,n=-e*this.anchor._x;if(yc.x>=n&&yc.x<n+e){const t=-r*this.anchor._y;if(yc.y>=t&&yc.y<t+r)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){const r=t instanceof ws?t:ws.from(t,e);return new _c(r,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var vc="#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",xc="#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",bc="#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",Ec="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Tc="#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n";const wc=new di;class Ac extends ns{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Is,this.state=Fn.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Qi.from(Ec,Tc,e),this.shader=t.context.webGLVersion>1?Qi.from(xc,vc,e):Qi.from(Ec,bc,e)}render(t){const e=this.renderer,r=this.quad;let n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const i=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;n=r.uvs,n[0]=n[6]=-i,n[1]=n[3]=-s,n[2]=n[4]=1-i,n[5]=n[7]=1-s,r.invalidate();const o=t._texture,a=o.baseTexture,h=a.alphaMode>0,l=t.tileTransform.localTransform,u=t.uvMatrix;let c=a.isPowerOfTwo&&o.frame.width===a.width&&o.frame.height===a.height;c&&(a._glTextures[e.CONTEXT_UID]?c=a.wrapMode!==d.CLAMP:a.wrapMode===d.CLAMP&&(a.wrapMode=d.REPEAT));const f=c?this.simpleShader:this.shader,p=o.width,m=o.height,g=t._width,y=t._height;wc.set(l.a*p/g,l.b*p/y,l.c*m/g,l.d*m/y,l.tx/g,l.ty/y),wc.invert(),c?wc.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=wc.toArray(!0),f.uniforms.uColor=Zr(t.tint,t.worldAlpha,f.uniforms.uColor,h),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=o,e.shader.bind(f),e.geometry.bind(r),this.state.blendMode=Yr(t.blendMode,h),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Ac.extension={name:"tilingSprite",type:bn.RendererPlugin},wn.add(Ac);const Sc=class{constructor(t,e,r=null){this.linkedSheets=[],this._texture=t instanceof ws?t:null,this.baseTexture=t instanceof Xn?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let r=xn(t,null);return null===r&&(r=parseFloat(e??"1")),1!==r&&this.baseTexture.setResolution(r),r}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Sc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const r=Sc.BATCH_SIZE;while(e-t<r&&e<this._frameKeys.length){const t=this._frameKeys[e],r=this._frames[t],n=r.frame;if(n){let e=null,i=null;const s=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,o=new ai(0,0,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution);e=r.rotated?new ai(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):new ai(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(i=new ai(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[t]=new ws(this.baseTexture,e,o,i,r.rotated?2:0,r.anchor),ws.addToCache(this.textures[t],t)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const n=t[e][r];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Sc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Sc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Rc=Sc;Rc.BATCH_SIZE=1e3;const Ic=["jpg","png","jpeg","avif","webp"];function Cc(t,e,r){const n={};if(t.forEach(t=>{n[t]=e}),Object.keys(e.textures).forEach(t=>{n[t]=e.textures[t]}),!r){const r=Z.dirname(t[0]);e.linkedSheets.forEach((t,i)=>{const s=Cc([`${r}/${e.data.meta.related_multi_packs[i]}`],t,!0);Object.assign(n,s)})}return n}const Pc={extension:bn.Asset,cache:{test:t=>t instanceof Rc,getCacheableAssets:(t,e)=>Cc(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0],r=e.split("."),n=r.pop(),i=r.pop();return"json"===n&&Ic.includes(i)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(E.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:bn.LoadParser,priority:Sh.Normal},async testParse(t,e){return".json"===Z.extname(e.src).toLowerCase()&&!!t.frames},async parse(t,e,r){let n=Z.dirname(e.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=n+t.meta.image;i=il(i,e.src);const s=await r.load([i]),o=s[i],a=new Rc(o.baseTexture,t,e.src);await a.parse();const h=t?.meta?.related_multi_packs;if(Array.isArray(h)){const t=[];for(const s of h){if("string"!==typeof s)continue;let i=n+s;e.data?.ignoreMultiPack||(i=il(i,e.src),t.push(r.load({src:i,data:{ignoreMultiPack:!0}})))}const i=await Promise.all(t);a.linkedSheets=i,i.forEach(t=>{t.linkedSheets=[a].concat(a.linkedSheets.filter(e=>e!==t))})}return a},unload(t){t.destroy(!0)}}};wn.add(Pc);class Mc{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Dc{static test(t){return"string"===typeof t&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const i in e){const t=e[i].match(/^[a-z]+/gm)[0],n=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(const e in n){const t=n[e].split("="),r=t[0],i=t[1].replace(/"/gm,""),o=parseFloat(i),a=isNaN(o)?i:o;s[r]=a}r[t].push(s)}const n=new Mc;return r.info.forEach(t=>n.info.push({face:t.face,size:parseInt(t.size,10)})),r.common.forEach(t=>n.common.push({lineHeight:parseInt(t.lineHeight,10)})),r.page.forEach(t=>n.page.push({id:parseInt(t.id,10),file:t.file})),r.char.forEach(t=>n.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})),r.kerning.forEach(t=>n.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})),r.distanceField.forEach(t=>n.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})),n}}class Oc{static test(t){const e=t;return"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")}static parse(t){const e=new Mc,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField");for(let h=0;h<r.length;h++)e.info.push({face:r[h].getAttribute("face"),size:parseInt(r[h].getAttribute("size"),10)});for(let h=0;h<n.length;h++)e.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(let h=0;h<i.length;h++)e.page.push({id:parseInt(i[h].getAttribute("id"),10)||0,file:i[h].getAttribute("file")});for(let h=0;h<s.length;h++){const t=s[h];e.char.push({id:parseInt(t.getAttribute("id"),10),page:parseInt(t.getAttribute("page"),10)||0,x:parseInt(t.getAttribute("x"),10),y:parseInt(t.getAttribute("y"),10),width:parseInt(t.getAttribute("width"),10),height:parseInt(t.getAttribute("height"),10),xoffset:parseInt(t.getAttribute("xoffset"),10),yoffset:parseInt(t.getAttribute("yoffset"),10),xadvance:parseInt(t.getAttribute("xadvance"),10)})}for(let h=0;h<o.length;h++)e.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});for(let h=0;h<a.length;h++)e.distanceField.push({fieldType:a[h].getAttribute("fieldType"),distanceRange:parseInt(a[h].getAttribute("distanceRange"),10)});return e}}class Bc{static test(t){return!("string"!==typeof t||!t.includes("<font>"))&&Oc.test(E.ADAPTER.parseXML(t))}static parse(t){return Oc.parse(E.ADAPTER.parseXML(t))}}const Fc=[Dc,Oc,Bc];function Nc(t){for(let e=0;e<Fc.length;e++)if(Fc[e].test(t))return Fc[e];return null}function Lc(t,e,r,n,i,s){const o=r.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];let a;const h=r.dropShadow?r.dropShadowDistance:0,l=r.padding||0,u=t.width/n-h-2*l,c=t.height/n-h-2*l,d=o.slice(),f=r.fillGradientStops.slice();if(!f.length){const t=d.length+1;for(let e=1;e<t;++e)f.push(e/t)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),r.fillGradientType===Hu.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,l,u/2,c+l);let t=0;const n=s.fontProperties.fontSize+r.strokeThickness,o=n/c;for(let e=0;e<i.length;e++){const r=s.lineHeight*e;for(let e=0;e<d.length;e++){let n=0;n="number"===typeof f[e]?f[e]:e/d.length;const i=r/c+n*o;let s=Math.max(t,i);s=Math.min(s,1),a.addColorStop(s,d[e]),t=s}}}else{a=e.createLinearGradient(l,c/2,u+l,c/2);const t=d.length+1;let r=1;for(let e=0;e<d.length;e++){let n;n="number"===typeof f[e]?f[e]:r/t,a.addColorStop(n,d[e]),r++}}return a}function kc(t,e,r,n,i,s,o){const a=r.text,h=r.fontProperties;e.translate(n,i),e.scale(s,s);const l=o.strokeThickness/2,u=-o.strokeThickness/2;if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Lc(t,e,o,s,[a],r),e.strokeStyle=o.stroke,o.dropShadow){const t=o.dropShadowColor,r=Xr("number"===typeof t?t:Wr(t)),n=o.dropShadowBlur*s,i=o.dropShadowDistance*s;e.shadowColor=`rgba(${255*r[0]},${255*r[1]},${255*r[2]},${o.dropShadowAlpha})`,e.shadowBlur=n,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*i,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*i}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,l,u+r.lineHeight-h.descent),o.fill&&e.fillText(a,l,u+r.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Uc(t){return Array.from?Array.from(t):t.split("")}function Gc(t){"string"===typeof t&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];if(Array.isArray(n)){if(2!==n.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const t=n[0].charCodeAt(0),r=n[1].charCodeAt(0);if(r<t)throw new Error("[BitmapFont]: Invalid character range.");for(let n=t,i=r;n<=i;n++)e.push(String.fromCharCode(n))}else e.push(...Uc(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function jc(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}const Hc=class{constructor(t,e,r){const[n]=t.info,[i]=t.common,[s]=t.page,[o]=t.distanceField,a=xn(s.file),h={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=h;for(let l=0;l<t.page.length;l++){const{id:r,file:n}=t.page[l];h[r]=e instanceof Array?e[l]:e[n],o?.fieldType&&"none"!==o.fieldType&&(h[r].baseTexture.alphaMode=p.NO_PREMULTIPLIED_ALPHA,h[r].baseTexture.mipmap=f.OFF)}for(let l=0;l<t.char.length;l++){const{id:e,page:r}=t.char[l];let{x:n,y:i,width:s,height:o,xoffset:u,yoffset:c,xadvance:d}=t.char[l];n/=a,i/=a,s/=a,o/=a,u/=a,c/=a,d/=a;const f=new ai(n+h[r].frame.x/a,i+h[r].frame.y/a,s,o);this.chars[e]={xOffset:u,yOffset:c,xAdvance:d,kerning:{},texture:new ws(h[r].baseTexture,f),page:r}}for(let l=0;l<t.kerning.length;l++){let{first:e,second:r,amount:n}=t.kerning[l];e/=a,r/=a,n/=a,this.chars[r]&&(this.chars[r].kerning[e]=n)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,r){let n;if(t instanceof Mc)n=t;else{const e=Nc(t);if(!e)throw new Error("Unrecognized data format for font.");n=e.parse(t)}e instanceof ws&&(e=[e]);const i=new Hc(n,e,r);return Hc.available[i.font]=i,i}static uninstall(t){const e=Hc.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete Hc.available[t]}static from(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:i,resolution:s,textureWidth:o,textureHeight:a,...h}=Object.assign({},Hc.defaultOptions,r),l=Gc(n),u=e instanceof Yu?e:new Yu(e),c=o,d=new Mc;d.info[0]={face:u.fontFamily,size:u.fontSize},d.common[0]={lineHeight:u.fontSize};let f,p,m,g=0,y=0,_=0;const v=[],x=[];for(let T=0;T<l.length;T++){f||(f=E.ADAPTER.createCanvas(),f.width=o,f.height=a,p=f.getContext("2d"),m=new Xn(f,{resolution:s,...h}),v.push(m),x.push(new ws(m)),d.page.push({id:x.length-1,file:""}));const t=l[T],e=Wu.measureText(t,u,!1,f),r=e.width,n=Math.ceil(e.height),b=Math.ceil(("italic"===u.fontStyle?2:1)*r);if(y>=a-n*s){if(0===y)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${t}')`);--T,f=null,p=null,m=null,y=0,g=0,_=0;continue}if(_=Math.max(n+e.fontProperties.descent,_),b*s+g>=c){if(0===g)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${t}')`);--T,y+=_*s,y=Math.ceil(y),g=0,_=0;continue}kc(f,p,e,g,y,s,u);const w=jc(e.text);d.char.push({id:w,page:x.length-1,x:g/s,y:y/s,width:b,height:n,xoffset:0,yoffset:0,xadvance:r-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0)}),g+=(b+2*i)*s,g=Math.ceil(g)}for(let E=0,T=l.length;E<T;E++){const t=l[E];for(let e=0;e<T;e++){const r=l[e],n=p.measureText(t).width,i=p.measureText(r).width,s=p.measureText(t+r).width,o=s-(n+i);o&&d.kerning.push({first:jc(t),second:jc(r),amount:o})}}const b=new Hc(d,x,!0);return void 0!==Hc.available[t]&&Hc.uninstall(t),Hc.available[t]=b,b}};let Xc=Hc;Xc.ALPHA=[["a","z"],["A","Z"]," "],Xc.NUMERIC=[["0","9"]],Xc.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Xc.ASCII=[[" ","~"]],Xc.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Hc.ALPHANUMERIC},Xc.available={};var zc="// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n",Wc="// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n";const $c=[],Vc=[],Yc=[],qc=class extends _a{constructor(t,e={}){super(),this._tint=16777215;const{align:r,tint:n,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},qc.styleDefaults,e);if(!Xc.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tint=n,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new Ei(()=>{this.dirty=!0},this,0,0),this._roundPixels=E.ROUND_PIXELS,this.dirty=!0,this._resolution=E.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=Xc.available[this._fontName],e=this.fontSize,r=e/t.size,n=new si,i=[],o=[],a=[],h=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",l=Uc(h),u=this._maxWidth*t.size/e,c="none"===t.distanceFieldType?$c:Vc;let d=null,f=0,p=0,m=0,g=-1,y=0,_=0,v=0,x=0;for(let s=0;s<l.length;s++){const e=l[s],r=jc(e);if(/(?:\s)/.test(e)&&(g=s,y=f,x++),"\r"===e||"\n"===e){o.push(f),a.push(-1),p=Math.max(p,f),++m,++_,n.x=0,n.y+=t.lineHeight,d=null,x=0;continue}const h=t.chars[r];if(!h)continue;d&&h.kerning[d]&&(n.x+=h.kerning[d]);const c=Yc.pop()||{texture:ws.EMPTY,line:0,charCode:0,prevSpaces:0,position:new si};c.texture=h.texture,c.line=m,c.charCode=r,c.position.x=Math.round(n.x+h.xOffset+this._letterSpacing/2),c.position.y=Math.round(n.y+h.yOffset),c.prevSpaces=x,i.push(c),f=c.position.x+Math.max(h.xAdvance-h.xOffset,h.texture.orig.width),n.x+=h.xAdvance+this._letterSpacing,v=Math.max(v,h.yOffset+h.texture.height),d=r,-1!==g&&u>0&&n.x>u&&(++_,nn(i,1+g-_,1+s-g),s=g,g=-1,o.push(y),a.push(i.length>0?i[i.length-1].prevSpaces:0),p=Math.max(p,y),m++,n.x=0,n.y+=t.lineHeight,d=null,x=0)}const b=l[l.length-1];"\r"!==b&&"\n"!==b&&(/(?:\s)/.test(b)&&(f=y),o.push(f),p=Math.max(p,f),a.push(-1));const E=[];for(let s=0;s<=m;s++){let t=0;"right"===this._align?t=p-o[s]:"center"===this._align?t=(p-o[s])/2:"justify"===this._align&&(t=a[s]<0?0:(p-o[s])/a[s]),E.push(t)}const T=i.length,w={},A=[],S=this._activePagesMeshData;c.push(...S);for(let R=0;R<T;R++){const e=i[R].texture,r=e.baseTexture.uid;if(!w[r]){let n=c.pop();if(!n){const e=new Bu;let r,i;"none"===t.distanceFieldType?(r=new Lu(ws.EMPTY),i=s.NORMAL):(r=new Lu(ws.EMPTY,{program:qi.from(Wc,zc),uniforms:{uFWidth:0}}),i=s.NORMAL_NPM);const o=new Ou(e,r);o.blendMode=i,n={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:o,vertices:null,uvs:null,indices:null}}n.index=0,n.indexCount=0,n.vertexCount=0,n.uvsCount=0,n.total=0;const{_textureCache:i}=this;i[r]=i[r]||new ws(e.baseTexture),n.mesh.texture=i[r],n.mesh.tint=this._tint,A.push(n),w[r]=n}w[r].total++}for(let s=0;s<S.length;s++)A.includes(S[s])||this.removeChild(S[s].mesh);for(let s=0;s<A.length;s++)A[s].mesh.parent!==this&&this.addChild(A[s].mesh);this._activePagesMeshData=A;for(const s in w){const t=w[s],e=t.total;if(!(t.indices?.length>6*e)||t.vertices.length<2*Ou.BATCHABLE_SIZE)t.vertices=new Float32Array(8*e),t.uvs=new Float32Array(8*e),t.indices=new Uint16Array(6*e);else{const e=t.total,r=t.vertices;for(let t=4*e*2;t<r.length;t++)r[t]=0}t.mesh.size=6*e}for(let s=0;s<T;s++){const t=i[s];let e=t.position.x+E[t.line]*("justify"===this._align?t.prevSpaces:1);this._roundPixels&&(e=Math.round(e));const n=e*r,o=t.position.y*r,a=t.texture,h=w[a.baseTexture.uid],l=a.frame,u=a._uvs,c=h.index++;h.indices[6*c+0]=0+4*c,h.indices[6*c+1]=1+4*c,h.indices[6*c+2]=2+4*c,h.indices[6*c+3]=0+4*c,h.indices[6*c+4]=2+4*c,h.indices[6*c+5]=3+4*c,h.vertices[8*c+0]=n,h.vertices[8*c+1]=o,h.vertices[8*c+2]=n+l.width*r,h.vertices[8*c+3]=o,h.vertices[8*c+4]=n+l.width*r,h.vertices[8*c+5]=o+l.height*r,h.vertices[8*c+6]=n,h.vertices[8*c+7]=o+l.height*r,h.uvs[8*c+0]=u.x0,h.uvs[8*c+1]=u.y0,h.uvs[8*c+2]=u.x1,h.uvs[8*c+3]=u.y1,h.uvs[8*c+4]=u.x2,h.uvs[8*c+5]=u.y2,h.uvs[8*c+6]=u.x3,h.uvs[8*c+7]=u.y3}this._textWidth=p*r,this._textHeight=(n.y+t.lineHeight)*r;for(const s in w){const t=w[s];if(0!==this.anchor.x||0!==this.anchor.y){let e=0;const r=this._textWidth*this.anchor.x,n=this._textHeight*this.anchor.y;for(let i=0;i<t.total;i++)t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n}this._maxLineHeight=v*r;const e=t.mesh.geometry.getBuffer("aVertexPosition"),n=t.mesh.geometry.getBuffer("aTextureCoord"),i=t.mesh.geometry.getIndex();e.data=t.vertices,n.data=t.uvs,i.data=t.indices,e.update(),n.update(),i.update()}for(let s=0;s<i.length;s++)Yc.push(i[s]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:n}=Xc.available[this._fontName];if("none"!==r){const{a:r,b:i,c:s,d:o}=this.worldTransform,a=Math.sqrt(r*r+i*i),h=Math.sqrt(s*s+o*o),l=(Math.abs(a)+Math.abs(h))/2,u=this.fontSize/n,c=t._view.resolution;for(const t of this._activePagesMeshData)t.mesh.shader.uniforms.uFWidth=l*e*u*c}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=Xc.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!Xc.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??Xc.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,r=Xc.available[this._fontName],n="none"===r.distanceFieldType?$c:Vc;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(t=>e[t.mesh.texture.baseTexture.uid]).forEach(t=>{t.mesh.texture=ws.EMPTY});for(const i in e){const t=e[i];t.destroy(),delete e[i]}this._font=null,this._textureCache=null,super.destroy(t)}};let Kc=qc;Kc.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const Zc=[".xml",".fnt"],Qc={extension:{type:bn.LoadParser,priority:Sh.Normal},test(t){return Zc.includes(Z.extname(t).toLowerCase())},async testParse(t){return Dc.test(t)||Bc.test(t)},async parse(t,e,r){const n=Dc.test(t)?Dc.parse(t):Bc.parse(t),{src:i}=e,{page:s}=n,o=[];for(let l=0;l<s.length;++l){const t=s[l].file;let e=Z.join(Z.dirname(i),t);e=il(e,i),o.push(e)}const a=await r.load(o),h=o.map(t=>a[t]);return Xc.install(n,h,!0)},async load(t,e){const r=await E.ADAPTER.fetch(t);return r.text()},unload(t){t.destroy()}};wn.add(Qc)},3392:function(t,e,r){"use strict";var n=r(9504),i=0,s=Math.random(),o=n(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},3436:function(t,e,r){"use strict";var n=r(5072),i=r(3071),s=r(1012),o=r(28),a=r(9340),h=n("%WeakMap%",!0),l=i("WeakMap.prototype.get",!0),u=i("WeakMap.prototype.set",!0),c=i("WeakMap.prototype.has",!0),d=i("WeakMap.prototype.delete",!0);t.exports=h?function(){var t,e,r={assert:function(t){if(!r.has(t))throw new a("Side channel does not contain "+s(t))},delete:function(r){if(h&&r&&("object"===typeof r||"function"===typeof r)){if(t)return d(t,r)}else if(o&&e)return e["delete"](r);return!1},get:function(r){return h&&r&&("object"===typeof r||"function"===typeof r)&&t?l(t,r):e&&e.get(r)},has:function(r){return h&&r&&("object"===typeof r||"function"===typeof r)&&t?c(t,r):!!e&&e.has(r)},set:function(r,n){h&&r&&("object"===typeof r||"function"===typeof r)?(t||(t=new h),u(t,r,n)):o&&(e||(e=o()),e.set(r,n))}};return r}:o},3440:function(t,e,r){"use strict";var n=r(7080),i=r(4402),s=r(9286),o=r(5170),a=r(3789),h=r(8469),l=r(507),u=i.has,c=i.remove;t.exports=function(t){var e=n(this),r=a(t),i=s(e);return o(e)<=r.size?h(e,function(t){r.includes(t)&&c(i,t)}):l(r.getIterator(),function(t){u(i,t)&&c(i,t)}),i}},3506:function(t,e,r){"use strict";var n=r(3925),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw new s("Can't set "+i(t)+" as a prototype")}},3529:function(t,e,r){"use strict";r(4114);var n=Object.prototype.hasOwnProperty,i="~";function s(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,n||t,s),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function h(t,e){0===--t._eventsCount?t._events=new s:delete t._events[e]}function l(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},l.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},l.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},l.prototype.emit=function(t,e,r,n,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,n),!0;case 5:return u.fn.call(u.context,e,r,n,s),!0;case 6:return u.fn.call(u.context,e,r,n,s,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;case 4:u[l].fn.call(u[l].context,e,r,n);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},l.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},l.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},l.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return h(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||h(this,s);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==e||n&&!o[a].once||r&&o[a].context!==r)&&l.push(o[a]);l.length?this._events[s]=1===l.length?l[0]:l:h(this,s)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&h(this,e)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},3579:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),h=r(1767),l=r(9539),u=r(4549),c=u("some",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{some:function(t){a(this);try{o(t)}catch(n){l(this,"throw",n)}if(c)return i(c,this,t);var e=h(this),r=0;return s(e,function(e,n){if(t(e,r++))return n()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},3650:function(t,e,r){"use strict";var n=r(7080),i=r(4402),s=r(9286),o=r(3789),a=r(507),h=i.add,l=i.has,u=i.remove;t.exports=function(t){var e=n(this),r=o(t).getIterator(),i=s(e);return a(r,function(t){l(e,t)?u(i,t):h(i,t)}),i}},3682:function(t,e,r){"use strict";var n=r(2602);t.exports=Function.prototype.bind||n},3706:function(t,e,r){"use strict";var n=r(9504),i=r(4901),s=r(7629),o=n(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},3717:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},3724:function(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3789:function(t,e,r){"use strict";var n=r(9306),i=r(8551),s=r(9565),o=r(1291),a=r(1767),h="Invalid size",l=RangeError,u=TypeError,c=Math.max,d=function(t,e){this.set=t,this.size=c(e,0),this.has=n(t.has),this.keys=n(t.keys)};d.prototype={getIterator:function(){return a(i(s(this.keys,this.set)))},includes:function(t){return s(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!==e)throw new u(h);var r=o(e);if(r<0)throw new l(h);return new d(t,r)}},3838:function(t,e,r){"use strict";var n=r(7080),i=r(5170),s=r(8469),o=r(3789);t.exports=function(t){var e=n(this),r=o(t);return!(i(e)>r.size)&&!1!==s(e,function(t){if(!r.includes(t))return!1},!0)}},3853:function(t,e,r){"use strict";var n=r(6518),i=r(4449),s=r(4916),o=!s("isDisjointFrom",function(t){return!t});n({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:i})},3925:function(t,e,r){"use strict";var n=r(34);t.exports=function(t){return n(t)||null===t}},4055:function(t,e,r){"use strict";var n=r(4576),i=r(34),s=n.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},4114:function(t,e,r){"use strict";var n=r(6518),i=r(8981),s=r(6198),o=r(4527),a=r(6837),h=r(9039),l=h(function(){return 4294967297!==[].push.call({length:4294967296},1)}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},c=l||!u();n({target:"Array",proto:!0,arity:1,forced:c},{push:function(t){var e=i(this),r=s(e),n=arguments.length;a(r+n);for(var h=0;h<n;h++)e[r]=arguments[h],r++;return o(e,r),r}})},4117:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},4195:function(t){"use strict";t.exports=SyntaxError},4204:function(t,e,r){"use strict";var n=r(7080),i=r(4402).add,s=r(9286),o=r(3789),a=r(507);t.exports=function(t){var e=n(this),r=o(t).getIterator(),h=s(e);return a(r,function(t){i(h,t)}),h}},4209:function(t,e,r){"use strict";var n=r(8227),i=r(6269),s=n("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},4232:function(t,e,r){"use strict";r.d(e,{$3:function(){return f},$H:function(){return L},BH:function(){return W},BX:function(){return rt},Bm:function(){return b},C4:function(){return Z},CE:function(){return m},CP:function(){return l},DY:function(){return k},Gv:function(){return E},J$:function(){return J},Kg:function(){return x},MZ:function(){return i},Mp:function(){return h},NO:function(){return a},Oj:function(){return s},PT:function(){return D},Qd:function(){return R},Ro:function(){return j},SU:function(){return C},TF:function(){return c},Tg:function(){return B},Tn:function(){return v},Tr:function(){return $},We:function(){return X},X$:function(){return u},Y2:function(){return tt},ZH:function(){return F},Zf:function(){return S},bB:function(){return G},cy:function(){return p},gd:function(){return _},pD:function(){return n},rU:function(){return N},tE:function(){return o},u3:function(){return nt},vM:function(){return g},yI:function(){return I},yL:function(){return T},yQ:function(){return U}});r(4114),r(8111),r(2489),r(7588);
/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function n(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return t=>t in e}const i={},s=[],o=()=>{},a=()=>!1,h=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),l=t=>t.startsWith("onUpdate:"),u=Object.assign,c=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},d=Object.prototype.hasOwnProperty,f=(t,e)=>d.call(t,e),p=Array.isArray,m=t=>"[object Map]"===A(t),g=t=>"[object Set]"===A(t),y=t=>"[object Date]"===A(t),_=t=>"[object RegExp]"===A(t),v=t=>"function"===typeof t,x=t=>"string"===typeof t,b=t=>"symbol"===typeof t,E=t=>null!==t&&"object"===typeof t,T=t=>(E(t)||v(t))&&v(t.then)&&v(t.catch),w=Object.prototype.toString,A=t=>w.call(t),S=t=>A(t).slice(8,-1),R=t=>"[object Object]"===A(t),I=t=>x(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,C=n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return r=>{const n=e[r];return n||(e[r]=t(r))}},M=/-(\w)/g,D=P(t=>t.replace(M,(t,e)=>e?e.toUpperCase():"")),O=/\B([A-Z])/g,B=P(t=>t.replace(O,"-$1").toLowerCase()),F=P(t=>t.charAt(0).toUpperCase()+t.slice(1)),N=P(t=>{const e=t?`on${F(t)}`:"";return e}),L=(t,e)=>!Object.is(t,e),k=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},U=(t,e,r,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:r})},G=t=>{const e=parseFloat(t);return isNaN(e)?t:e},j=t=>{const e=x(t)?Number(t):NaN;return isNaN(e)?t:e};let H;const X=()=>H||(H="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:{});const z="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",W=n(z);function $(t){if(p(t)){const e={};for(let r=0;r<t.length;r++){const n=t[r],i=x(n)?K(n):$(n);if(i)for(const t in i)e[t]=i[t]}return e}if(x(t)||E(t))return t}const V=/;(?![^(]*\))/g,Y=/:([^]+)/,q=/\/\*[^]*?\*\//g;function K(t){const e={};return t.replace(q,"").split(V).forEach(t=>{if(t){const r=t.split(Y);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Z(t){let e="";if(x(t))e=t;else if(p(t))for(let r=0;r<t.length;r++){const n=Z(t[r]);n&&(e+=n+" ")}else if(E(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Q="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",J=n(Q);function tt(t){return!!t||""===t}function et(t,e){if(t.length!==e.length)return!1;let r=!0;for(let n=0;r&&n<t.length;n++)r=rt(t[n],e[n]);return r}function rt(t,e){if(t===e)return!0;let r=y(t),n=y(e);if(r||n)return!(!r||!n)&&t.getTime()===e.getTime();if(r=b(t),n=b(e),r||n)return t===e;if(r=p(t),n=p(e),r||n)return!(!r||!n)&&et(t,e);if(r=E(t),n=E(e),r||n){if(!r||!n)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const r in t){const n=t.hasOwnProperty(r),i=e.hasOwnProperty(r);if(n&&!i||!n&&i||!rt(t[r],e[r]))return!1}}return String(t)===String(e)}function nt(t,e){return t.findIndex(t=>rt(t,e))}},4261:function(t,e,r){"use strict";var n=r(3682),i=r(7551),s=r(2531),o=r(5196);t.exports=o||n.call(s,i)},4270:function(t,e,r){"use strict";var n=r(9565),i=r(4901),s=r(34),o=TypeError;t.exports=function(t,e){var r,a;if("string"===e&&i(r=t.toString)&&!s(a=n(r,t)))return a;if(i(r=t.valueOf)&&!s(a=n(r,t)))return a;if("string"!==e&&i(r=t.toString)&&!s(a=n(r,t)))return a;throw new o("Can't convert object to primitive value")}},4302:function(t){"use strict";t.exports=Error},4376:function(t,e,r){"use strict";var n=r(2195);t.exports=Array.isArray||function(t){return"Array"===n(t)}},4402:function(t,e,r){"use strict";var n=r(9504),i=Set.prototype;t.exports={Set:Set,add:n(i.add),has:n(i.has),remove:n(i["delete"]),proto:i}},4449:function(t,e,r){"use strict";var n=r(7080),i=r(4402).has,s=r(5170),o=r(3789),a=r(8469),h=r(507),l=r(9539);t.exports=function(t){var e=n(this),r=o(t);if(s(e)<=r.size)return!1!==a(e,function(t){if(r.includes(t))return!1},!0);var u=r.getIterator();return!1!==h(u,function(t){if(i(e,t))return l(u,"normal",!1)})}},4495:function(t,e,r){"use strict";var n=r(9519),i=r(9039),s=r(4576),o=s.String;t.exports=!!Object.getOwnPropertySymbols&&!i(function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},4527:function(t,e,r){"use strict";var n=r(3724),i=r(4376),s=TypeError,o=Object.getOwnPropertyDescriptor,a=n&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(i(t)&&!o(t,"length").writable)throw new s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},4549:function(t,e,r){"use strict";var n=r(4576);t.exports=function(t,e){var r=n.Iterator,i=r&&r.prototype,s=i&&i[t],o=!1;if(s)try{s.call({next:function(){return{done:!0}},return:function(){o=!0}},-1)}catch(a){a instanceof e||(o=!1)}if(!o)return s}},4576:function(t,e,r){"use strict";var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4644:function(t,e,r){"use strict";var n,i,s,o=r(7811),a=r(3724),h=r(4576),l=r(4901),u=r(34),c=r(9297),d=r(6955),f=r(6823),p=r(6699),m=r(6840),g=r(2106),y=r(1625),_=r(2787),v=r(2967),x=r(8227),b=r(3392),E=r(1181),T=E.enforce,w=E.get,A=h.Int8Array,S=A&&A.prototype,R=h.Uint8ClampedArray,I=R&&R.prototype,C=A&&_(A),P=S&&_(S),M=Object.prototype,D=h.TypeError,O=x("toStringTag"),B=b("TYPED_ARRAY_TAG"),F="TypedArrayConstructor",N=o&&!!v&&"Opera"!==d(h.opera),L=!1,k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},G=function(t){if(!u(t))return!1;var e=d(t);return"DataView"===e||c(k,e)||c(U,e)},j=function(t){var e=_(t);if(u(e)){var r=w(e);return r&&c(r,F)?r[F]:j(e)}},H=function(t){if(!u(t))return!1;var e=d(t);return c(k,e)||c(U,e)},X=function(t){if(H(t))return t;throw new D("Target is not a typed array")},z=function(t){if(l(t)&&(!v||y(C,t)))return t;throw new D(f(t)+" is not a typed array constructor")},W=function(t,e,r,n){if(a){if(r)for(var i in k){var s=h[i];if(s&&c(s.prototype,t))try{delete s.prototype[t]}catch(o){try{s.prototype[t]=e}catch(l){}}}P[t]&&!r||m(P,t,r?e:N&&S[t]||e,n)}},$=function(t,e,r){var n,i;if(a){if(v){if(r)for(n in k)if(i=h[n],i&&c(i,t))try{delete i[t]}catch(s){}if(C[t]&&!r)return;try{return m(C,t,r?e:N&&C[t]||e)}catch(s){}}for(n in k)i=h[n],!i||i[t]&&!r||m(i,t,e)}};for(n in k)i=h[n],s=i&&i.prototype,s?T(s)[F]=i:N=!1;for(n in U)i=h[n],s=i&&i.prototype,s&&(T(s)[F]=i);if((!N||!l(C)||C===Function.prototype)&&(C=function(){throw new D("Incorrect invocation")},N))for(n in k)h[n]&&v(h[n],C);if((!N||!P||P===M)&&(P=C.prototype,N))for(n in k)h[n]&&v(h[n].prototype,P);if(N&&_(I)!==P&&v(I,P),a&&!c(P,O))for(n in L=!0,g(P,O,{configurable:!0,get:function(){return u(this)?this[B]:void 0}}),k)h[n]&&p(h[n],B,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:L&&B,aTypedArray:X,aTypedArrayConstructor:z,exportTypedArrayMethod:W,exportTypedArrayStaticMethod:$,getTypedArrayConstructor:j,isView:G,isTypedArray:H,TypedArray:C,TypedArrayPrototype:P}},4659:function(t,e,r){"use strict";var n=r(3724),i=r(4913),s=r(6980);t.exports=function(t,e,r){n?i.f(t,e,s(0,r)):t[e]=r}},4671:function(t){"use strict";t.exports=ReferenceError},4887:function(t,e,r){"use strict";var n,i=r(5631),s=r(9576);try{n=[].__proto__===Array.prototype}catch(l){if(!l||"object"!==typeof l||!("code"in l)||"ERR_PROTO_ACCESS"!==l.code)throw l}var o=!!n&&s&&s(Object.prototype,"__proto__"),a=Object,h=a.getPrototypeOf;t.exports=o&&"function"===typeof o.get?i([o.get]):"function"===typeof h&&function(t){return h(null==t?t:a(t))}},4901:function(t){"use strict";var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4913:function(t,e,r){"use strict";var n=r(3724),i=r(5917),s=r(8686),o=r(8551),a=r(6969),h=TypeError,l=Object.defineProperty,u=Object.getOwnPropertyDescriptor,c="enumerable",d="configurable",f="writable";e.f=n?s?function(t,e,r){if(o(t),e=a(e),o(r),"function"===typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]){var n=u(t,e);n&&n[f]&&(t[e]=r.value,r={configurable:d in r?r[d]:n[d],enumerable:c in r?r[c]:n[c],writable:!1})}return l(t,e,r)}:l:function(t,e,r){if(o(t),e=a(e),o(r),i)try{return l(t,e,r)}catch(n){}if("get"in r||"set"in r)throw new h("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},4916:function(t,e,r){"use strict";var n=r(7751),i=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},s=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};t.exports=function(t,e){var r=n("Set");try{(new r)[t](i(0));try{return(new r)[t](i(-1)),!1}catch(a){if(!e)return!0;try{return(new r)[t](s(-1/0)),!1}catch(h){var o=new r;return o.add(1),o.add(2),e(o[t](s(1/0)))}}}catch(h){return!1}}},4924:function(t){"use strict";var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(r){e=!1}t.exports=e},4977:function(t){"use strict";t.exports=Math.floor},4979:function(t,e,r){"use strict";var n=r(6518),i=r(4576),s=r(7751),o=r(6980),a=r(4913).f,h=r(9297),l=r(679),u=r(3167),c=r(2603),d=r(5002),f=r(6193),p=r(3724),m=r(6395),g="DOMException",y=s("Error"),_=s(g),v=function(){l(this,x);var t=arguments.length,e=c(t<1?void 0:arguments[0]),r=c(t<2?void 0:arguments[1],"Error"),n=new _(e,r),i=new y(e);return i.name=g,a(n,"stack",o(1,f(i.stack,1))),u(n,this,v),n},x=v.prototype=_.prototype,b="stack"in new y(g),E="stack"in new _(1,2),T=_&&p&&Object.getOwnPropertyDescriptor(i,g),w=!!T&&!(T.writable&&T.configurable),A=b&&!w&&!E;n({global:!0,constructor:!0,forced:m||A},{DOMException:A?v:_});var S=s(g),R=S.prototype;if(R.constructor!==S)for(var I in m||a(R,"constructor",o(1,S)),d)if(h(d,I)){var C=d[I],P=C.s;h(S,P)||a(S,P,o(6,C.c))}},5002:function(t){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},5024:function(t,e,r){"use strict";var n=r(6518),i=r(3650),s=r(9835),o=r(4916),a=!o("symmetricDifference")||!s("symmetricDifference");n({target:"Set",proto:!0,real:!0,forced:a},{symmetricDifference:i})},5031:function(t,e,r){"use strict";var n=r(7751),i=r(9504),s=r(8480),o=r(3717),a=r(8551),h=i([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=s.f(a(t)),r=o.f;return r?h(e,r(t)):e}},5072:function(t,e,r){"use strict";var n;r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698),r(9577);var i=r(2509),s=r(4302),o=r(1334),a=r(5619),h=r(4671),l=r(4195),u=r(9340),c=r(1868),d=r(3023),f=r(4977),p=r(2673),m=r(6931),g=r(409),y=r(7847),_=r(9234),v=Function,x=function(t){try{return v('"use strict"; return ('+t+").constructor;")()}catch(e){}},b=r(9576),E=r(4924),T=function(){throw new u},w=b?function(){try{return T}catch(t){try{return b(arguments,"callee").get}catch(e){return T}}}():T,A=r(8374)(),S=r(833),R=r(6417),I=r(6147),C=r(7551),P=r(2531),M={},D="undefined"!==typeof Uint8Array&&S?S(Uint8Array):n,O={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":A&&S?S([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":M,"%AsyncGenerator%":M,"%AsyncGeneratorFunction%":M,"%AsyncIteratorPrototype%":M,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"undefined"===typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":M,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":A&&S?S(S([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&A&&S?S((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":a,"%ReferenceError%":h,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&A&&S?S((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":A&&S?S(""[Symbol.iterator]()):n,"%Symbol%":A?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":w,"%TypedArray%":D,"%TypeError%":u,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet,"%Function.prototype.call%":P,"%Function.prototype.apply%":C,"%Object.defineProperty%":E,"%Object.getPrototypeOf%":R,"%Math.abs%":d,"%Math.floor%":f,"%Math.max%":p,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":y,"%Math.sign%":_,"%Reflect.getPrototypeOf%":I};if(S)try{null.error}catch(Y){var B=S(S(Y));O["%Error.prototype%"]=B}var F=function t(e){var r;if("%AsyncFunction%"===e)r=x("async function () {}");else if("%GeneratorFunction%"===e)r=x("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=x("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&S&&(r=S(i.prototype))}return O[e]=r,r},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=r(3682),k=r(1866),U=L.call(P,Array.prototype.concat),G=L.call(C,Array.prototype.splice),j=L.call(P,String.prototype.replace),H=L.call(P,String.prototype.slice),X=L.call(P,RegExp.prototype.exec),z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W=/\\(\\)?/g,$=function(t){var e=H(t,0,1),r=H(t,-1);if("%"===e&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return j(t,z,function(t,e,r,i){n[n.length]=r?j(i,W,"$1"):e||t}),n},V=function(t,e){var r,n=t;if(k(N,n)&&(r=N[n],n="%"+r[0]+"%"),k(O,n)){var i=O[n];if(i===M&&(i=F(n)),"undefined"===typeof i&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new l("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===X(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=$(t),n=r.length>0?r[0]:"",i=V("%"+n+"%",e),s=i.name,o=i.value,a=!1,h=i.alias;h&&(n=h[0],G(r,U([0,1],h)));for(var c=1,d=!0;c<r.length;c+=1){var f=r[c],p=H(f,0,1),m=H(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===m||"'"===m||"`"===m)&&p!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&d||(a=!0),n+="."+f,s="%"+n+"%",k(O,s))o=O[s];else if(null!=o){if(!(f in o)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(b&&c+1>=r.length){var g=b(o,f);d=!!g,o=d&&"get"in g&&!("originalValue"in g.get)?g.get:o[f]}else d=k(o,f),o=o[f];d&&!a&&(O[s]=o)}}return o}},5106:function(t,e,r){"use strict";r(4114);var n=r(6529);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],l=["{","}","|","\\","^","`"].concat(h),u=["'"].concat(l),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=255,p=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(5395);function x(t,e,r){if(t&&"object"===typeof t&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}function b(t){return"string"===typeof t&&(t=x(t)),t instanceof i?t.format():i.prototype.format.call(t)}function E(t,e){return x(t,!1,!0).resolve(e)}function T(t,e){return t?x(t,!1,!0).resolveObject(e):e}i.prototype.parse=function(t,e,r){if("string"!==typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=-1!==i&&i<t.indexOf("#")?"?":"#",h=t.split(o),l=/\\/g;h[0]=h[0].replace(l,"/"),t=h.join(o);var x=t;if(x=x.trim(),!r&&1===t.split("#").length){var b=a.exec(x);if(b)return this.path=x,this.href=x,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=s.exec(x);if(E){E=E[0];var T=E.toLowerCase();this.protocol=T,x=x.substr(E.length)}if(r||E||x.match(/^\/\/[^@/]+@[^@/]+/)){var w="//"===x.substr(0,2);!w||E&&y[E]||(x=x.substr(2),this.slashes=!0)}if(!y[E]&&(w||E&&!_[E])){for(var A,S,R=-1,I=0;I<d.length;I++){var C=x.indexOf(d[I]);-1!==C&&(-1===R||C<R)&&(R=C)}S=-1===R?x.lastIndexOf("@"):x.lastIndexOf("@",R),-1!==S&&(A=x.slice(0,S),x=x.slice(S+1),this.auth=decodeURIComponent(A)),R=-1;for(I=0;I<c.length;I++){C=x.indexOf(c[I]);-1!==C&&(-1===R||C<R)&&(R=C)}-1===R&&(R=x.length),this.host=x.slice(0,R),x=x.slice(R),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var M=this.hostname.split(/\./),D=(I=0,M.length);I<D;I++){var O=M[I];if(O&&!O.match(p)){for(var B="",F=0,N=O.length;F<N;F++)O.charCodeAt(F)>127?B+="x":B+=O[F];if(!B.match(p)){var L=M.slice(0,I),k=M.slice(I+1),U=O.match(m);U&&(L.push(U[1]),k.unshift(U[2])),k.length&&(x="/"+k.join(".")+x),this.hostname=L.join(".");break}}}this.hostname.length>f?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=n.toASCII(this.hostname));var G=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+G,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!g[T])for(I=0,D=u.length;I<D;I++){var H=u[I];if(-1!==x.indexOf(H)){var X=encodeURIComponent(H);X===H&&(X=escape(H)),x=x.split(H).join(X)}}var z=x.indexOf("#");-1!==z&&(this.hash=x.substr(z),x=x.slice(0,z));var W=x.indexOf("?");if(-1!==W?(this.search=x.substr(W),this.query=x.substr(W+1),e&&(this.query=v.parse(this.query)),x=x.slice(0,W)):e&&(this.search="",this.query={}),x&&(this.pathname=x),_[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var $=this.search||"";this.path=G+$}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"===typeof this.query&&Object.keys(this.query).length&&(s=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||_[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),e+i+r+o+n},i.prototype.resolve=function(t){return this.resolveObject(x(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if("string"===typeof t){var e=new i;e.parse(t,!1,!0),t=e}for(var r=new i,n=Object.keys(this),s=0;s<n.length;s++){var o=n[s];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),h=0;h<a.length;h++){var l=a[h];"protocol"!==l&&(r[l]=t[l])}return _[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!_[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var d=u[c];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||y[t.protocol])r.pathname=t.pathname;else{var f=(t.pathname||"").split("/");while(f.length&&!(t.host=f.shift()));t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",m=r.search||"";r.path=p+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=v||g||r.host&&t.pathname,b=x,E=r.pathname&&r.pathname.split("/")||[],T=(f=t.pathname&&t.pathname.split("/")||[],r.protocol&&!_[r.protocol]);if(T&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===E[0])),v)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),r.search=t.search,r.query=t.query;else if(null!=t.search){if(T){r.host=E.shift(),r.hostname=r.host;var w=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=E.slice(-1)[0],S=(r.host||t.host||E.length>1)&&("."===A||".."===A)||""===A,R=0,I=E.length;I>=0;I--)A=E[I],"."===A?E.splice(I,1):".."===A?(E.splice(I,1),R++):R&&(E.splice(I,1),R--);if(!x&&!b)for(;R--;R)E.unshift("..");!x||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),S&&"/"!==E.join("/").substr(-1)&&E.push("");var C=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(T){r.hostname=C?"":E.length?E.shift():"",r.host=r.hostname;w=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return x=x||r.host&&E.length,x&&!C&&E.unshift(""),E.length>0?r.pathname=E.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.qg=x,e.hd=E,e.GP=b},5130:function(t,e,r){"use strict";r.d(e,{Ef:function(){return $}});r(4114),r(8111),r(2489),r(7588),r(1701),r(3579),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var n=r(6768),i=r(4232);r(144);
/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let s;const o="undefined"!==typeof window&&window.trustedTypes;if(o)try{s=o.createPolicy("vue",{createHTML:t=>t})}catch(q){}const a=s?t=>s.createHTML(t):t=>t,h="http://www.w3.org/2000/svg",l="http://www.w3.org/1998/Math/MathML",u="undefined"!==typeof document?document:null,c=u&&u.createElement("template"),d={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,n)=>{const i="svg"===e?u.createElementNS(h,t):"mathml"===e?u.createElementNS(l,t):r?u.createElement(t,{is:r}):u.createElement(t);return"select"===t&&n&&null!=n.multiple&&i.setAttribute("multiple",n.multiple),i},createText:t=>u.createTextNode(t),createComment:t=>u.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>u.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,n,i,s){const o=r?r.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling)){while(1)if(e.insertBefore(i.cloneNode(!0),r),i===s||!(i=i.nextSibling))break}else{c.innerHTML=a("svg"===n?`<svg>${t}</svg>`:"mathml"===n?`<math>${t}</math>`:t);const i=c.content;if("svg"===n||"mathml"===n){const t=i.firstChild;while(t.firstChild)i.appendChild(t.firstChild);i.removeChild(t)}e.insertBefore(i,r)}return[o?o.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},f=Symbol("_vtc"),p={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};n.QP;function m(t,e,r){const n=t[f];n&&(e=(e?[e,...n]:[...n]).join(" ")),null==e?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const g=Symbol("_vod"),y=Symbol("_vsh");const _=Symbol("");const v=/(^|;)\s*display\s*:/;function x(t,e,r){const n=t.style,s=(0,i.Kg)(r);let o=!1;if(r&&!s){if(e)if((0,i.Kg)(e))for(const t of e.split(";")){const e=t.slice(0,t.indexOf(":")).trim();null==r[e]&&E(n,e,"")}else for(const t in e)null==r[t]&&E(n,t,"");for(const t in r)"display"===t&&(o=!0),E(n,t,r[t])}else if(s){if(e!==r){const t=n[_];t&&(r+=";"+t),n.cssText=r,o=v.test(r)}}else e&&t.removeAttribute("style");g in t&&(t[g]=o?n.display:"",t[y]&&(n.display="none"))}const b=/\s*!important$/;function E(t,e,r){if((0,i.cy)(r))r.forEach(r=>E(t,e,r));else if(null==r&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const n=A(t,e);b.test(r)?t.setProperty((0,i.Tg)(n),r.replace(b,""),"important"):t[n]=r}}const T=["Webkit","Moz","ms"],w={};function A(t,e){const r=w[e];if(r)return r;let n=(0,i.PT)(e);if("filter"!==n&&n in t)return w[e]=n;n=(0,i.ZH)(n);for(let i=0;i<T.length;i++){const r=T[i]+n;if(r in t)return w[e]=r}return e}const S="http://www.w3.org/1999/xlink";function R(t,e,r,n,s,o=(0,i.J$)(e)){n&&e.startsWith("xlink:")?null==r?t.removeAttributeNS(S,e.slice(6,e.length)):t.setAttributeNS(S,e,r):null==r||o&&!(0,i.Y2)(r)?t.removeAttribute(e):t.setAttribute(e,o?"":(0,i.Bm)(r)?String(r):r)}function I(t,e,r,n,s){if("innerHTML"===e||"textContent"===e)return void(null!=r&&(t[e]="innerHTML"===e?a(r):r));const o=t.tagName;if("value"===e&&"PROGRESS"!==o&&!o.includes("-")){const n="OPTION"===o?t.getAttribute("value")||"":t.value,i=null==r?"checkbox"===t.type?"on":"":String(r);return n===i&&"_value"in t||(t.value=i),null==r&&t.removeAttribute(e),void(t._value=r)}let h=!1;if(""===r||null==r){const n=typeof t[e];"boolean"===n?r=(0,i.Y2)(r):null==r&&"string"===n?(r="",h=!0):"number"===n&&(r=0,h=!0)}try{t[e]=r}catch(q){0}h&&t.removeAttribute(s||e)}function C(t,e,r,n){t.addEventListener(e,r,n)}function P(t,e,r,n){t.removeEventListener(e,r,n)}const M=Symbol("_vei");function D(t,e,r,n,i=null){const s=t[M]||(t[M]={}),o=s[e];if(n&&o)o.value=n;else{const[r,a]=B(e);if(n){const o=s[e]=k(n,i);C(t,r,o,a)}else o&&(P(t,r,o,a),s[e]=void 0)}}const O=/(?:Once|Passive|Capture)$/;function B(t){let e;if(O.test(t)){let r;e={};while(r=t.match(O))t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}const r=":"===t[2]?t.slice(3):(0,i.Tg)(t.slice(2));return[r,e]}let F=0;const N=Promise.resolve(),L=()=>F||(N.then(()=>F=0),F=Date.now());function k(t,e){const r=t=>{if(t._vts){if(t._vts<=r.attached)return}else t._vts=Date.now();(0,n.qL)(U(t,r.value),e,5,[t])};return r.value=t,r.attached=L(),r}function U(t,e){if((0,i.cy)(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(t=>e=>!e._stopped&&t&&t(e))}return e}const G=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,j=(t,e,r,n,s,o)=>{const a="svg"===s;"class"===e?m(t,n,a):"style"===e?x(t,r,n):(0,i.Mp)(e)?(0,i.CP)(e)||D(t,e,r,n,o):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):H(t,e,n,a))?(I(t,e,n),t.tagName.includes("-")||"value"!==e&&"checked"!==e&&"selected"!==e||R(t,e,n,a,o,"value"!==e)):!t._isVueCE||!/[A-Z]/.test(e)&&(0,i.Kg)(n)?("true-value"===e?t._trueValue=n:"false-value"===e&&(t._falseValue=n),R(t,e,n,a)):I(t,(0,i.PT)(e),n,o,e)};function H(t,e,r,n){if(n)return"innerHTML"===e||"textContent"===e||!!(e in t&&G(e)&&(0,i.Tn)(r));if("spellcheck"===e||"draggable"===e||"translate"===e||"autocorrect"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if("width"===e||"height"===e){const e=t.tagName;if("IMG"===e||"VIDEO"===e||"CANVAS"===e||"SOURCE"===e)return!1}return(!G(e)||!(0,i.Kg)(r))&&e in t}
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;Symbol("_moveCb"),Symbol("_enterCb");Symbol("_assign");const X=(0,i.X$)({patchProp:j},d);let z;function W(){return z||(z=(0,n.K9)(X))}const $=(...t)=>{const e=W().createApp(...t);const{mount:r}=e;return e.mount=t=>{const n=Y(t);if(!n)return;const s=e._component;(0,i.Tn)(s)||s.render||s.template||(s.template=n.innerHTML),1===n.nodeType&&(n.textContent="");const o=r(n,!1,V(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function V(t){return t instanceof SVGElement?"svg":"function"===typeof MathMLElement&&t instanceof MathMLElement?"mathml":void 0}function Y(t){if((0,i.Kg)(t)){const e=document.querySelector(t);return e}return t}},5170:function(t,e,r){"use strict";var n=r(6706),i=r(4402);t.exports=n(i.proto,"size","get")||function(t){return t.size}},5196:function(t){"use strict";t.exports="undefined"!==typeof Reflect&&Reflect&&Reflect.apply},5302:function(t){"use strict";t.exports=Number.isNaN||function(t){return t!==t}},5395:function(t,e,r){"use strict";var n=r(6210),i=r(6748),s=r(5767);t.exports={formats:s,parse:i,stringify:n}},5397:function(t,e,r){"use strict";var n=r(7055),i=r(7750);t.exports=function(t){return n(i(t))}},5610:function(t,e,r){"use strict";var n=r(1291),i=Math.max,s=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):s(r,e)}},5619:function(t){"use strict";t.exports=RangeError},5631:function(t,e,r){"use strict";var n=r(3682),i=r(9340),s=r(2531),o=r(4261);t.exports=function(t){if(t.length<1||"function"!==typeof t[0])throw new i("a function is required");return o(n,s,t)}},5745:function(t,e,r){"use strict";var n=r(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},5767:function(t){"use strict";var e=String.prototype.replace,r=/%20/g,n={RFC1738:"RFC1738",RFC3986:"RFC3986"};t.exports={default:n.RFC3986,formatters:{RFC1738:function(t){return e.call(t,r,"+")},RFC3986:function(t){return String(t)}},RFC1738:n.RFC1738,RFC3986:n.RFC3986}},5854:function(t,e,r){"use strict";var n=r(2777),i=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw new i("Can't convert number to bigint");return BigInt(e)}},5876:function(t,e,r){"use strict";var n=r(6518),i=r(3838),s=r(4916),o=!s("isSubsetOf",function(t){return t});n({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:i})},5917:function(t,e,r){"use strict";var n=r(3724),i=r(9039),s=r(4055);t.exports=!n&&!i(function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},5966:function(t,e,r){"use strict";var n=r(9306),i=r(4117);t.exports=function(t,e){var r=t[e];return i(r)?void 0:n(r)}},6080:function(t,e,r){"use strict";var n=r(7476),i=r(9306),s=r(616),o=n(n.bind);t.exports=function(t,e){return i(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},6119:function(t,e,r){"use strict";var n=r(5745),i=r(3392),s=n("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},6147:function(t){"use strict";t.exports="undefined"!==typeof Reflect&&Reflect.getPrototypeOf||null},6193:function(t,e,r){"use strict";var n=r(9504),i=Error,s=n("".replace),o=function(t){return String(new i(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,h=a.test(o);t.exports=function(t,e){if(h&&"string"==typeof t&&!i.prepareStackTrace)while(e--)t=s(t,a,"");return t}},6198:function(t,e,r){"use strict";var n=r(8014);t.exports=function(t){return n(t.length)}},6210:function(t,e,r){"use strict";r(4114),r(8111),r(2489);var n=r(9511),i=r(2958),s=r(5767),o=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},h=Array.isArray,l=Array.prototype.push,u=function(t,e){l.apply(t,h(e)?e:[e])},c=Date.prototype.toISOString,d=s["default"],f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:i.encode,encodeValuesOnly:!1,filter:void 0,format:d,formatter:s.formatters[d],indices:!1,serializeDate:function(t){return c.call(t)},skipNulls:!1,strictNullHandling:!1},p=function(t){return"string"===typeof t||"number"===typeof t||"boolean"===typeof t||"symbol"===typeof t||"bigint"===typeof t},m={},g=function t(e,r,s,o,a,l,c,d,g,y,_,v,x,b,E,T,w,A){var S=e,R=A,I=0,C=!1;while(void 0!==(R=R.get(m))&&!C){var P=R.get(e);if(I+=1,"undefined"!==typeof P){if(P===I)throw new RangeError("Cyclic object value");C=!0}"undefined"===typeof R.get(m)&&(I=0)}if("function"===typeof y?S=y(r,S):S instanceof Date?S=x(S):"comma"===s&&h(S)&&(S=i.maybeMap(S,function(t){return t instanceof Date?x(t):t})),null===S){if(l)return g&&!T?g(r,f.encoder,w,"key",b):r;S=""}if(p(S)||i.isBuffer(S)){if(g){var M=T?r:g(r,f.encoder,w,"key",b);return[E(M)+"="+E(g(S,f.encoder,w,"value",b))]}return[E(r)+"="+E(String(S))]}var D,O=[];if("undefined"===typeof S)return O;if("comma"===s&&h(S))T&&g&&(S=i.maybeMap(S,g)),D=[{value:S.length>0?S.join(",")||null:void 0}];else if(h(y))D=y;else{var B=Object.keys(S);D=_?B.sort(_):B}var F=d?String(r).replace(/\./g,"%2E"):String(r),N=o&&h(S)&&1===S.length?F+"[]":F;if(a&&h(S)&&0===S.length)return N+"[]";for(var L=0;L<D.length;++L){var k=D[L],U="object"===typeof k&&k&&"undefined"!==typeof k.value?k.value:S[k];if(!c||null!==U){var G=v&&d?String(k).replace(/\./g,"%2E"):String(k),j=h(S)?"function"===typeof s?s(N,G):N:N+(v?"."+G:"["+G+"]");A.set(e,I);var H=n();H.set(m,A),u(O,t(U,j,s,o,a,l,c,d,"comma"===s&&T&&h(S)?null:g,y,_,v,x,b,E,T,w,H))}}return O},y=function(t){if(!t)return f;if("undefined"!==typeof t.allowEmptyArrays&&"boolean"!==typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof t.encodeDotInKeys&&"boolean"!==typeof t.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.encoder&&"undefined"!==typeof t.encoder&&"function"!==typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||f.charset;if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=s["default"];if("undefined"!==typeof t.format){if(!o.call(s.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n,i=s.formatters[r],l=f.filter;if(("function"===typeof t.filter||h(t.filter))&&(l=t.filter),n=t.arrayFormat in a?t.arrayFormat:"indices"in t?t.indices?"indices":"repeat":f.arrayFormat,"commaRoundTrip"in t&&"boolean"!==typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u="undefined"===typeof t.allowDots?!0===t.encodeDotInKeys||f.allowDots:!!t.allowDots;return{addQueryPrefix:"boolean"===typeof t.addQueryPrefix?t.addQueryPrefix:f.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"===typeof t.allowEmptyArrays?!!t.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:n,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:f.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:"undefined"===typeof t.delimiter?f.delimiter:t.delimiter,encode:"boolean"===typeof t.encode?t.encode:f.encode,encodeDotInKeys:"boolean"===typeof t.encodeDotInKeys?t.encodeDotInKeys:f.encodeDotInKeys,encoder:"function"===typeof t.encoder?t.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof t.encodeValuesOnly?t.encodeValuesOnly:f.encodeValuesOnly,filter:l,format:r,formatter:i,serializeDate:"function"===typeof t.serializeDate?t.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof t.skipNulls?t.skipNulls:f.skipNulls,sort:"function"===typeof t.sort?t.sort:null,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:f.strictNullHandling}};t.exports=function(t,e){var r,i,s=t,o=y(e);"function"===typeof o.filter?(i=o.filter,s=i("",s)):h(o.filter)&&(i=o.filter,r=i);var l=[];if("object"!==typeof s||null===s)return"";var c=a[o.arrayFormat],d="comma"===c&&o.commaRoundTrip;r||(r=Object.keys(s)),o.sort&&r.sort(o.sort);for(var f=n(),p=0;p<r.length;++p){var m=r[p],_=s[m];o.skipNulls&&null===_||u(l,g(_,m,c,d,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,f))}var v=l.join(o.delimiter),x=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),v.length>0?x+v:""}},6269:function(t){"use strict";t.exports={}},6279:function(t,e,r){"use strict";var n=r(6840);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},6319:function(t,e,r){"use strict";var n=r(8551),i=r(9539);t.exports=function(t,e,r,s){try{return s?e(n(r)[0],r[1]):e(r)}catch(o){i(t,"throw",o)}}},6395:function(t){"use strict";t.exports=!1},6417:function(t,e,r){"use strict";var n=r(2509);t.exports=n.getPrototypeOf||null},6518:function(t,e,r){"use strict";var n=r(4576),i=r(7347).f,s=r(6699),o=r(6840),a=r(9433),h=r(7740),l=r(2796);t.exports=function(t,e){var r,u,c,d,f,p,m=t.target,g=t.global,y=t.stat;if(u=g?n:y?n[m]||a(m,{}):n[m]&&n[m].prototype,u)for(c in e){if(f=e[c],t.dontCallGetSet?(p=i(u,c),d=p&&p.value):d=u[c],r=l(g?c:m+(y?".":"#")+c,t.forced),!r&&void 0!==d){if(typeof f==typeof d)continue;h(f,d)}(t.sham||d&&d.sham)&&s(f,"sham",!0),o(u,c,f,t)}}},6529:function(t,e,r){var n;t=r.nmd(t),r(4114),function(){e&&e.nodeType,t&&t.nodeType;var i="object"==typeof r.g&&r.g;i.global!==i&&i.window!==i&&i.self;var s,o=2147483647,a=36,h=1,l=26,u=38,c=700,d=72,f=128,p="-",m=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=a-h,x=Math.floor,b=String.fromCharCode;function E(t){throw new RangeError(_[t])}function T(t,e){var r=t.length,n=[];while(r--)n[r]=e(t[r]);return n}function w(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(y,".");var i=t.split("."),s=T(i,e).join(".");return n+s}function A(t){var e,r,n=[],i=0,s=t.length;while(i<s)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<s?(r=t.charCodeAt(i++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--)):n.push(e);return n}function S(t){return T(t,function(t){var e="";return t>65535&&(t-=65536,e+=b(t>>>10&1023|55296),t=56320|1023&t),e+=b(t),e}).join("")}function R(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:a}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function C(t,e,r){var n=0;for(t=r?x(t/c):t>>1,t+=x(t/e);t>v*l>>1;n+=a)t=x(t/v);return x(n+(v+1)*t/(t+u))}function P(t){var e,r,n,i,s,u,c,m,g,y,_=[],v=t.length,b=0,T=f,w=d;for(r=t.lastIndexOf(p),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&E("not-basic"),_.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<v;){for(s=b,u=1,c=a;;c+=a){if(i>=v&&E("invalid-input"),m=R(t.charCodeAt(i++)),(m>=a||m>x((o-b)/u))&&E("overflow"),b+=m*u,g=c<=w?h:c>=w+l?l:c-w,m<g)break;y=a-g,u>x(o/y)&&E("overflow"),u*=y}e=_.length+1,w=C(b-s,e,0==s),x(b/e)>o-T&&E("overflow"),T+=x(b/e),b%=e,_.splice(b++,0,T)}return S(_)}function M(t){var e,r,n,i,s,u,c,m,g,y,_,v,T,w,S,R=[];for(t=A(t),v=t.length,e=f,r=0,s=d,u=0;u<v;++u)_=t[u],_<128&&R.push(b(_));n=i=R.length,i&&R.push(p);while(n<v){for(c=o,u=0;u<v;++u)_=t[u],_>=e&&_<c&&(c=_);for(T=n+1,c-e>x((o-r)/T)&&E("overflow"),r+=(c-e)*T,e=c,u=0;u<v;++u)if(_=t[u],_<e&&++r>o&&E("overflow"),_==e){for(m=r,g=a;;g+=a){if(y=g<=s?h:g>=s+l?l:g-s,m<y)break;S=m-y,w=a-y,R.push(b(I(y+S%w,0))),m=x(S/w)}R.push(b(I(m,0))),s=C(r,T,n==i),r=0,++n}++r,++e}return R.join("")}function D(t){return w(t,function(t){return m.test(t)?P(t.slice(4).toLowerCase()):t})}function O(t){return w(t,function(t){return g.test(t)?"xn--"+M(t):t})}s={version:"1.4.1",ucs2:{decode:A,encode:S},decode:P,encode:M,toASCII:O,toUnicode:D},n=function(){return s}.call(e,r,e,t),void 0===n||(t.exports=n)}()},6583:function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n,s,a,h,l,u,d,f=e&&e.length,p=f?e[0]*r:t.length,m=i(t,0,p,r,!0),g=[];if(!m||m.next===m.prev)return g;if(f&&(m=c(t,e,m,r)),t.length>80*r){n=a=t[0],s=h=t[1];for(var y=r;y<p;y+=r)l=t[y],u=t[y+1],l<n&&(n=l),u<s&&(s=u),l>a&&(a=l),u>h&&(h=u);d=Math.max(a-n,h-s),d=0!==d?32767/d:0}return o(m,g,r,n,s,d,0),g}function i(t,e,r,n,i){var s,o;if(i===B(t,e,r,n)>0)for(s=e;s<r;s+=n)o=M(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=M(s,t[s],t[s+1],o);return o&&T(o,o.next)&&(D(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!T(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{if(D(n),n=e=n.prev,n===n.next)break;r=!0}}while(r||n!==e);return e}function o(t,e,r,n,i,c,d){if(t){!d&&c&&g(t,n,i,c);var f,p,m=t;while(t.prev!==t.next)if(f=t.prev,p=t.next,c?h(t,n,i,c):a(t))e.push(f.i/r|0),e.push(t.i/r|0),e.push(p.i/r|0),D(t),t=p.next,m=p.next;else if(t=p,t===m){d?1===d?(t=l(s(t),e,r),o(t,e,r,n,i,c,2)):2===d&&u(t,e,r,n,i,c):o(s(t),e,r,n,i,c,1);break}}}function a(t){var e=t.prev,r=t,n=t.next;if(E(e,r,n)>=0)return!1;var i=e.x,s=r.x,o=n.x,a=e.y,h=r.y,l=n.y,u=i<s?i<o?i:o:s<o?s:o,c=a<h?a<l?a:l:h<l?h:l,d=i>s?i>o?i:o:s>o?s:o,f=a>h?a>l?a:l:h>l?h:l,p=n.next;while(p!==e){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=f&&x(i,a,s,h,o,l,p.x,p.y)&&E(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function h(t,e,r,n){var i=t.prev,s=t,o=t.next;if(E(i,s,o)>=0)return!1;var a=i.x,h=s.x,l=o.x,u=i.y,c=s.y,d=o.y,f=a<h?a<l?a:l:h<l?h:l,p=u<c?u<d?u:d:c<d?c:d,m=a>h?a>l?a:l:h>l?h:l,g=u>c?u>d?u:d:c>d?c:d,y=_(f,p,e,r,n),v=_(m,g,e,r,n),b=t.prevZ,T=t.nextZ;while(b&&b.z>=y&&T&&T.z<=v){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&x(a,u,h,c,l,d,b.x,b.y)&&E(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,T.x>=f&&T.x<=m&&T.y>=p&&T.y<=g&&T!==i&&T!==o&&x(a,u,h,c,l,d,T.x,T.y)&&E(T.prev,T,T.next)>=0)return!1;T=T.nextZ}while(b&&b.z>=y){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&x(a,u,h,c,l,d,b.x,b.y)&&E(b.prev,b,b.next)>=0)return!1;b=b.prevZ}while(T&&T.z<=v){if(T.x>=f&&T.x<=m&&T.y>=p&&T.y<=g&&T!==i&&T!==o&&x(a,u,h,c,l,d,T.x,T.y)&&E(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function l(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!T(i,o)&&w(i,n,n.next,o)&&I(i,o)&&I(o,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(o.i/r|0),D(n),D(n.next),n=t=o),n=n.next}while(n!==t);return s(n)}function u(t,e,r,n,i,a){var h=t;do{var l=h.next.next;while(l!==h.prev){if(h.i!==l.i&&b(h,l)){var u=P(h,l);return h=s(h,h.next),u=s(u,u.next),o(h,e,r,n,i,a,0),void o(u,e,r,n,i,a,0)}l=l.next}h=h.next}while(h!==t)}function c(t,e,r,n){var s,o,a,h,l,u=[];for(s=0,o=e.length;s<o;s++)a=e[s]*n,h=s<o-1?e[s+1]*n:t.length,l=i(t,a,h,n,!1),l===l.next&&(l.steiner=!0),u.push(v(l));for(u.sort(d),s=0;s<u.length;s++)r=f(u[s],r);return r}function d(t,e){return t.x-e.x}function f(t,e){var r=p(t,e);if(!r)return e;var n=P(r,t);return s(n,n.next),s(r,r.next)}function p(t,e){var r,n=e,i=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>o&&(o=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==e);if(!r)return null;var h,l=r,u=r.x,c=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&x(s<c?i:o,s,u,c,s<c?o:i,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(i-n.x),I(n,t)&&(h<d||h===d&&(n.x>r.x||n.x===r.x&&m(r,n)))&&(r=n,d=h)),n=n.next}while(n!==l);return r}function m(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}function g(t,e,r,n){var i=t;do{0===i.z&&(i.z=_(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,y(i)}function y(t){var e,r,n,i,s,o,a,h,l=1;do{r=t,t=null,s=null,o=0;while(r){for(o++,n=r,a=0,e=0;e<l;e++)if(a++,n=n.nextZ,!n)break;h=l;while(a>0||h>0&&n)0!==a&&(0===h||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,l*=2}while(o>1);return t}function _(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function v(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function x(t,e,r,n,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!R(t,e)&&(I(t,e)&&I(e,t)&&C(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||T(t,e)&&E(t.prev,t,t.next)>0&&E(e.prev,e,e.next)>0)}function E(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function T(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,r,n){var i=S(E(t,e,r)),s=S(E(t,e,n)),o=S(E(r,n,t)),a=S(E(r,n,e));return i!==s&&o!==a||(!(0!==i||!A(t,r,e))||(!(0!==s||!A(t,n,e))||(!(0!==o||!A(r,t,n))||!(0!==a||!A(r,e,n)))))}function A(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function S(t){return t>0?1:t<0?-1:0}function R(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&w(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function I(t,e){return E(t.prev,t,t.next)<0?E(t,e,t.next)>=0&&E(t,t.prev,e)>=0:E(t,e,t.prev)<0||E(t,t.next,e)<0}function C(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!==r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}function P(t,e){var r=new O(t.i,t.x,t.y),n=new O(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function M(t,e,r,n){var i=new O(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function D(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}r(4114),t.exports=n,t.exports["default"]=n,n.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(B(t,0,s,r));if(i)for(var a=0,h=e.length;a<h;a++){var l=e[a]*r,u=a<h-1?e[a+1]*r:t.length;o-=Math.abs(B(t,l,u,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},6699:function(t,e,r){"use strict";var n=r(3724),i=r(4913),s=r(6980);t.exports=n?function(t,e,r){return i.f(t,e,s(1,r))}:function(t,e,r){return t[e]=r,t}},6706:function(t,e,r){"use strict";var n=r(9504),i=r(9306);t.exports=function(t,e,r){try{return n(i(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(s){}}},6748:function(t,e,r){"use strict";r(4114);var n=r(2958),i=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},a=function(t){return t.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},h=function(t,e,r){if(t&&"string"===typeof t&&e.comma&&t.indexOf(",")>-1)return t.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(1===e.arrayLimit?"":"s")+" allowed in an array.");return t},l="utf8=%26%2310003%3B",u="utf8=%E2%9C%93",c=function(t,e){var r={__proto__:null},c=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var d=e.parameterLimit===1/0?void 0:e.parameterLimit,f=c.split(e.delimiter,e.throwOnLimitExceeded?d+1:d);if(e.throwOnLimitExceeded&&f.length>d)throw new RangeError("Parameter limit exceeded. Only "+d+" parameter"+(1===d?"":"s")+" allowed.");var p,m=-1,g=e.charset;if(e.charsetSentinel)for(p=0;p<f.length;++p)0===f[p].indexOf("utf8=")&&(f[p]===u?g="utf-8":f[p]===l&&(g="iso-8859-1"),m=p,p=f.length);for(p=0;p<f.length;++p)if(p!==m){var y,_,v=f[p],x=v.indexOf("]="),b=-1===x?v.indexOf("="):x+1;-1===b?(y=e.decoder(v,o.decoder,g,"key"),_=e.strictNullHandling?null:""):(y=e.decoder(v.slice(0,b),o.decoder,g,"key"),_=n.maybeMap(h(v.slice(b+1),e,s(r[y])?r[y].length:0),function(t){return e.decoder(t,o.decoder,g,"value")})),_&&e.interpretNumericEntities&&"iso-8859-1"===g&&(_=a(String(_))),v.indexOf("[]=")>-1&&(_=s(_)?[_]:_);var E=i.call(r,y);E&&"combine"===e.duplicates?r[y]=n.combine(r[y],_):E&&"last"!==e.duplicates||(r[y]=_)}return r},d=function(t,e,r,i){var s=0;if(t.length>0&&"[]"===t[t.length-1]){var o=t.slice(0,-1).join("");s=Array.isArray(e)&&e[o]?e[o].length:0}for(var a=i?e:h(e,r,s),l=t.length-1;l>=0;--l){var u,c=t[l];if("[]"===c&&r.parseArrays)u=r.allowEmptyArrays&&(""===a||r.strictNullHandling&&null===a)?[]:n.combine([],a);else{u=r.plainObjects?{__proto__:null}:{};var d="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,f=r.decodeDotInKeys?d.replace(/%2E/g,"."):d,p=parseInt(f,10);r.parseArrays||""!==f?!isNaN(p)&&c!==f&&String(p)===f&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(u=[],u[p]=a):"__proto__"!==f&&(u[f]=a):u={0:a}}a=u}return a},f=function(t,e,r,n){if(t){var s=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,h=r.depth>0&&o.exec(s),l=h?s.slice(0,h.index):s,u=[];if(l){if(!r.plainObjects&&i.call(Object.prototype,l)&&!r.allowPrototypes)return;u.push(l)}var c=0;while(r.depth>0&&null!==(h=a.exec(s))&&c<r.depth){if(c+=1,!r.plainObjects&&i.call(Object.prototype,h[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(h[1])}if(h){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");u.push("["+s.slice(h.index)+"]")}return d(u,e,r,n)}},p=function(t){if(!t)return o;if("undefined"!==typeof t.allowEmptyArrays&&"boolean"!==typeof t.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof t.decodeDotInKeys&&"boolean"!==typeof t.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==t.decoder&&"undefined"!==typeof t.decoder&&"function"!==typeof t.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if("undefined"!==typeof t.throwOnLimitExceeded&&"boolean"!==typeof t.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var e="undefined"===typeof t.charset?o.charset:t.charset,r="undefined"===typeof t.duplicates?o.duplicates:t.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");var i="undefined"===typeof t.allowDots?!0===t.decodeDotInKeys||o.allowDots:!!t.allowDots;return{allowDots:i,allowEmptyArrays:"boolean"===typeof t.allowEmptyArrays?!!t.allowEmptyArrays:o.allowEmptyArrays,allowPrototypes:"boolean"===typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"===typeof t.allowSparse?t.allowSparse:o.allowSparse,arrayLimit:"number"===typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:o.charsetSentinel,comma:"boolean"===typeof t.comma?t.comma:o.comma,decodeDotInKeys:"boolean"===typeof t.decodeDotInKeys?t.decodeDotInKeys:o.decodeDotInKeys,decoder:"function"===typeof t.decoder?t.decoder:o.decoder,delimiter:"string"===typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:o.delimiter,depth:"number"===typeof t.depth||!1===t.depth?+t.depth:o.depth,duplicates:r,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof t.interpretNumericEntities?t.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"===typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"===typeof t.plainObjects?t.plainObjects:o.plainObjects,strictDepth:"boolean"===typeof t.strictDepth?!!t.strictDepth:o.strictDepth,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling,throwOnLimitExceeded:"boolean"===typeof t.throwOnLimitExceeded&&t.throwOnLimitExceeded}};t.exports=function(t,e){var r=p(e);if(""===t||null===t||"undefined"===typeof t)return r.plainObjects?{__proto__:null}:{};for(var i="string"===typeof t?c(t,r):t,s=r.plainObjects?{__proto__:null}:{},o=Object.keys(i),a=0;a<o.length;++a){var h=o[a],l=f(h,i[h],r,"string"===typeof t);s=n.merge(s,l,r)}return!0===r.allowSparse?s:n.compact(s)}},6768:function(t,e,r){"use strict";r.d(e,{$u:function(){return nt},CE:function(){return je},Df:function(){return G},FK:function(){return Pe},Gy:function(){return B},K9:function(){return ne},MZ:function(){return U},OW:function(){return k},QP:function(){return N},bF:function(){return Ve},dY:function(){return g},nI:function(){return ar},qL:function(){return o},uX:function(){return Ne}});r(4114),r(8111),r(1148),r(2489),r(7588),r(1701),r(8237),r(3579),r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698);var n=r(144),i=r(4232);function s(t,e,r,n){try{return n?t(...n):t()}catch(i){a(i,e,r)}}function o(t,e,r,n){if((0,i.Tn)(t)){const o=s(t,e,r,n);return o&&(0,i.yL)(o)&&o.catch(t=>{a(t,e,r)}),o}if((0,i.cy)(t)){const i=[];for(let s=0;s<t.length;s++)i.push(o(t[s],e,r,n));return i}}function a(t,e,r,o=!0){const a=e?e.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||i.MZ;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${r}`;while(i){const e=i.ec;if(e)for(let r=0;r<e.length;r++)if(!1===e[r](t,o,a))return;i=i.parent}if(l)return(0,n.C4)(),s(l,null,10,[t,o,a]),void(0,n.bl)()}h(t,r,a,o,u)}function h(t,e,r,n=!0,i=!1){if(i)throw t;console.error(t)}const l=[];let u=-1;const c=[];let d=null,f=0;const p=Promise.resolve();let m=null;function g(t){const e=m||p;return t?e.then(this?t.bind(this):t):e}function y(t){let e=u+1,r=l.length;while(e<r){const n=e+r>>>1,i=l[n],s=T(i);s<t||s===t&&2&i.flags?e=n+1:r=n}return e}function _(t){if(!(1&t.flags)){const e=T(t),r=l[l.length-1];!r||!(2&t.flags)&&e>=T(r)?l.push(t):l.splice(y(e),0,t),t.flags|=1,v()}}function v(){m||(m=p.then(w))}function x(t){(0,i.cy)(t)?c.push(...t):d&&-1===t.id?d.splice(f+1,0,t):1&t.flags||(c.push(t),t.flags|=1),v()}function b(t,e,r=u+1){for(0;r<l.length;r++){const e=l[r];if(e&&2&e.flags){if(t&&e.id!==t.uid)continue;0,l.splice(r,1),r--,4&e.flags&&(e.flags&=-2),e(),4&e.flags||(e.flags&=-2)}}}function E(t){if(c.length){const t=[...new Set(c)].sort((t,e)=>T(t)-T(e));if(c.length=0,d)return void d.push(...t);for(d=t,f=0;f<d.length;f++){const t=d[f];0,4&t.flags&&(t.flags&=-2),8&t.flags||t(),t.flags&=-2}d=null,f=0}}const T=t=>null==t.id?2&t.flags?-1:1/0:t.id;function w(t){i.tE;try{for(u=0;u<l.length;u++){const t=l[u];!t||8&t.flags||(4&t.flags&&(t.flags&=-2),s(t,t.i,t.i?15:14),4&t.flags||(t.flags&=-2))}}finally{for(;u<l.length;u++){const t=l[u];t&&(t.flags&=-2)}u=-1,l.length=0,E(t),m=null,(l.length||c.length)&&w(t)}}let A=null,S=null;function R(t){const e=A;return A=t,S=t&&t.type.__scopeId||null,e}function I(t,e=A,r){if(!e)return t;if(t._n)return t;const n=(...r)=>{n._d&&Ue(-1);const i=R(e);let s;try{s=t(...r)}finally{R(i),n._d&&Ue(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}function C(t,e,r,i){const s=t.dirs,a=e&&e.dirs;for(let h=0;h<s.length;h++){const l=s[h];a&&(l.oldValue=a[h].value);let u=l.dir[i];u&&((0,n.C4)(),o(u,r,8,[t.el,l,t,e]),(0,n.bl)())}}const P=Symbol("_vte"),M=t=>t.__isTeleport;const D=Symbol("_leaveCb"),O=Symbol("_enterCb");function B(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return et(()=>{t.isMounted=!0}),it(()=>{t.isUnmounting=!0}),t}const F=[Function,Array],N={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:F,onEnter:F,onAfterEnter:F,onEnterCancelled:F,onBeforeLeave:F,onLeave:F,onAfterLeave:F,onLeaveCancelled:F,onBeforeAppear:F,onAppear:F,onAfterAppear:F,onAppearCancelled:F};function L(t,e){const{leavingVNodes:r}=t;let n=r.get(e.type);return n||(n=Object.create(null),r.set(e.type,n)),n}function k(t,e,r,n,s){const{appear:a,mode:h,persisted:l=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:d,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:_,onAppear:v,onAfterAppear:x,onAppearCancelled:b}=e,E=String(t.key),T=L(r,t),w=(t,e)=>{t&&o(t,n,9,e)},A=(t,e)=>{const r=e[1];w(t,e),(0,i.cy)(t)?t.every(t=>t.length<=1)&&r():t.length<=1&&r()},S={mode:h,persisted:l,beforeEnter(e){let n=u;if(!r.isMounted){if(!a)return;n=_||u}e[D]&&e[D](!0);const i=T[E];i&&Xe(t,i)&&i.el[D]&&i.el[D](),w(n,[e])},enter(t){let e=c,n=d,i=f;if(!r.isMounted){if(!a)return;e=v||c,n=x||d,i=b||f}let s=!1;const o=t[O]=e=>{s||(s=!0,w(e?i:n,[t]),S.delayedLeave&&S.delayedLeave(),t[O]=void 0)};e?A(e,[t,o]):o()},leave(e,n){const i=String(t.key);if(e[O]&&e[O](!0),r.isUnmounting)return n();w(p,[e]);let s=!1;const o=e[D]=r=>{s||(s=!0,n(),w(r?y:g,[e]),e[D]=void 0,T[i]===t&&delete T[i])};T[i]=t,m?A(m,[e,o]):o()},clone(t){const i=k(t,e,r,n,s);return s&&s(i),i}};return S}function U(t,e){6&t.shapeFlag&&t.component?(t.transition=e,U(t.component.subTree,e)):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function G(t,e=!1,r){let n=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=null==r?o.key:String(r)+String(null!=o.key?o.key:s);o.type===Pe?(128&o.patchFlag&&i++,n=n.concat(G(o.children,e,a))):(e||o.type!==De)&&n.push(null!=a?Ke(o,{key:a}):o)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}
/*! #__NO_SIDE_EFFECTS__ */function j(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function H(t,e,r,o,a=!1){if((0,i.cy)(t))return void t.forEach((t,n)=>H(t,e&&((0,i.cy)(e)?e[n]:e),r,o,a));if(X(o)&&!a)return void(512&o.shapeFlag&&o.type.__asyncResolved&&o.component.subTree.component&&H(t,e,r,o.component.subTree));const h=4&o.shapeFlag?Er(o.component):o.el,l=a?null:h,{i:u,r:c}=t;const d=e&&e.r,f=u.refs===i.MZ?u.refs={}:u.refs,p=u.setupState,m=(0,n.ux)(p),g=p===i.MZ?()=>!1:t=>(0,i.$3)(m,t);if(null!=d&&d!==c&&((0,i.Kg)(d)?(f[d]=null,g(d)&&(p[d]=null)):(0,n.i9)(d)&&(d.value=null)),(0,i.Tn)(c))s(c,u,12,[l,f]);else{const e=(0,i.Kg)(c),s=(0,n.i9)(c);if(e||s){const n=()=>{if(t.f){const r=e?g(c)?p[c]:f[c]:c.value;a?(0,i.cy)(r)&&(0,i.TF)(r,h):(0,i.cy)(r)?r.includes(h)||r.push(h):e?(f[c]=[h],g(c)&&(p[c]=f[c])):(c.value=[h],t.k&&(f[t.k]=c.value))}else e?(f[c]=l,g(c)&&(p[c]=l)):s&&(c.value=l,t.k&&(f[t.k]=l))};l?(n.id=-1,re(n,r)):n()}else 0}}(0,i.We)().requestIdleCallback,(0,i.We)().cancelIdleCallback;const X=t=>!!t.type.__asyncLoader;
/*! #__NO_SIDE_EFFECTS__ */const z=t=>t.type.__isKeepAlive;RegExp,RegExp;function W(t,e){return(0,i.cy)(t)?t.some(t=>W(t,e)):(0,i.Kg)(t)?t.split(",").includes(e):!!(0,i.gd)(t)&&(t.lastIndex=0,t.test(e))}function $(t,e){Y(t,"a",e)}function V(t,e){Y(t,"da",e)}function Y(t,e,r=or){const n=t.__wdc||(t.__wdc=()=>{let e=r;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Q(e,n,r),r){let t=r.parent;while(t&&t.parent)z(t.parent.vnode)&&q(n,e,r,t),t=t.parent}}function q(t,e,r,n){const s=Q(e,t,n,!0);st(()=>{(0,i.TF)(n[e],s)},r)}function K(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Z(t){return 128&t.shapeFlag?t.ssContent:t}function Q(t,e,r=or,i=!1){if(r){const s=r[t]||(r[t]=[]),a=e.__weh||(e.__weh=(...i)=>{(0,n.C4)();const s=ur(r),a=o(e,r,t,i);return s(),(0,n.bl)(),a});return i?s.unshift(a):s.push(a),a}}const J=t=>(e,r=or)=>{mr&&"sp"!==t||Q(t,(...t)=>e(...t),r)},tt=J("bm"),et=J("m"),rt=J("bu"),nt=J("u"),it=J("bum"),st=J("um"),ot=J("sp"),at=J("rtg"),ht=J("rtc");function lt(t,e=or){Q("ec",t,e)}const ut=Symbol.for("v-ndc");const ct=t=>t?dr(t)?Er(t):ct(t.parent):null,dt=(0,i.X$)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ct(t.parent),$root:t=>ct(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>bt(t),$forceUpdate:t=>t.f||(t.f=()=>{_(t.update)}),$nextTick:t=>t.n||(t.n=g.bind(t.proxy)),$watch:t=>ge.bind(t)}),ft=(t,e)=>t!==i.MZ&&!t.__isScriptSetup&&(0,i.$3)(t,e),pt={get({_:t},e){if("__v_skip"===e)return!0;const{ctx:r,setupState:s,data:o,props:a,accessCache:h,type:l,appContext:u}=t;let c;if("$"!==e[0]){const n=h[e];if(void 0!==n)switch(n){case 1:return s[e];case 2:return o[e];case 4:return r[e];case 3:return a[e]}else{if(ft(s,e))return h[e]=1,s[e];if(o!==i.MZ&&(0,i.$3)(o,e))return h[e]=2,o[e];if((c=t.propsOptions[0])&&(0,i.$3)(c,e))return h[e]=3,a[e];if(r!==i.MZ&&(0,i.$3)(r,e))return h[e]=4,r[e];gt&&(h[e]=0)}}const d=dt[e];let f,p;return d?("$attrs"===e&&(0,n.u4)(t.attrs,"get",""),d(t)):(f=l.__cssModules)&&(f=f[e])?f:r!==i.MZ&&(0,i.$3)(r,e)?(h[e]=4,r[e]):(p=u.config.globalProperties,(0,i.$3)(p,e)?p[e]:void 0)},set({_:t},e,r){const{data:n,setupState:s,ctx:o}=t;return ft(s,e)?(s[e]=r,!0):n!==i.MZ&&(0,i.$3)(n,e)?(n[e]=r,!0):!(0,i.$3)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=r,!0))},has({_:{data:t,setupState:e,accessCache:r,ctx:n,appContext:s,propsOptions:o}},a){let h;return!!r[a]||t!==i.MZ&&(0,i.$3)(t,a)||ft(e,a)||(h=o[0])&&(0,i.$3)(h,a)||(0,i.$3)(n,a)||(0,i.$3)(dt,a)||(0,i.$3)(s.config.globalProperties,a)},defineProperty(t,e,r){return null!=r.get?t._.accessCache[e]=0:(0,i.$3)(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function mt(t){return(0,i.cy)(t)?t.reduce((t,e)=>(t[e]=null,t),{}):t}let gt=!0;function yt(t){const e=bt(t),r=t.proxy,s=t.ctx;gt=!1,e.beforeCreate&&vt(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:h,watch:l,provide:u,inject:c,created:d,beforeMount:f,mounted:p,beforeUpdate:m,updated:g,activated:y,deactivated:_,beforeDestroy:v,beforeUnmount:x,destroyed:b,unmounted:E,render:T,renderTracked:w,renderTriggered:A,errorCaptured:S,serverPrefetch:R,expose:I,inheritAttrs:C,components:P,directives:M,filters:D}=e,O=null;if(c&&_t(c,s,O),h)for(const n in h){const t=h[n];(0,i.Tn)(t)&&(s[n]=t.bind(r))}if(o){0;const e=o.call(r,r);0,(0,i.Gv)(e)&&(t.data=(0,n.Kh)(e))}if(gt=!0,a)for(const n in a){const t=a[n],e=(0,i.Tn)(t)?t.bind(r,r):(0,i.Tn)(t.get)?t.get.bind(r,r):i.tE;0;const o=!(0,i.Tn)(t)&&(0,i.Tn)(t.set)?t.set.bind(r):i.tE,h=Ar({get:e,set:o});Object.defineProperty(s,n,{enumerable:!0,configurable:!0,get:()=>h.value,set:t=>h.value=t})}if(l)for(const n in l)xt(l[n],s,r,n);if(u){const t=(0,i.Tn)(u)?u.call(r):u;Reflect.ownKeys(t).forEach(e=>{Ft(e,t[e])})}function B(t,e){(0,i.cy)(e)?e.forEach(e=>t(e.bind(r))):e&&t(e.bind(r))}if(d&&vt(d,t,"c"),B(tt,f),B(et,p),B(rt,m),B(nt,g),B($,y),B(V,_),B(lt,S),B(ht,w),B(at,A),B(it,x),B(st,E),B(ot,R),(0,i.cy)(I))if(I.length){const e=t.exposed||(t.exposed={});I.forEach(t=>{Object.defineProperty(e,t,{get:()=>r[t],set:e=>r[t]=e})})}else t.exposed||(t.exposed={});T&&t.render===i.tE&&(t.render=T),null!=C&&(t.inheritAttrs=C),P&&(t.components=P),M&&(t.directives=M),R&&j(t)}function _t(t,e,r=i.tE){(0,i.cy)(t)&&(t=St(t));for(const s in t){const r=t[s];let o;o=(0,i.Gv)(r)?"default"in r?Nt(r.from||s,r.default,!0):Nt(r.from||s):Nt(r),(0,n.i9)(o)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[s]=o}}function vt(t,e,r){o((0,i.cy)(t)?t.map(t=>t.bind(e.proxy)):t.bind(e.proxy),e,r)}function xt(t,e,r,n){let s=n.includes(".")?ye(r,n):()=>r[n];if((0,i.Kg)(t)){const r=e[t];(0,i.Tn)(r)&&pe(s,r)}else if((0,i.Tn)(t))pe(s,t.bind(r));else if((0,i.Gv)(t))if((0,i.cy)(t))t.forEach(t=>xt(t,e,r,n));else{const n=(0,i.Tn)(t.handler)?t.handler.bind(r):e[t.handler];(0,i.Tn)(n)&&pe(s,n,t)}else 0}function bt(t){const e=t.type,{mixins:r,extends:n}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,h=o.get(e);let l;return h?l=h:s.length||r||n?(l={},s.length&&s.forEach(t=>Et(l,t,a,!0)),Et(l,e,a)):l=e,(0,i.Gv)(e)&&o.set(e,l),l}function Et(t,e,r,n=!1){const{mixins:i,extends:s}=e;s&&Et(t,s,r,!0),i&&i.forEach(e=>Et(t,e,r,!0));for(const o in e)if(n&&"expose"===o);else{const n=Tt[o]||r&&r[o];t[o]=n?n(t[o],e[o]):e[o]}return t}const Tt={data:wt,props:Ct,emits:Ct,methods:It,computed:It,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:It,directives:It,watch:Pt,provide:wt,inject:At};function wt(t,e){return e?t?function(){return(0,i.X$)((0,i.Tn)(t)?t.call(this,this):t,(0,i.Tn)(e)?e.call(this,this):e)}:e:t}function At(t,e){return It(St(t),St(e))}function St(t){if((0,i.cy)(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Rt(t,e){return t?[...new Set([].concat(t,e))]:e}function It(t,e){return t?(0,i.X$)(Object.create(null),t,e):e}function Ct(t,e){return t?(0,i.cy)(t)&&(0,i.cy)(e)?[...new Set([...t,...e])]:(0,i.X$)(Object.create(null),mt(t),mt(null!=e?e:{})):e}function Pt(t,e){if(!t)return e;if(!e)return t;const r=(0,i.X$)(Object.create(null),t);for(const n in e)r[n]=Rt(t[n],e[n]);return r}function Mt(){return{app:null,config:{isNativeTag:i.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dt=0;function Ot(t,e){return function(r,n=null){(0,i.Tn)(r)||(r=(0,i.X$)({},r)),null==n||(0,i.Gv)(n)||(n=null);const s=Mt(),a=new WeakSet,h=[];let l=!1;const u=s.app={_uid:Dt++,_component:r,_props:n,_container:null,_context:s,_instance:null,version:Sr,get config(){return s.config},set config(t){0},use(t,...e){return a.has(t)||(t&&(0,i.Tn)(t.install)?(a.add(t),t.install(u,...e)):(0,i.Tn)(t)&&(a.add(t),t(u,...e))),u},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),u},component(t,e){return e?(s.components[t]=e,u):s.components[t]},directive(t,e){return e?(s.directives[t]=e,u):s.directives[t]},mount(i,o,a){if(!l){0;const h=u._ceVNode||Ve(r,n);return h.appContext=s,!0===a?a="svg":!1===a&&(a=void 0),o&&e?e(h,i):t(h,i,a),l=!0,u._container=i,i.__vue_app__=u,Er(h.component)}},onUnmount(t){h.push(t)},unmount(){l&&(o(h,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(t,e){return s.provides[t]=e,u},runWithContext(t){const e=Bt;Bt=u;try{return t()}finally{Bt=e}}};return u}}let Bt=null;function Ft(t,e){if(or){let r=or.provides;const n=or.parent&&or.parent.provides;n===r&&(r=or.provides=Object.create(n)),r[t]=e}else 0}function Nt(t,e,r=!1){const n=or||A;if(n||Bt){let s=Bt?Bt._context.provides:n?null==n.parent||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&(0,i.Tn)(e)?e.call(n&&n.proxy):e}else 0}const Lt={},kt=()=>Object.create(Lt),Ut=t=>Object.getPrototypeOf(t)===Lt;function Gt(t,e,r,i=!1){const s={},o=kt();t.propsDefaults=Object.create(null),Ht(t,e,s,o);for(const n in t.propsOptions[0])n in s||(s[n]=void 0);r?t.props=i?s:(0,n.Gc)(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function jt(t,e,r,s){const{props:o,attrs:a,vnode:{patchFlag:h}}=t,l=(0,n.ux)(o),[u]=t.propsOptions;let c=!1;if(!(s||h>0)||16&h){let n;Ht(t,e,o,a)&&(c=!0);for(const s in l)e&&((0,i.$3)(e,s)||(n=(0,i.Tg)(s))!==s&&(0,i.$3)(e,n))||(u?!r||void 0===r[s]&&void 0===r[n]||(o[s]=Xt(u,l,s,void 0,t,!0)):delete o[s]);if(a!==l)for(const t in a)e&&(0,i.$3)(e,t)||(delete a[t],c=!0)}else if(8&h){const r=t.vnode.dynamicProps;for(let n=0;n<r.length;n++){let s=r[n];if(be(t.emitsOptions,s))continue;const h=e[s];if(u)if((0,i.$3)(a,s))h!==a[s]&&(a[s]=h,c=!0);else{const e=(0,i.PT)(s);o[e]=Xt(u,l,e,h,t,!1)}else h!==a[s]&&(a[s]=h,c=!0)}}c&&(0,n.hZ)(t.attrs,"set","")}function Ht(t,e,r,s){const[o,a]=t.propsOptions;let h,l=!1;if(e)for(let n in e){if((0,i.SU)(n))continue;const u=e[n];let c;o&&(0,i.$3)(o,c=(0,i.PT)(n))?a&&a.includes(c)?(h||(h={}))[c]=u:r[c]=u:be(t.emitsOptions,n)||n in s&&u===s[n]||(s[n]=u,l=!0)}if(a){const e=(0,n.ux)(r),s=h||i.MZ;for(let n=0;n<a.length;n++){const h=a[n];r[h]=Xt(o,e,h,s[h],t,!(0,i.$3)(s,h))}}return l}function Xt(t,e,r,n,s,o){const a=t[r];if(null!=a){const t=(0,i.$3)(a,"default");if(t&&void 0===n){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,i.Tn)(t)){const{propsDefaults:i}=s;if(r in i)n=i[r];else{const o=ur(s);n=i[r]=t.call(null,e),o()}}else n=t;s.ce&&s.ce._setProp(r,n)}a[0]&&(o&&!t?n=!1:!a[1]||""!==n&&n!==(0,i.Tg)(r)||(n=!0))}return n}const zt=new WeakMap;function Wt(t,e,r=!1){const n=r?zt:e.propsCache,s=n.get(t);if(s)return s;const o=t.props,a={},h=[];let l=!1;if(!(0,i.Tn)(t)){const n=t=>{l=!0;const[r,n]=Wt(t,e,!0);(0,i.X$)(a,r),n&&h.push(...n)};!r&&e.mixins.length&&e.mixins.forEach(n),t.extends&&n(t.extends),t.mixins&&t.mixins.forEach(n)}if(!o&&!l)return(0,i.Gv)(t)&&n.set(t,i.Oj),i.Oj;if((0,i.cy)(o))for(let c=0;c<o.length;c++){0;const t=(0,i.PT)(o[c]);$t(t)&&(a[t]=i.MZ)}else if(o){0;for(const t in o){const e=(0,i.PT)(t);if($t(e)){const r=o[t],n=a[e]=(0,i.cy)(r)||(0,i.Tn)(r)?{type:r}:(0,i.X$)({},r),s=n.type;let l=!1,u=!0;if((0,i.cy)(s))for(let t=0;t<s.length;++t){const e=s[t],r=(0,i.Tn)(e)&&e.name;if("Boolean"===r){l=!0;break}"String"===r&&(u=!1)}else l=(0,i.Tn)(s)&&"Boolean"===s.name;n[0]=l,n[1]=u,(l||(0,i.$3)(n,"default"))&&h.push(e)}}}const u=[a,h];return(0,i.Gv)(t)&&n.set(t,u),u}function $t(t){return"$"!==t[0]&&!(0,i.SU)(t)}const Vt=t=>"_"===t[0]||"$stable"===t,Yt=t=>(0,i.cy)(t)?t.map(Qe):[Qe(t)],qt=(t,e,r)=>{if(e._n)return e;const n=I((...t)=>Yt(e(...t)),r);return n._c=!1,n},Kt=(t,e,r)=>{const n=t._ctx;for(const s in t){if(Vt(s))continue;const r=t[s];if((0,i.Tn)(r))e[s]=qt(s,r,n);else if(null!=r){0;const t=Yt(r);e[s]=()=>t}}},Zt=(t,e)=>{const r=Yt(e);t.slots.default=()=>r},Qt=(t,e,r)=>{for(const n in e)!r&&Vt(n)||(t[n]=e[n])},Jt=(t,e,r)=>{const n=t.slots=kt();if(32&t.vnode.shapeFlag){const t=e.__;t&&(0,i.yQ)(n,"__",t,!0);const s=e._;s?(Qt(n,e,r),r&&(0,i.yQ)(n,"_",s,!0)):Kt(e,n)}else e&&Zt(t,e)},te=(t,e,r)=>{const{vnode:n,slots:s}=t;let o=!0,a=i.MZ;if(32&n.shapeFlag){const t=e._;t?r&&1===t?o=!1:Qt(s,e,r):(o=!e.$stable,Kt(e,s)),a=e}else e&&(Zt(t,e),a={default:1});if(o)for(const i in s)Vt(i)||null!=a[i]||delete s[i]};function ee(){"boolean"!==typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__&&((0,i.We)().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const re=Ce;function ne(t){return ie(t)}function ie(t,e){ee();const r=(0,i.We)();r.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:h,createText:l,createComment:u,setText:c,setElementText:d,parentNode:f,nextSibling:p,setScopeId:m=i.tE,insertStaticContent:g}=t,y=(t,e,r,n=null,i=null,s=null,o=void 0,a=null,h=!!e.dynamicChildren)=>{if(t===e)return;t&&!Xe(t,e)&&(n=J(t),Y(t,i,s,!0),t=null),-2===e.patchFlag&&(h=!1,e.dynamicChildren=null);const{type:l,ref:u,shapeFlag:c}=e;switch(l){case Me:v(t,e,r,n);break;case De:x(t,e,r,n);break;case Oe:null==t&&T(e,r,n,o);break;case Pe:F(t,e,r,n,i,s,o,a,h);break;default:1&c?S(t,e,r,n,i,s,o,a,h):6&c?N(t,e,r,n,i,s,o,a,h):(64&c||128&c)&&l.process(t,e,r,n,i,s,o,a,h,rt)}null!=u&&i?H(u,t&&t.ref,s,e||t,!e):null==u&&t&&null!=t.ref&&H(t.ref,null,s,t,!0)},v=(t,e,r,n)=>{if(null==t)s(e.el=l(e.children),r,n);else{const r=e.el=t.el;e.children!==t.children&&c(r,e.children)}},x=(t,e,r,n)=>{null==t?s(e.el=u(e.children||""),r,n):e.el=t.el},T=(t,e,r,n)=>{[t.el,t.anchor]=g(t.children,e,r,n,t.el,t.anchor)},w=({el:t,anchor:e},r,n)=>{let i;while(t&&t!==e)i=p(t),s(t,r,n),t=i;s(e,r,n)},A=({el:t,anchor:e})=>{let r;while(t&&t!==e)r=p(t),o(t),t=r;o(e)},S=(t,e,r,n,i,s,o,a,h)=>{"svg"===e.type?o="svg":"math"===e.type&&(o="mathml"),null==t?R(e,r,n,i,s,o,a,h):D(t,e,i,s,o,a,h)},R=(t,e,r,n,o,l,u,c)=>{let f,p;const{props:m,shapeFlag:g,transition:y,dirs:_}=t;if(f=t.el=h(t.type,l,m&&m.is,m),8&g?d(f,t.children):16&g&&M(t.children,f,null,n,o,se(t,l),u,c),_&&C(t,null,n,"created"),I(f,t,t.scopeId,u,n),m){for(const t in m)"value"===t||(0,i.SU)(t)||a(f,t,null,m[t],l,n);"value"in m&&a(f,"value",null,m.value,l),(p=m.onVnodeBeforeMount)&&rr(p,n,t)}_&&C(t,null,n,"beforeMount");const v=ae(o,y);v&&y.beforeEnter(f),s(f,e,r),((p=m&&m.onVnodeMounted)||v||_)&&re(()=>{p&&rr(p,n,t),v&&y.enter(f),_&&C(t,null,n,"mounted")},o)},I=(t,e,r,n,i)=>{if(r&&m(t,r),n)for(let s=0;s<n.length;s++)m(t,n[s]);if(i){let r=i.subTree;if(e===r||Ie(r.type)&&(r.ssContent===e||r.ssFallback===e)){const e=i.vnode;I(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},M=(t,e,r,n,i,s,o,a,h=0)=>{for(let l=h;l<t.length;l++){const h=t[l]=a?Je(t[l]):Qe(t[l]);y(null,h,e,r,n,i,s,o,a)}},D=(t,e,r,n,s,o,h)=>{const l=e.el=t.el;let{patchFlag:u,dynamicChildren:c,dirs:f}=e;u|=16&t.patchFlag;const p=t.props||i.MZ,m=e.props||i.MZ;let g;if(r&&oe(r,!1),(g=m.onVnodeBeforeUpdate)&&rr(g,r,e,t),f&&C(e,t,r,"beforeUpdate"),r&&oe(r,!0),(p.innerHTML&&null==m.innerHTML||p.textContent&&null==m.textContent)&&d(l,""),c?O(t.dynamicChildren,c,l,r,n,se(e,s),o):h||j(t,e,l,null,r,n,se(e,s),o,!1),u>0){if(16&u)B(l,p,m,r,s);else if(2&u&&p.class!==m.class&&a(l,"class",null,m.class,s),4&u&&a(l,"style",p.style,m.style,s),8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e],i=p[n],o=m[n];o===i&&"value"!==n||a(l,n,i,o,s,r)}}1&u&&t.children!==e.children&&d(l,e.children)}else h||null!=c||B(l,p,m,r,s);((g=m.onVnodeUpdated)||f)&&re(()=>{g&&rr(g,r,e,t),f&&C(e,t,r,"updated")},n)},O=(t,e,r,n,i,s,o)=>{for(let a=0;a<e.length;a++){const h=t[a],l=e[a],u=h.el&&(h.type===Pe||!Xe(h,l)||198&h.shapeFlag)?f(h.el):r;y(h,l,u,null,n,i,s,o,!0)}},B=(t,e,r,n,s)=>{if(e!==r){if(e!==i.MZ)for(const o in e)(0,i.SU)(o)||o in r||a(t,o,e[o],null,s,n);for(const o in r){if((0,i.SU)(o))continue;const h=r[o],l=e[o];h!==l&&"value"!==o&&a(t,o,l,h,s,n)}"value"in r&&a(t,"value",e.value,r.value,s)}},F=(t,e,r,n,i,o,a,h,u)=>{const c=e.el=t?t.el:l(""),d=e.anchor=t?t.anchor:l("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=e;m&&(h=h?h.concat(m):m),null==t?(s(c,r,n),s(d,r,n),M(e.children||[],r,d,i,o,a,h,u)):f>0&&64&f&&p&&t.dynamicChildren?(O(t.dynamicChildren,p,r,i,o,a,h),(null!=e.key||i&&e===i.subTree)&&he(t,e,!0)):j(t,e,r,d,i,o,a,h,u)},N=(t,e,r,n,i,s,o,a,h)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,r,n,o,h):L(e,r,n,i,s,o,h):k(t,e,h)},L=(t,e,r,n,i,s,o)=>{const a=t.component=sr(t,n,i);if(z(t)&&(a.ctx.renderer=rt),gr(a,!1,o),a.asyncDep){if(i&&i.registerDep(a,U,o),!t.el){const t=a.subTree=Ve(De);x(null,t,e,r)}}else U(a,t,e,r,i,s,o)},k=(t,e,r)=>{const n=e.component=t.component;if(Ae(t,e,r)){if(n.asyncDep&&!n.asyncResolved)return void G(n,e,r);n.next=e,n.update()}else e.el=t.el,n.vnode=e},U=(t,e,r,s,o,a,h)=>{const l=()=>{if(t.isMounted){let{next:e,bu:r,u:n,parent:s,vnode:u}=t;{const r=ue(t);if(r)return e&&(e.el=u.el,G(t,e,h)),void r.asyncDep.then(()=>{t.isUnmounted||l()})}let c,d=e;0,oe(t,!1),e?(e.el=u.el,G(t,e,h)):e=u,r&&(0,i.DY)(r),(c=e.props&&e.props.onVnodeBeforeUpdate)&&rr(c,s,e,u),oe(t,!0);const p=Ee(t);0;const m=t.subTree;t.subTree=p,y(m,p,f(m.el),J(m),t,o,a),e.el=p.el,null===d&&Re(t,p.el),n&&re(n,o),(c=e.props&&e.props.onVnodeUpdated)&&re(()=>rr(c,s,e,u),o)}else{let n;const{el:h,props:l}=e,{bm:u,m:c,parent:d,root:f,type:p}=t,m=X(e);if(oe(t,!1),u&&(0,i.DY)(u),!m&&(n=l&&l.onVnodeBeforeMount)&&rr(n,d,e),oe(t,!0),h&&it){const e=()=>{t.subTree=Ee(t),it(h,t.subTree,t,o,null)};m&&p.__asyncHydrate?p.__asyncHydrate(h,t,e):e()}else{f.ce&&!1!==f.ce._def.shadowRoot&&f.ce._injectChildStyle(p);const n=t.subTree=Ee(t);0,y(null,n,r,s,t,o,a),e.el=n.el}if(c&&re(c,o),!m&&(n=l&&l.onVnodeMounted)){const t=e;re(()=>rr(n,d,t),o)}(256&e.shapeFlag||d&&X(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&re(t.a,o),t.isMounted=!0,e=r=s=null}};t.scope.on();const u=t.effect=new n.X2(l);t.scope.off();const c=t.update=u.run.bind(u),d=t.job=u.runIfDirty.bind(u);d.i=t,d.id=t.uid,u.scheduler=()=>_(d),oe(t,!0),c()},G=(t,e,r)=>{e.component=t;const i=t.vnode.props;t.vnode=e,t.next=null,jt(t,e.props,i,r),te(t,e.children,r),(0,n.C4)(),b(t),(0,n.bl)()},j=(t,e,r,n,i,s,o,a,h=!1)=>{const l=t&&t.children,u=t?t.shapeFlag:0,c=e.children,{patchFlag:f,shapeFlag:p}=e;if(f>0){if(128&f)return void $(l,c,r,n,i,s,o,a,h);if(256&f)return void W(l,c,r,n,i,s,o,a,h)}8&p?(16&u&&Q(l,i,s),c!==l&&d(r,c)):16&u?16&p?$(l,c,r,n,i,s,o,a,h):Q(l,i,s,!0):(8&u&&d(r,""),16&p&&M(c,r,n,i,s,o,a,h))},W=(t,e,r,n,s,o,a,h,l)=>{t=t||i.Oj,e=e||i.Oj;const u=t.length,c=e.length,d=Math.min(u,c);let f;for(f=0;f<d;f++){const n=e[f]=l?Je(e[f]):Qe(e[f]);y(t[f],n,r,null,s,o,a,h,l)}u>c?Q(t,s,o,!0,!1,d):M(e,r,n,s,o,a,h,l,d)},$=(t,e,r,n,s,o,a,h,l)=>{let u=0;const c=e.length;let d=t.length-1,f=c-1;while(u<=d&&u<=f){const n=t[u],i=e[u]=l?Je(e[u]):Qe(e[u]);if(!Xe(n,i))break;y(n,i,r,null,s,o,a,h,l),u++}while(u<=d&&u<=f){const n=t[d],i=e[f]=l?Je(e[f]):Qe(e[f]);if(!Xe(n,i))break;y(n,i,r,null,s,o,a,h,l),d--,f--}if(u>d){if(u<=f){const t=f+1,i=t<c?e[t].el:n;while(u<=f)y(null,e[u]=l?Je(e[u]):Qe(e[u]),r,i,s,o,a,h,l),u++}}else if(u>f)while(u<=d)Y(t[u],s,o,!0),u++;else{const p=u,m=u,g=new Map;for(u=m;u<=f;u++){const t=e[u]=l?Je(e[u]):Qe(e[u]);null!=t.key&&g.set(t.key,u)}let _,v=0;const x=f-m+1;let b=!1,E=0;const T=new Array(x);for(u=0;u<x;u++)T[u]=0;for(u=p;u<=d;u++){const n=t[u];if(v>=x){Y(n,s,o,!0);continue}let i;if(null!=n.key)i=g.get(n.key);else for(_=m;_<=f;_++)if(0===T[_-m]&&Xe(n,e[_])){i=_;break}void 0===i?Y(n,s,o,!0):(T[i-m]=u+1,i>=E?E=i:b=!0,y(n,e[i],r,null,s,o,a,h,l),v++)}const w=b?le(T):i.Oj;for(_=w.length-1,u=x-1;u>=0;u--){const t=m+u,i=e[t],d=t+1<c?e[t+1].el:n;0===T[u]?y(null,i,r,d,s,o,a,h,l):b&&(_<0||u!==w[_]?V(i,r,d,2):_--)}}},V=(t,e,r,n,i=null)=>{const{el:a,type:h,transition:l,children:u,shapeFlag:c}=t;if(6&c)return void V(t.component.subTree,e,r,n);if(128&c)return void t.suspense.move(e,r,n);if(64&c)return void h.move(t,e,r,rt);if(h===Pe){s(a,e,r);for(let t=0;t<u.length;t++)V(u[t],e,r,n);return void s(t.anchor,e,r)}if(h===Oe)return void w(t,e,r);const d=2!==n&&1&c&&l;if(d)if(0===n)l.beforeEnter(a),s(a,e,r),re(()=>l.enter(a),i);else{const{leave:n,delayLeave:i,afterLeave:h}=l,u=()=>{t.ctx.isUnmounted?o(a):s(a,e,r)},c=()=>{n(a,()=>{u(),h&&h()})};i?i(a,u,c):c()}else s(a,e,r)},Y=(t,e,r,i=!1,s=!1)=>{const{type:o,props:a,ref:h,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:d,dirs:f,cacheIndex:p}=t;if(-2===d&&(s=!1),null!=h&&((0,n.C4)(),H(h,null,r,t,!0),(0,n.bl)()),null!=p&&(e.renderCache[p]=void 0),256&c)return void e.ctx.deactivate(t);const m=1&c&&f,g=!X(t);let y;if(g&&(y=a&&a.onVnodeBeforeUnmount)&&rr(y,e,t),6&c)Z(t.component,r,i);else{if(128&c)return void t.suspense.unmount(r,i);m&&C(t,null,e,"beforeUnmount"),64&c?t.type.remove(t,e,r,rt,i):u&&!u.hasOnce&&(o!==Pe||d>0&&64&d)?Q(u,e,r,!1,!0):(o===Pe&&384&d||!s&&16&c)&&Q(l,e,r),i&&q(t)}(g&&(y=a&&a.onVnodeUnmounted)||m)&&re(()=>{y&&rr(y,e,t),m&&C(t,null,e,"unmounted")},r)},q=t=>{const{type:e,el:r,anchor:n,transition:i}=t;if(e===Pe)return void K(r,n);if(e===Oe)return void A(t);const s=()=>{o(r),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&t.shapeFlag&&i&&!i.persisted){const{leave:e,delayLeave:n}=i,o=()=>e(r,s);n?n(t.el,s,o):o()}else s()},K=(t,e)=>{let r;while(t!==e)r=p(t),o(t),t=r;o(e)},Z=(t,e,r)=>{const{bum:n,scope:s,job:o,subTree:a,um:h,m:l,a:u,parent:c,slots:{__:d}}=t;ce(l),ce(u),n&&(0,i.DY)(n),c&&(0,i.cy)(d)&&d.forEach(t=>{c.renderCache[t]=void 0}),s.stop(),o&&(o.flags|=8,Y(a,t,e,r)),h&&re(h,e),re(()=>{t.isUnmounted=!0},e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Q=(t,e,r,n=!1,i=!1,s=0)=>{for(let o=s;o<t.length;o++)Y(t[o],e,r,n,i)},J=t=>{if(6&t.shapeFlag)return J(t.component.subTree);if(128&t.shapeFlag)return t.suspense.next();const e=p(t.anchor||t.el),r=e&&e[P];return r?p(r):e};let tt=!1;const et=(t,e,r)=>{null==t?e._vnode&&Y(e._vnode,null,null,!0):y(e._vnode||null,t,e,null,null,null,r),e._vnode=t,tt||(tt=!0,b(),E(),tt=!1)},rt={p:y,um:Y,m:V,r:q,mt:L,mc:M,pc:j,pbc:O,n:J,o:t};let nt,it;return e&&([nt,it]=e(rt)),{render:et,hydrate:nt,createApp:Ot(et,nt)}}function se({type:t,props:e},r){return"svg"===r&&"foreignObject"===t||"mathml"===r&&"annotation-xml"===t&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function oe({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ae(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function he(t,e,r=!1){const n=t.children,s=e.children;if((0,i.cy)(n)&&(0,i.cy)(s))for(let i=0;i<n.length;i++){const t=n[i];let e=s[i];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[i]=Je(s[i]),e.el=t.el),r||-2===e.patchFlag||he(t,e)),e.type===Me&&(e.el=t.el),e.type!==De||e.el||(e.el=t.el)}}function le(t){const e=t.slice(),r=[0];let n,i,s,o,a;const h=t.length;for(n=0;n<h;n++){const h=t[n];if(0!==h){if(i=r[r.length-1],t[i]<h){e[n]=i,r.push(n);continue}s=0,o=r.length-1;while(s<o)a=s+o>>1,t[r[a]]<h?s=a+1:o=a;h<t[r[s]]&&(s>0&&(e[n]=r[s-1]),r[s]=n)}}s=r.length,o=r[s-1];while(s-- >0)r[s]=o,o=e[o];return r}function ue(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:ue(e)}function ce(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const de=Symbol.for("v-scx"),fe=()=>{{const t=Nt(de);return t}};function pe(t,e,r){return me(t,e,r)}function me(t,e,r=i.MZ){const{immediate:s,deep:a,flush:h,once:l}=r;const u=(0,i.X$)({},r);const c=e&&s||!e&&"post"!==h;let d;if(mr)if("sync"===h){const t=fe();d=t.__watcherHandles||(t.__watcherHandles=[])}else if(!c){const t=()=>{};return t.stop=i.tE,t.resume=i.tE,t.pause=i.tE,t}const f=or;u.call=(t,e,r)=>o(t,f,e,r);let p=!1;"post"===h?u.scheduler=t=>{re(t,f&&f.suspense)}:"sync"!==h&&(p=!0,u.scheduler=(t,e)=>{e?t():_(t)}),u.augmentJob=t=>{e&&(t.flags|=4),p&&(t.flags|=2,f&&(t.id=f.uid,t.i=f))};const m=(0,n.wB)(t,e,u);return mr&&(d?d.push(m):c&&m()),m}function ge(t,e,r){const n=this.proxy,s=(0,i.Kg)(t)?t.includes(".")?ye(n,t):()=>n[t]:t.bind(n,n);let o;(0,i.Tn)(e)?o=e:(o=e.handler,r=e);const a=ur(this),h=me(s,o.bind(n),r);return a(),h}function ye(t,e){const r=e.split(".");return()=>{let e=t;for(let t=0;t<r.length&&e;t++)e=e[r[t]];return e}}const _e=(t,e)=>"modelValue"===e||"model-value"===e?t.modelModifiers:t[`${e}Modifiers`]||t[`${(0,i.PT)(e)}Modifiers`]||t[`${(0,i.Tg)(e)}Modifiers`];function ve(t,e,...r){if(t.isUnmounted)return;const n=t.vnode.props||i.MZ;let s=r;const a=e.startsWith("update:"),h=a&&_e(n,e.slice(7));let l;h&&(h.trim&&(s=r.map(t=>(0,i.Kg)(t)?t.trim():t)),h.number&&(s=r.map(i.bB)));let u=n[l=(0,i.rU)(e)]||n[l=(0,i.rU)((0,i.PT)(e))];!u&&a&&(u=n[l=(0,i.rU)((0,i.Tg)(e))]),u&&o(u,t,6,s);const c=n[l+"Once"];if(c){if(t.emitted){if(t.emitted[l])return}else t.emitted={};t.emitted[l]=!0,o(c,t,6,s)}}function xe(t,e,r=!1){const n=e.emitsCache,s=n.get(t);if(void 0!==s)return s;const o=t.emits;let a={},h=!1;if(!(0,i.Tn)(t)){const n=t=>{const r=xe(t,e,!0);r&&(h=!0,(0,i.X$)(a,r))};!r&&e.mixins.length&&e.mixins.forEach(n),t.extends&&n(t.extends),t.mixins&&t.mixins.forEach(n)}return o||h?((0,i.cy)(o)?o.forEach(t=>a[t]=null):(0,i.X$)(a,o),(0,i.Gv)(t)&&n.set(t,a),a):((0,i.Gv)(t)&&n.set(t,null),null)}function be(t,e){return!(!t||!(0,i.Mp)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,i.$3)(t,e[0].toLowerCase()+e.slice(1))||(0,i.$3)(t,(0,i.Tg)(e))||(0,i.$3)(t,e))}function Ee(t){const{type:e,vnode:r,proxy:n,withProxy:s,propsOptions:[o],slots:h,attrs:l,emit:u,render:c,renderCache:d,props:f,data:p,setupState:m,ctx:g,inheritAttrs:y}=t,_=R(t);let v,x;try{if(4&r.shapeFlag){const t=s||n,e=t;v=Qe(c.call(e,t,d,f,m,p,g)),x=l}else{const t=e;0,v=Qe(t.length>1?t(f,{attrs:l,slots:h,emit:u}):t(f,null)),x=e.props?l:Te(l)}}catch(E){Be.length=0,a(E,t,1),v=Ve(De)}let b=v;if(x&&!1!==y){const t=Object.keys(x),{shapeFlag:e}=b;t.length&&7&e&&(o&&t.some(i.CP)&&(x=we(x,o)),b=Ke(b,x,!1,!0))}return r.dirs&&(b=Ke(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&U(b,r.transition),v=b,R(_),v}const Te=t=>{let e;for(const r in t)("class"===r||"style"===r||(0,i.Mp)(r))&&((e||(e={}))[r]=t[r]);return e},we=(t,e)=>{const r={};for(const n in t)(0,i.CP)(n)&&n.slice(9)in e||(r[n]=t[n]);return r};function Ae(t,e,r){const{props:n,children:i,component:s}=t,{props:o,children:a,patchFlag:h}=e,l=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(r&&h>=0))return!(!i&&!a||a&&a.$stable)||n!==o&&(n?!o||Se(n,o,l):!!o);if(1024&h)return!0;if(16&h)return n?Se(n,o,l):!!o;if(8&h){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const r=t[e];if(o[r]!==n[r]&&!be(l,r))return!0}}return!1}function Se(t,e,r){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(e[s]!==t[s]&&!be(r,s))return!0}return!1}function Re({vnode:t,parent:e},r){while(e){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n!==t)break;(t=e.vnode).el=r,e=e.parent}}const Ie=t=>t.__isSuspense;function Ce(t,e){e&&e.pendingBranch?(0,i.cy)(t)?e.effects.push(...t):e.effects.push(t):x(t)}const Pe=Symbol.for("v-fgt"),Me=Symbol.for("v-txt"),De=Symbol.for("v-cmt"),Oe=Symbol.for("v-stc"),Be=[];let Fe=null;function Ne(t=!1){Be.push(Fe=t?null:[])}function Le(){Be.pop(),Fe=Be[Be.length-1]||null}let ke=1;function Ue(t,e=!1){ke+=t,t<0&&Fe&&e&&(Fe.hasOnce=!0)}function Ge(t){return t.dynamicChildren=ke>0?Fe||i.Oj:null,Le(),ke>0&&Fe&&Fe.push(t),t}function je(t,e,r,n,i,s){return Ge($e(t,e,r,n,i,s,!0))}function He(t){return!!t&&!0===t.__v_isVNode}function Xe(t,e){return t.type===e.type&&t.key===e.key}const ze=({key:t})=>null!=t?t:null,We=({ref:t,ref_key:e,ref_for:r})=>("number"===typeof t&&(t=""+t),null!=t?(0,i.Kg)(t)||(0,n.i9)(t)||(0,i.Tn)(t)?{i:A,r:t,k:e,f:!!r}:t:null);function $e(t,e=null,r=null,n=0,s=null,o=(t===Pe?0:1),a=!1,h=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ze(e),ref:e&&We(e),scopeId:S,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:A};return h?(tr(l,r),128&o&&t.normalize(l)):r&&(l.shapeFlag|=(0,i.Kg)(r)?8:16),ke>0&&!a&&Fe&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&Fe.push(l),l}const Ve=Ye;function Ye(t,e=null,r=null,s=0,o=null,a=!1){if(t&&t!==ut||(t=De),He(t)){const n=Ke(t,e,!0);return r&&tr(n,r),ke>0&&!a&&Fe&&(6&n.shapeFlag?Fe[Fe.indexOf(t)]=n:Fe.push(n)),n.patchFlag=-2,n}if(wr(t)&&(t=t.__vccOpts),e){e=qe(e);let{class:t,style:r}=e;t&&!(0,i.Kg)(t)&&(e.class=(0,i.C4)(t)),(0,i.Gv)(r)&&((0,n.ju)(r)&&!(0,i.cy)(r)&&(r=(0,i.X$)({},r)),e.style=(0,i.Tr)(r))}const h=(0,i.Kg)(t)?1:Ie(t)?128:M(t)?64:(0,i.Gv)(t)?4:(0,i.Tn)(t)?2:0;return $e(t,e,r,s,o,h,a,!0)}function qe(t){return t?(0,n.ju)(t)||Ut(t)?(0,i.X$)({},t):t:null}function Ke(t,e,r=!1,n=!1){const{props:s,ref:o,patchFlag:a,children:h,transition:l}=t,u=e?er(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&ze(u),ref:e&&e.ref?r&&o?(0,i.cy)(o)?o.concat(We(e)):[o,We(e)]:We(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:h,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pe?-1===a?16:16|a:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ke(t.ssContent),ssFallback:t.ssFallback&&Ke(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&U(c,l.clone(c)),c}function Ze(t=" ",e=0){return Ve(Me,null,t,e)}function Qe(t){return null==t||"boolean"===typeof t?Ve(De):(0,i.cy)(t)?Ve(Pe,null,t.slice()):He(t)?Je(t):Ve(Me,null,String(t))}function Je(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:Ke(t)}function tr(t,e){let r=0;const{shapeFlag:n}=t;if(null==e)e=null;else if((0,i.cy)(e))r=16;else if("object"===typeof e){if(65&n){const r=e.default;return void(r&&(r._c&&(r._d=!1),tr(t,r()),r._c&&(r._d=!0)))}{r=32;const n=e._;n||Ut(e)?3===n&&A&&(1===A.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=A}}else(0,i.Tn)(e)?(e={default:e,_ctx:A},r=32):(e=String(e),64&n?(r=16,e=[Ze(e)]):r=8);t.children=e,t.shapeFlag|=r}function er(...t){const e={};for(let r=0;r<t.length;r++){const n=t[r];for(const t in n)if("class"===t)e.class!==n.class&&(e.class=(0,i.C4)([e.class,n.class]));else if("style"===t)e.style=(0,i.Tr)([e.style,n.style]);else if((0,i.Mp)(t)){const r=e[t],s=n[t];!s||r===s||(0,i.cy)(r)&&r.includes(s)||(e[t]=r?[].concat(r,s):s)}else""!==t&&(e[t]=n[t])}return e}function rr(t,e,r,n=null){o(t,e,7,[r,n])}const nr=Mt();let ir=0;function sr(t,e,r){const s=t.type,o=(e?e.appContext:t.appContext)||nr,a={uid:ir++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new n.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wt(s,o),emitsOptions:xe(s,o),emit:null,emitted:null,propsDefaults:i.MZ,inheritAttrs:s.inheritAttrs,ctx:i.MZ,data:i.MZ,props:i.MZ,attrs:i.MZ,slots:i.MZ,refs:i.MZ,setupState:i.MZ,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=ve.bind(null,a),t.ce&&t.ce(a),a}let or=null;const ar=()=>or||A;let hr,lr;{const t=(0,i.We)(),e=(e,r)=>{let n;return(n=t[e])||(n=t[e]=[]),n.push(r),t=>{n.length>1?n.forEach(e=>e(t)):n[0](t)}};hr=e("__VUE_INSTANCE_SETTERS__",t=>or=t),lr=e("__VUE_SSR_SETTERS__",t=>mr=t)}const ur=t=>{const e=or;return hr(t),t.scope.on(),()=>{t.scope.off(),hr(e)}},cr=()=>{or&&or.scope.off(),hr(null)};function dr(t){return 4&t.vnode.shapeFlag}let fr,pr,mr=!1;function gr(t,e=!1,r=!1){e&&lr(e);const{props:n,children:i}=t.vnode,s=dr(t);Gt(t,n,s,e),Jt(t,i,r||e);const o=s?yr(t,e):void 0;return e&&lr(!1),o}function yr(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,pt);const{setup:o}=r;if(o){(0,n.C4)();const r=t.setupContext=o.length>1?br(t):null,h=ur(t),l=s(o,t,0,[t.props,r]),u=(0,i.yL)(l);if((0,n.bl)(),h(),!u&&!t.sp||X(t)||j(t),u){if(l.then(cr,cr),e)return l.then(r=>{_r(t,r,e)}).catch(e=>{a(e,t,0)});t.asyncDep=l}else _r(t,l,e)}else vr(t,e)}function _r(t,e,r){(0,i.Tn)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,i.Gv)(e)&&(t.setupState=(0,n.Pr)(e)),vr(t,r)}function vr(t,e,r){const s=t.type;if(!t.render){if(!e&&fr&&!s.render){const e=s.template||bt(t).template;if(e){0;const{isCustomElement:r,compilerOptions:n}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,h=(0,i.X$)((0,i.X$)({isCustomElement:r,delimiters:o},n),a);s.render=fr(e,h)}}t.render=s.render||i.tE,pr&&pr(t)}{const e=ur(t);(0,n.C4)();try{yt(t)}finally{(0,n.bl)(),e()}}}const xr={get(t,e){return(0,n.u4)(t,"get",""),t[e]}};function br(t){const e=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,xr),slots:t.slots,emit:t.emit,expose:e}}function Er(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy((0,n.Pr)((0,n.IG)(t.exposed)),{get(e,r){return r in e?e[r]:r in dt?dt[r](t):void 0},has(t,e){return e in t||e in dt}})):t.proxy}function Tr(t,e=!0){return(0,i.Tn)(t)?t.displayName||t.name:t.name||e&&t.__name}function wr(t){return(0,i.Tn)(t)&&"__vccOpts"in t}const Ar=(t,e)=>{const r=(0,n.EW)(t,e,mr);return r};const Sr="3.5.17"},6801:function(t,e,r){"use strict";var n=r(3724),i=r(8686),s=r(4913),o=r(8551),a=r(5397),h=r(1072);e.f=n&&!i?Object.defineProperties:function(t,e){o(t);var r,n=a(e),i=h(e),l=i.length,u=0;while(l>u)s.f(t,r=i[u++],n[r]);return t}},6823:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(r){return"Object"}}},6837:function(t){"use strict";var e=TypeError,r=9007199254740991;t.exports=function(t){if(t>r)throw e("Maximum allowed index exceeded");return t}},6840:function(t,e,r){"use strict";var n=r(4901),i=r(4913),s=r(283),o=r(9433);t.exports=function(t,e,r,a){a||(a={});var h=a.enumerable,l=void 0!==a.name?a.name:e;if(n(r)&&s(r,l,a),a.global)h?t[e]=r:o(e,r);else{try{a.unsafe?t[e]&&(h=!0):delete t[e]}catch(u){}h?t[e]=r:i.f(t,e,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},6931:function(t){"use strict";t.exports=Math.min},6955:function(t,e,r){"use strict";var n=r(2140),i=r(4901),s=r(2195),o=r(8227),a=o("toStringTag"),h=Object,l="Arguments"===s(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(r){}};t.exports=n?s:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(e=h(t),a))?r:l?s(e):"Object"===(n=s(e))&&i(e.callee)?"Arguments":n}},6969:function(t,e,r){"use strict";var n=r(2777),i=r(757);t.exports=function(t){var e=n(t,"string");return i(e)?e:e+""}},6980:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7040:function(t,e,r){"use strict";var n=r(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:function(t,e,r){"use strict";var n=r(9504),i=r(9039),s=r(2195),o=Object,a=n("".split);t.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"===s(t)?a(t,""):o(t)}:o},7080:function(t,e,r){"use strict";var n=r(4402).has;t.exports=function(t){return n(t),t}},7347:function(t,e,r){"use strict";var n=r(3724),i=r(9565),s=r(8773),o=r(6980),a=r(5397),h=r(6969),l=r(9297),u=r(5917),c=Object.getOwnPropertyDescriptor;e.f=n?c:function(t,e){if(t=a(t),e=h(e),u)try{return c(t,e)}catch(r){}if(l(t,e))return o(!i(s.f,t,e),t[e])}},7476:function(t,e,r){"use strict";var n=r(2195),i=r(9504);t.exports=function(t){if("Function"===n(t))return i(t)}},7551:function(t){"use strict";t.exports=Function.prototype.apply},7588:function(t,e,r){"use strict";var n=r(6518),i=r(9565),s=r(2652),o=r(9306),a=r(8551),h=r(1767),l=r(9539),u=r(4549),c=u("forEach",TypeError);n({target:"Iterator",proto:!0,real:!0,forced:c},{forEach:function(t){a(this);try{o(t)}catch(n){l(this,"throw",n)}if(c)return i(c,this,t);var e=h(this),r=0;s(e,function(e){t(e,r++)},{IS_RECORD:!0})}})},7629:function(t,e,r){"use strict";var n=r(6395),i=r(4576),s=r(9433),o="__core-js_shared__",a=t.exports=i[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.43.0",mode:n?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7642:function(t,e,r){"use strict";var n=r(6518),i=r(3440),s=r(9039),o=r(4916),a=!o("difference",function(t){return 0===t.size}),h=a||s(function(){var t={size:1,has:function(){return!0},keys:function(){var t=0;return{next:function(){var r=t++>1;return e.has(1)&&e.clear(),{done:r,value:2}}}}},e=new Set([1,2,3,4]);return 3!==e.difference(t).size});n({target:"Set",proto:!0,real:!0,forced:h},{difference:i})},7657:function(t,e,r){"use strict";var n,i,s,o=r(9039),a=r(4901),h=r(34),l=r(2360),u=r(2787),c=r(6840),d=r(8227),f=r(6395),p=d("iterator"),m=!1;[].keys&&(s=[].keys(),"next"in s?(i=u(u(s)),i!==Object.prototype&&(n=i)):m=!0);var g=!h(n)||o(function(){var t={};return n[p].call(t)!==t});g?n={}:f&&(n=l(n)),a(n[p])||c(n,p,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},7724:function(t){"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;var n=42;for(var i in t[e]=n,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var s=Object.getOwnPropertySymbols(t);if(1!==s.length||s[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(o.value!==n||!0!==o.enumerable)return!1}return!0}},7740:function(t,e,r){"use strict";var n=r(9297),i=r(5031),s=r(7347),o=r(4913);t.exports=function(t,e,r){for(var a=i(e),h=o.f,l=s.f,u=0;u<a.length;u++){var c=a[u];n(t,c)||r&&n(r,c)||h(t,c,l(e,c))}}},7750:function(t,e,r){"use strict";var n=r(4117),i=TypeError;t.exports=function(t){if(n(t))throw new i("Can't call method on "+t);return t}},7751:function(t,e,r){"use strict";var n=r(4576),i=r(4901),s=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(n[t]):n[t]&&n[t][e]}},7811:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7847:function(t){"use strict";t.exports=Math.round},8004:function(t,e,r){"use strict";var n=r(6518),i=r(9039),s=r(8750),o=r(4916),a=!o("intersection",function(t){return 2===t.size&&t.has(1)&&t.has(2)})||i(function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))});n({target:"Set",proto:!0,real:!0,forced:a},{intersection:s})},8014:function(t,e,r){"use strict";var n=r(1291),i=Math.min;t.exports=function(t){var e=n(t);return e>0?i(e,9007199254740991):0}},8111:function(t,e,r){"use strict";var n=r(6518),i=r(4576),s=r(679),o=r(8551),a=r(4901),h=r(2787),l=r(2106),u=r(4659),c=r(9039),d=r(9297),f=r(8227),p=r(7657).IteratorPrototype,m=r(3724),g=r(6395),y="constructor",_="Iterator",v=f("toStringTag"),x=TypeError,b=i[_],E=g||!a(b)||b.prototype!==p||!c(function(){b({})}),T=function(){if(s(this,p),h(this)===p)throw new x("Abstract class Iterator not directly constructable")},w=function(t,e){m?l(p,t,{configurable:!0,get:function(){return e},set:function(e){if(o(this),this===p)throw new x("You can't redefine this property");d(this,t)?this[t]=e:u(this,t,e)}}):p[t]=e};d(p,v)||w(v,_),!E&&d(p,y)&&p[y]!==Object||w(y,T),T.prototype=p,n({global:!0,constructor:!0,forced:E},{Iterator:T})},8227:function(t,e,r){"use strict";var n=r(4576),i=r(5745),s=r(9297),o=r(3392),a=r(4495),h=r(7040),l=n.Symbol,u=i("wks"),c=h?l["for"]||l:l&&l.withoutSetter||o;t.exports=function(t){return s(u,t)||(u[t]=a&&s(l,t)?l[t]:c("Symbol."+t)),u[t]}},8237:function(t,e,r){"use strict";var n=r(6518),i=r(2652),s=r(9306),o=r(8551),a=r(1767),h=r(9539),l=r(4549),u=r(8745),c=r(9039),d=TypeError,f=c(function(){[].keys().reduce(function(){},void 0)}),p=!f&&l("reduce",d);n({target:"Iterator",proto:!0,real:!0,forced:f||p},{reduce:function(t){o(this);try{s(t)}catch(c){h(this,"throw",c)}var e=arguments.length<2,r=e?void 0:arguments[1];if(p)return u(p,this,e?[t]:[t,r]);var n=a(this),l=0;if(i(n,function(n){e?(e=!1,r=n):r=t(r,n,l),l++},{IS_RECORD:!0}),e)throw new d("Reduce of empty iterator with no initial value");return r}})},8374:function(t,e,r){"use strict";var n="undefined"!==typeof Symbol&&Symbol,i=r(7724);t.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},8469:function(t,e,r){"use strict";var n=r(9504),i=r(507),s=r(4402),o=s.Set,a=s.proto,h=n(a.forEach),l=n(a.keys),u=l(new o).next;t.exports=function(t,e,r){return r?i({iterator:l(t),next:u},e):h(t,e)}},8480:function(t,e,r){"use strict";var n=r(1828),i=r(8727),s=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},8527:function(t,e,r){"use strict";var n=r(7080),i=r(4402).has,s=r(5170),o=r(3789),a=r(507),h=r(9539);t.exports=function(t){var e=n(this),r=o(t);if(s(e)<r.size)return!1;var l=r.getIterator();return!1!==a(l,function(t){if(!i(e,t))return h(l,"normal",!1)})}},8551:function(t,e,r){"use strict";var n=r(34),i=String,s=TypeError;t.exports=function(t){if(n(t))return t;throw new s(i(t)+" is not an object")}},8622:function(t,e,r){"use strict";var n=r(4576),i=r(4901),s=n.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},8686:function(t,e,r){"use strict";var n=r(3724),i=r(9039);t.exports=n&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},8727:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:function(t,e,r){"use strict";var n=r(616),i=Function.prototype,s=i.apply,o=i.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(s):function(){return o.apply(s,arguments)})},8750:function(t,e,r){"use strict";var n=r(7080),i=r(4402),s=r(5170),o=r(3789),a=r(8469),h=r(507),l=i.Set,u=i.add,c=i.has;t.exports=function(t){var e=n(this),r=o(t),i=new l;return s(e)>r.size?h(r.getIterator(),function(t){c(e,t)&&u(i,t)}):a(e,function(t){r.includes(t)&&u(i,t)}),i}},8773:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);e.f=i?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},8981:function(t,e,r){"use strict";var n=r(7750),i=Object;t.exports=function(t){return i(n(t))}},9039:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},9234:function(t,e,r){"use strict";var n=r(5302);t.exports=function(t){return n(t)||0===t?t:t<0?-1:1}},9286:function(t,e,r){"use strict";var n=r(4402),i=r(8469),s=n.Set,o=n.add;t.exports=function(t){var e=new s;return i(t,function(t){o(e,t)}),e}},9297:function(t,e,r){"use strict";var n=r(9504),i=r(8981),s=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},9306:function(t,e,r){"use strict";var n=r(4901),i=r(6823),s=TypeError;t.exports=function(t){if(n(t))return t;throw new s(i(t)+" is not a function")}},9340:function(t){"use strict";t.exports=TypeError},9433:function(t,e,r){"use strict";var n=r(4576),i=Object.defineProperty;t.exports=function(t,e){try{i(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9462:function(t,e,r){"use strict";var n=r(9565),i=r(2360),s=r(6699),o=r(6279),a=r(8227),h=r(1181),l=r(5966),u=r(7657).IteratorPrototype,c=r(2529),d=r(9539),f=r(1385),p=a("toStringTag"),m="IteratorHelper",g="WrapForValidIterator",y="normal",_="throw",v=h.set,x=function(t){var e=h.getterFor(t?g:m);return o(i(u),{next:function(){var r=e(this);if(t)return r.nextHandler();if(r.done)return c(void 0,!0);try{var n=r.nextHandler();return r.returnHandlerResult?n:c(n,r.done)}catch(i){throw r.done=!0,i}},return:function(){var r=e(this),i=r.iterator;if(r.done=!0,t){var s=l(i,"return");return s?n(s,i):c(void 0,!0)}if(r.inner)try{d(r.inner.iterator,y)}catch(o){return d(i,_,o)}if(r.openIters)try{f(r.openIters,y)}catch(o){return d(i,_,o)}return i&&d(i,y),c(void 0,!0)}})},b=x(!0),E=x(!1);s(E,p,"Iterator Helper"),t.exports=function(t,e,r){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=e?g:m,i.returnHandlerResult=!!r,i.nextHandler=t,i.counter=0,i.done=!1,v(this,i)};return n.prototype=e?b:E,n}},9504:function(t,e,r){"use strict";var n=r(616),i=Function.prototype,s=i.call,o=n&&i.bind.bind(s,s);t.exports=n?o:function(t){return function(){return s.apply(t,arguments)}}},9511:function(t,e,r){"use strict";var n=r(9340),i=r(1012),s=r(9810),o=r(28),a=r(3436),h=a||o||s;t.exports=function(){var t,e={assert:function(t){if(!e.has(t))throw new n("Side channel does not contain "+i(t))},delete:function(e){return!!t&&t["delete"](e)},get:function(e){return t&&t.get(e)},has:function(e){return!!t&&t.has(e)},set:function(e,r){t||(t=h()),t.set(e,r)}};return e}},9519:function(t,e,r){"use strict";var n,i,s=r(4576),o=r(2839),a=s.process,h=s.Deno,l=a&&a.versions||h&&h.version,u=l&&l.v8;u&&(n=u.split("."),i=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&o&&(n=o.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/),n&&(i=+n[1]))),t.exports=i},9539:function(t,e,r){"use strict";var n=r(9565),i=r(8551),s=r(5966);t.exports=function(t,e,r){var o,a;i(t);try{if(o=s(t,"return"),!o){if("throw"===e)throw r;return r}o=n(o,t)}catch(h){a=!0,o=h}if("throw"===e)throw r;if(a)throw o;return i(o),r}},9565:function(t,e,r){"use strict";var n=r(616),i=Function.prototype.call;t.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},9576:function(t,e,r){"use strict";var n=r(1068);if(n)try{n([],"length")}catch(i){n=null}t.exports=n},9577:function(t,e,r){"use strict";var n=r(9928),i=r(4644),s=r(1108),o=r(1291),a=r(5854),h=i.aTypedArray,l=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,c=function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}(),d=c&&function(){try{new Int8Array(1)["with"](-.5,1)}catch(t){return!0}}();u("with",{with:function(t,e){var r=h(this),i=o(t),u=s(r)?a(e):+e;return n(r,l(r),i,u)}}["with"],!c||d)},9617:function(t,e,r){"use strict";var n=r(5397),i=r(5610),s=r(6198),o=function(t){return function(e,r,o){var a=n(e),h=s(a);if(0===h)return!t&&-1;var l,u=i(o,h);if(t&&r!==r){while(h>u)if(l=a[u++],l!==l)return!0}else for(;h>u;u++)if((t||u in a)&&a[u]===r)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},9810:function(t,e,r){"use strict";var n=r(1012),i=r(9340),s=function(t,e,r){for(var n,i=t;null!=(n=i.next);i=n)if(n.key===e)return i.next=n.next,r||(n.next=t.next,t.next=n),n},o=function(t,e){if(t){var r=s(t,e);return r&&r.value}},a=function(t,e,r){var n=s(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},h=function(t,e){return!!t&&!!s(t,e)},l=function(t,e){if(t)return s(t,e,!0)};t.exports=function(){var t,e={assert:function(t){if(!e.has(t))throw new i("Side channel does not contain "+n(t))},delete:function(e){var r=t&&t.next,n=l(t,e);return n&&r&&r===n&&(t=void 0),!!n},get:function(e){return o(t,e)},has:function(e){return h(t,e)},set:function(e,r){t||(t={next:void 0}),a(t,e,r)}};return e}},9835:function(t){"use strict";t.exports=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},n=e[t](r);return 1!==n.size||4!==n.values().next().value}catch(i){return!1}}},9928:function(t,e,r){"use strict";var n=r(6198),i=r(1291),s=RangeError;t.exports=function(t,e,r,o){var a=n(t),h=i(r),l=h<0?a+h:h;if(l>=a||l<0)throw new s("Incorrect index");for(var u=new e(a),c=0;c<a;c++)u[c]=c===l?o:t[c];return u}}}]);
//# sourceMappingURL=chunk-vendors.45535a86.js.map